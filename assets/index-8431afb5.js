(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function bi(t){return t.replace(/\n/g," ").trim().replace(/\s{2,}/g," ")}const Ps={capitalizeFirstLetter:!1};function Rs(t){return t.length?t[0].toUpperCase()+t.slice(1):""}function ks(t,e){return e.capitalizeFirstLetter?Rs(t):t}function Ds(t,e=Ps){const n=t.toLowerCase();if(!n.length)return"";const r=n.replace(/^-+/,"").replace(/-{2,}/g,"-").replace(/-(?:.|$)/g,i=>{const s=i[1];return s?s.toUpperCase():""});return ks(r,e)}function Or(t){return t!==t.toUpperCase()}function Os(t){return t.split("").reduce((n,r,i,s)=>{const a=i>0?s[i-1]:"",o=i<s.length-1?s[i+1]:"",u=Or(a)||Or(o);return r===r.toLowerCase()||i===0||!u?n+=r:n+=`-${r.toLowerCase()}`,n},"").toLowerCase()}const Bs=["january","february","march","april","may","june","july","august","september","october","november","december"];Bs.map(t=>t.slice(0,3));function Ns(t){return!!t}const Ms=[(t,e)=>e in t,(t,e)=>e in t.constructor.prototype];function _i(t,e){return t?Ms.some(n=>{try{return n(t,e)}catch{return!1}}):!1}function Is(t,e){return t&&e.every(n=>_i(t,n))}function Ei(t){const e=De();return t!==1/0&&setTimeout(()=>{e.resolve()},t<=0?0:t),e.promise}function Ks(t){return!!(_i(t,"then")&&typeof t.then=="function")}function De(){let t,e,n=!1;const r=new Promise((i,s)=>{t=a=>(n=!0,i(a)),e=a=>{n=!0,s(a)}});if(!t||!e)throw new Error(`Reject and resolve callbacks were not set by the promise constructor for ${De.name}.`);return{promise:r,resolve:t,reject:e,isSettled(){return n}}}function or(t){return t?t instanceof Error?t.message:String(t):""}function Ls(t){return t instanceof Error?t:new Error(or(t))}function Oe(t){let e;try{e=Reflect.ownKeys(t)}catch{}return e??[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Br(t){return Object.entries(t).sort((e,n)=>e[0].localeCompare(n[0]))}function Us(t,e){return Oe(t).filter(r=>{const i=t[r];return e(r,i,t)}).reduce((r,i)=>(r[i]=t[i],r),{})}function Ge(t,e){let n=!1;const r=Oe(t).reduce((i,s)=>{const a=e(s,t[s],t);return a instanceof Promise&&(n=!0),{...i,[s]:a}},{});return n?new Promise(async(i,s)=>{try{await Promise.all(Oe(r).map(async a=>{const o=await r[a];r[a]=o})),i(r)}catch(a){s(a)}}):r}function Nr(t){return!!t&&typeof t=="object"}function xi(t,e){try{if(t===e)return!0;if(Nr(t)&&Nr(e)){const n=Br(t),r=Br(e);return JSON.stringify(n)===JSON.stringify(r)}else return JSON.stringify(t)===JSON.stringify(e)}catch(n){throw console.error(`Failed to compare objects using JSON.stringify: ${or(n)}`),n}}async function Hs(t){const e=De(),n=new Image;return n.onload=()=>{e.resolve(n)},n.onerror=()=>{e.reject(new Error(`Failed to load '${t}'`))},n.src=t,e.promise}function Jt(t){return String(t).endsWith("px")?String(t):`${t}px`}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ut=window,ur=Ut.ShadowRoot&&(Ut.ShadyCSS===void 0||Ut.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,lr=Symbol(),Mr=new WeakMap;let Si=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==lr)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ur&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=Mr.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Mr.set(n,e))}return e}toString(){return this.cssText}};const ft=t=>new Si(typeof t=="string"?t:t+"",void 0,lr),Ai=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Si(n,t,lr)},Fs=(t,e)=>{ur?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=Ut.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},Ir=ur?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ft(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var vn;const Yt=window,Kr=Yt.trustedTypes,js=Kr?Kr.emptyScript:"",Lr=Yt.reactiveElementPolyfillSupport,kn={toAttribute(t,e){switch(e){case Boolean:t=t?js:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},$i=(t,e)=>e!==t&&(e==e||t==t),mn={attribute:!0,type:String,converter:kn,reflect:!1,hasChanged:$i};let Ue=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=mn){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const s=this[e];this[n]=i,this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||mn}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Ir(i))}else e!==void 0&&n.push(Ir(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Fs(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=mn){var i;const s=this.constructor._$Ep(e,r);if(s!==void 0&&r.reflect===!0){const a=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:kn).toAttribute(n,r.type);this._$El=e,a==null?this.removeAttribute(s):this.setAttribute(s,a),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const a=i.getPropertyOptions(s),o=typeof a.converter=="function"?{fromAttribute:a.converter}:((r=a.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?a.converter:kn;this._$El=s,this[s]=o.fromAttribute(n,a.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||$i)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Ue.finalized=!0,Ue.elementProperties=new Map,Ue.elementStyles=[],Ue.shadowRootOptions={mode:"open"},Lr==null||Lr({ReactiveElement:Ue}),((vn=Yt.reactiveElementVersions)!==null&&vn!==void 0?vn:Yt.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var yn;const qt=window,Je=qt.trustedTypes,Ur=Je?Je.createPolicy("lit-html",{createHTML:t=>t}):void 0,ge=`lit$${(Math.random()+"").slice(9)}$`,Ci="?"+ge,zs=`<${Ci}>`,Ye=document,ht=(t="")=>Ye.createComment(t),dt=t=>t===null||typeof t!="object"&&typeof t!="function",Ti=Array.isArray,Vs=t=>Ti(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",rt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Hr=/-->/g,Fr=/>/g,Se=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),jr=/'/g,zr=/"/g,Pi=/^(?:script|style|textarea|title)$/i,Ws=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Gs=Ws(1),be=Symbol.for("lit-noChange"),H=Symbol.for("lit-nothing"),Vr=new WeakMap,Ve=Ye.createTreeWalker(Ye,129,null,!1),Js=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":"",a=rt;for(let u=0;u<n;u++){const l=t[u];let f,c,h=-1,m=0;for(;m<l.length&&(a.lastIndex=m,c=a.exec(l),c!==null);)m=a.lastIndex,a===rt?c[1]==="!--"?a=Hr:c[1]!==void 0?a=Fr:c[2]!==void 0?(Pi.test(c[2])&&(i=RegExp("</"+c[2],"g")),a=Se):c[3]!==void 0&&(a=Se):a===Se?c[0]===">"?(a=i??rt,h=-1):c[1]===void 0?h=-2:(h=a.lastIndex-c[2].length,f=c[1],a=c[3]===void 0?Se:c[3]==='"'?zr:jr):a===zr||a===jr?a=Se:a===Hr||a===Fr?a=rt:(a=Se,i=void 0);const p=a===Se&&t[u+1].startsWith("/>")?" ":"";s+=a===rt?l+zs:h>=0?(r.push(f),l.slice(0,h)+"$lit$"+l.slice(h)+ge+p):l+ge+(h===-2?(r.push(void 0),u):p)}const o=s+(t[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Ur!==void 0?Ur.createHTML(o):o,r]};class pt{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,a=0;const o=e.length-1,u=this.parts,[l,f]=Js(e,n);if(this.el=pt.createElement(l,r),Ve.currentNode=this.el.content,n===2){const c=this.el.content,h=c.firstChild;h.remove(),c.append(...h.childNodes)}for(;(i=Ve.nextNode())!==null&&u.length<o;){if(i.nodeType===1){if(i.hasAttributes()){const c=[];for(const h of i.getAttributeNames())if(h.endsWith("$lit$")||h.startsWith(ge)){const m=f[a++];if(c.push(h),m!==void 0){const p=i.getAttribute(m.toLowerCase()+"$lit$").split(ge),d=/([.?@])?(.*)/.exec(m);u.push({type:1,index:s,name:d[2],strings:p,ctor:d[1]==="."?qs:d[1]==="?"?Xs:d[1]==="@"?Zs:ln})}else u.push({type:6,index:s})}for(const h of c)i.removeAttribute(h)}if(Pi.test(i.tagName)){const c=i.textContent.split(ge),h=c.length-1;if(h>0){i.textContent=Je?Je.emptyScript:"";for(let m=0;m<h;m++)i.append(c[m],ht()),Ve.nextNode(),u.push({type:2,index:++s});i.append(c[h],ht())}}}else if(i.nodeType===8)if(i.data===Ci)u.push({type:2,index:s});else{let c=-1;for(;(c=i.data.indexOf(ge,c+1))!==-1;)u.push({type:7,index:s}),c+=ge.length-1}s++}}static createElement(e,n){const r=Ye.createElement("template");return r.innerHTML=e,r}}function qe(t,e,n=t,r){var i,s,a,o;if(e===be)return e;let u=r!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[r]:n._$Cl;const l=dt(e)?void 0:e._$litDirective$;return(u==null?void 0:u.constructor)!==l&&((s=u==null?void 0:u._$AO)===null||s===void 0||s.call(u,!1),l===void 0?u=void 0:(u=new l(t),u._$AT(t,n,r)),r!==void 0?((a=(o=n)._$Co)!==null&&a!==void 0?a:o._$Co=[])[r]=u:n._$Cl=u),u!==void 0&&(e=qe(t,u._$AS(t,e.values),u,r)),e}class Ys{constructor(e,n){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var n;const{el:{content:r},parts:i}=this._$AD,s=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:Ye).importNode(r,!0);Ve.currentNode=s;let a=Ve.nextNode(),o=0,u=0,l=i[0];for(;l!==void 0;){if(o===l.index){let f;l.type===2?f=new xt(a,a.nextSibling,this,e):l.type===1?f=new l.ctor(a,l.name,l.strings,this,e):l.type===6&&(f=new ea(a,this,e)),this.u.push(f),l=i[++u]}o!==(l==null?void 0:l.index)&&(a=Ve.nextNode(),o++)}return s}p(e){let n=0;for(const r of this.u)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class xt{constructor(e,n,r,i){var s;this.type=2,this._$AH=H,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cm=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=qe(this,e,n),dt(e)?e===H||e==null||e===""?(this._$AH!==H&&this._$AR(),this._$AH=H):e!==this._$AH&&e!==be&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Vs(e)?this.k(e):this.g(e)}O(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==H&&dt(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ye.createTextNode(e)),this._$AH=e}$(e){var n;const{values:r,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=pt.createElement(i.h,this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.p(r);else{const a=new Ys(s,this),o=a.v(this.options);a.p(r),this.T(o),this._$AH=a}}_$AC(e){let n=Vr.get(e.strings);return n===void 0&&Vr.set(e.strings,n=new pt(e)),n}k(e){Ti(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new xt(this.O(ht()),this.O(ht()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cm=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class ln{constructor(e,n,r,i,s){this.type=1,this._$AH=H,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=H}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const s=this.strings;let a=!1;if(s===void 0)e=qe(this,e,n,0),a=!dt(e)||e!==this._$AH&&e!==be,a&&(this._$AH=e);else{const o=e;let u,l;for(e=s[0],u=0;u<s.length-1;u++)l=qe(this,o[r+u],n,u),l===be&&(l=this._$AH[u]),a||(a=!dt(l)||l!==this._$AH[u]),l===H?e=H:e!==H&&(e+=(l??"")+s[u+1]),this._$AH[u]=l}a&&!i&&this.j(e)}j(e){e===H?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class qs extends ln{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===H?void 0:e}}const Qs=Je?Je.emptyScript:"";class Xs extends ln{constructor(){super(...arguments),this.type=4}j(e){e&&e!==H?this.element.setAttribute(this.name,Qs):this.element.removeAttribute(this.name)}}class Zs extends ln{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){var r;if((e=(r=qe(this,e,n,0))!==null&&r!==void 0?r:H)===be)return;const i=this._$AH,s=e===H&&i!==H||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==H&&(i===H||s);s&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class ea{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){qe(this,e)}}const Wr=qt.litHtmlPolyfillSupport;Wr==null||Wr(pt,xt),((yn=qt.litHtmlVersions)!==null&&yn!==void 0?yn:qt.litHtmlVersions=[]).push("2.6.1");const ta=(t,e,n)=>{var r,i;const s=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let a=s._$litPart$;if(a===void 0){const o=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=a=new xt(e.insertBefore(ht(),o),o,void 0,n??{})}return a._$AI(t),a};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var gn,wn;class at extends Ue{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ta(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return be}}at.finalized=!0,at._$litElement$=!0,(gn=globalThis.litElementHydrateSupport)===null||gn===void 0||gn.call(globalThis,{LitElement:at});const Gr=globalThis.litElementPolyfillSupport;Gr==null||Gr({LitElement:at});((wn=globalThis.litElementVersions)!==null&&wn!==void 0?wn:globalThis.litElementVersions=[]).push("3.2.2");var na=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};function ra(){return t=>{}}let vt=class extends at{};vt=na([ra()],vt);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ia=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function Jr(t){return(e,n)=>n!==void 0?((r,i,s)=>{i.constructor.createProperty(s,r)})(t,e,n):ia(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var bn;((bn=window.HTMLSlotElement)===null||bn===void 0?void 0:bn.prototype.assignedElements)!=null;const Dn=Symbol("this-is-an-element-vir-declarative-element"),cr=Symbol("key for ignoring inputs not having been set yet"),sa={[cr]:!0};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const aa={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},fr=t=>(...e)=>({_$litDirective$:t,values:e});class hr{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}}function oa(t,e){return Ri(t,e,vt)}function Ri(t,e,n){On(t,e);const r=t.element;if(!(r instanceof n))throw new Error(`${e} attached to non ${n.name} element.`);return r}function On(t,e){if(t.type!==aa.ELEMENT)throw new Error(`${e} directive can only be attached directly to an element.`);if(!t.element)throw new Error(`${e} directive found no element.`)}function dr(t,e){return ua(t,e)}const ua=fr(class extends hr{constructor(t){super(t),this.element=oa(t,"assign")}render(t,e){return la(t,this.element,e),be}});function la(t,e,n){if(e.tagName.toLowerCase()!==t.tagName.toLowerCase())throw console.error(e,t),new Error(`Assignment mismatch. Assignment was made for ${e.tagName.toLowerCase()} but it's attached to ${t.tagName.toLowerCase()}`);e.assignInputs(n)}function ki(t){const e=t.getRootNode();if(!(e instanceof ShadowRoot))return!1;const n=e.host;return n instanceof vt?!0:ki(n)}var O=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Y=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},se,Ae,Ce,Te,je,He,G,ot,Bn,Nn;function ca(t){if(!t)return{};const e=Us(t,(r,i)=>i instanceof Di);return Ge(e,(r,i)=>new fa(i.initialValue))}const Dt=Symbol("not set");class fa{constructor(e){se.add(this),Ae.set(this,Dt),Ce.set(this,void 0),Te.set(this,void 0),je.set(this,[]),He.set(this,void 0),G.set(this,De()),e&&this.setValue({newPromise:e})}setValue(e){if("createPromise"in e){if(O(this,Ae,"f")===Dt||!xi(e.trigger,O(this,Ae,"f"))){Y(this,Ae,e.trigger,"f");const n=e.createPromise();O(this,se,"m",Bn).call(this,n)}}else"newPromise"in e?(O(this,Ae,"f"),O(this,se,"m",Bn).call(this,e.newPromise),O(this,se,"m",ot).call(this)):"resolvedValue"in e?O(this,se,"m",Nn).call(this,e.resolvedValue):e.forceUpdate&&(Y(this,Ae,Dt,"f"),Y(this,Ce,void 0,"f"),O(this,G,"f").isSettled()||O(this,G,"f").reject("Canceled by force update"),Y(this,G,De(),"f"),O(this,se,"m",ot).call(this))}getValue(){return O(this,G,"f").isSettled()?O(this,Te,"f")?O(this,Te,"f"):O(this,Ce,"f"):O(this,G,"f").promise}addSettleListener(e){O(this,je,"f").push(e)}removeSettleListener(e){Y(this,je,O(this,je,"f").filter(n=>n!==e),"f")}}Ae=new WeakMap,Ce=new WeakMap,Te=new WeakMap,je=new WeakMap,He=new WeakMap,G=new WeakMap,se=new WeakSet,ot=function(){O(this,je,"f").forEach(e=>{e()})},Bn=function(e){e!==O(this,He,"f")&&(Y(this,Ce,void 0,"f"),Y(this,Te,void 0,"f"),Y(this,He,e,"f"),O(this,G,"f").isSettled()&&Y(this,G,De(),"f"),e.then(n=>{O(this,He,"f")===e&&O(this,se,"m",Nn).call(this,n)}).catch(n=>{O(this,He,"f")===e&&(Y(this,Te,Ls(n),"f"),O(this,G,"f").promise.catch(()=>{}),O(this,G,"f").reject(n),O(this,se,"m",ot).call(this))}))},Nn=function(e){e!==O(this,Ce,"f")&&(Y(this,Te,void 0,"f"),Y(this,Ce,e,"f"),O(this,G,"f").isSettled()&&Y(this,G,De(),"f"),O(this,G,"f").resolve(e),O(this,se,"m",ot).call(this))};class Di{constructor(e){this.initialValue=e}}function Oi(t){return new Di(t)}function Bi(t,e){return`${t}-${Os(e)}`}function ha(t,e){return e?Ge(e,n=>ft(`--${Bi(t,String(n))}`)):{}}function da(t,e){return t?Ge(t,(n,r)=>{const i=e[n];return ft(`var(${i}, ${r})`)}):{}}class pa extends CustomEvent{get type(){return this._type}constructor(e,n){super(typeof e=="string"?e:e.type,{detail:n,bubbles:!0,composed:!0}),this._type=""}}function Ni(){return t=>{var e;return e=class extends pa{constructor(n){super(t,n),this._type=t}},e.type=t,e}}function va(){return Ni()}function ma(t){return t?Object.keys(t).filter(e=>{if(typeof e!="string")throw new Error(`Expected event key of type string but got type "${typeof e}" for key ${String(e)}`);if(e==="")throw new Error("Got empty string for events key.");return!0}).reduce((e,n)=>{const r=Ni()(n);return e[n]=r,e},{}):{}}function Yr(t,e,n){if(typeof t!="string"&&typeof t!="number"&&typeof t!="symbol")throw new Error(`Property name must be a string, got type '${typeof t}' from: '${String(t)}' for '${n.toLowerCase()}'`);if(!(t in e))throw new Error(`Property '${String(t)}' does not exist on '${n.toLowerCase()}'.`)}function qr(t,e){const n=t;function r(s,a){e&&Yr(a,t,t.tagName);const o=t.asyncStateHandlerMap[a];return o?o.getValue():n[a]}return new Proxy({},{get:r,set:(s,a,o)=>{e&&Yr(a,t,t.tagName),s[a]=void 0;const u=t.asyncStateHandlerMap[a];return u?u.setValue(o):n[a]=o,!0},ownKeys:s=>Reflect.ownKeys(s),getOwnPropertyDescriptor(s,a){if(a in s)return{get value(){return r(s,a)},configurable:!0,enumerable:!0}},has:(s,a)=>Reflect.has(s,a)})}function ya(t,e){return e?Ge(e,n=>Bi(t,String(n))):{}}function ga({hostClassNames:t,cssVarNames:e,cssVarValues:n}){return{hostClassSelectors:Ge(t,(r,i)=>ft(`:host(.${i})`)),hostClassNames:Ge(t,(r,i)=>ft(i)),cssVarNames:e,cssVarValues:n}}function wa({host:t,hostClassesInit:e,hostClassNames:n,state:r,inputs:i}){e&&Oe(e).forEach(s=>{const a=e[s],o=n[s];typeof a=="function"&&(a({state:r,inputs:i})?t.classList.add(o):t.classList.remove(o))})}function ba(t,e){function n(i){Oe(i).forEach(s=>{const a=i[s],o=t.asyncStateHandlerMap[s];o?o.setValue(a):t.instanceState[s]=a})}return{dispatch:i=>t.dispatchEvent(i),updateState:n,inputs:t.instanceInputs,host:t,state:t.instanceState,events:e}}function pr(t){var e;const n=ma(t.events),r=ya(t.tagName,t.hostClasses),i=ha(t.tagName,t.cssVars),s=da(t.cssVars,i),a={...sa,...t.options},o=typeof t.styles=="function"?t.styles(ga({hostClassNames:r,cssVarNames:i,cssVarValues:s})):t.styles||Ai``,u=t.renderCallback,l=(e=class extends vt{createRenderParams(){return ba(this,n)}get instanceType(){throw new Error(`"instanceType" was called on ${t.tagName} as a value but it is only for types.`)}static get inputsType(){throw new Error(`"inputsType" was called on ${t.tagName} as a value but it is only for types.`)}static get stateType(){throw new Error(`"stateType" was called on ${t.tagName} as a value but it is only for types.`)}markInputsAsHavingBeenSet(){this.haveInputsBeenSet||(this.haveInputsBeenSet=!0)}render(){ki(this)&&!this.haveInputsBeenSet&&!a[cr]&&console.warn(this,`${t.tagName} got rendered before its input object was set. This was most likely caused by forgetting to use the "${dr.name}" directive on it. If no inputs are intended, use "${pr.name}" to define ${t.tagName}.`);const f=this.createRenderParams();!this.initCalled&&t.initCallback&&(this.initCalled=!0,t.initCallback(f));const c=t.renderCallback(f);return wa({host:f.host,hostClassesInit:t.hostClasses,hostClassNames:r,state:f.state,inputs:f.inputs}),c}disconnectedCallback(){if(super.disconnectedCallback(),t.cleanupCallback){const f=this.createRenderParams();t.cleanupCallback(f)}this.initCalled=!1}assignInputs(f){Oe(f).forEach(c=>{Jr()(this,c),this.instanceInputs[c]=f[c]}),this.markInputsAsHavingBeenSet()}constructor(){super(),this.initCalled=!1,this.haveInputsBeenSet=!1,this.definition={},this.asyncStateHandlerMap=ca(t.stateInit),this.instanceInputs=qr(this,!1),this.instanceState=qr(this,!0);const f=t.stateInit||{};Oe(f).forEach(c=>{Jr()(this,c);const h=this.asyncStateHandlerMap[c];h?(this.instanceState[c]=h.getValue(),h.addSettleListener(()=>{this[c]=h.getValue()})):this.instanceState[c]=f[c]}),this.definition=l}},e.tagName=t.tagName,e.styles=o,e.isStrictInstance=()=>!1,e.events=n,e.renderCallback=u,e.hostClasses=r,e.cssVarNames=i,e.stateInit=t.stateInit,e.cssVarValues=i,e);return Object.defineProperties(l,{[Dn]:{value:!0,writable:!1},name:{value:Ds(t.tagName,{capitalizeFirstLetter:!0}),writable:!0},isStrictInstance:{value:f=>f instanceof l,writable:!1}}),window.customElements.get(t.tagName)?console.warn(`Tried to define custom element '${t.tagName}' but it is already defined.`):window.customElements.define(t.tagName,l),l}function Mi(){return t=>pr({...t,options:{[cr]:!1},...t.options})}function ze(t,e){return _a(t,e)}const _a=fr(class extends hr{constructor(t){super(t),this.element=Ri(t,"listen",HTMLElement)}resetListener(t){this.lastListenerMetaData&&this.element.removeEventListener(this.lastListenerMetaData.eventType,this.lastListenerMetaData.listener),this.element.addEventListener(t.eventType,t.listener),this.lastListenerMetaData=t}createListenerMetaData(t,e){return{eventType:t,callback:e,listener:n=>{var r;return(r=this.lastListenerMetaData)===null||r===void 0?void 0:r.callback(n)}}}render(t,e){const n=typeof t=="string"?t:t.type;if(typeof n!="string")throw new Error(`Cannot listen to an event with a name that is not a string. Given event name: "${n}"`);return this.lastListenerMetaData&&this.lastListenerMetaData.eventType===n?this.lastListenerMetaData.callback=e:this.resetListener(this.createListenerMetaData(n,e)),be}}),Qr="onDomCreated",Ea=fr(class extends hr{constructor(t){super(t),On(t,Qr)}update(t,[e]){On(t,Qr);const n=t.element;return n!==this.element&&(requestAnimationFrame(()=>e(n)),this.element=n),this.render(e)}render(t){}});function Ii(t,e,n,r){return t instanceof Error?r?r(t):or(t):Ks(t)?e:n?n(t):t}function xa(t){var e,n;const{assertInputs:r,transformInputs:i}={assertInputs:(e=t==null?void 0:t.assertInputs)!==null&&e!==void 0?e:()=>{},transformInputs:(n=t==null?void 0:t.transformInputs)!==null&&n!==void 0?n:s=>s};return{defineElement:()=>s=>(r(s),Mi()(i(s))),defineElementNoInputs:s=>(r(s),pr(i(s)))}}function Sa(t,e){return t.filter((n,r)=>!e.includes(r))}function Ki(t){return t.filter(e=>Is(e,["tagName",Dn])&&!!e.tagName&&!!e[Dn])}const Li=new WeakMap;function Aa(t,e){var n;const r=Ki(e);return(n=Ui(Li,[t,...r]).value)===null||n===void 0?void 0:n.template}function $a(t,e,n){const r=Ki(e);return Fi(Li,[t,...r],n)}function Ui(t,e,n=0){const{currentTemplateAndNested:r,reason:i}=Hi(t,e,n);return r?n===e.length-1?{value:r,reason:"reached end of keys array"}:r.nested?Ui(r.nested,e,n+1):{value:void 0,reason:`map at key index ${n} did not have nested maps`}:{value:r,reason:i}}function Hi(t,e,n){const r=e[n];if(r==null)return{currentKey:void 0,currentTemplateAndNested:void 0,reason:`key at index ${n} not found`};if(!t.has(r))return{currentKey:r,currentTemplateAndNested:void 0,reason:`key at index ${n} was not in the map`};const i=t.get(r);return i==null?{currentKey:r,currentTemplateAndNested:void 0,reason:`value at key at index ${n} was undefined`}:{currentKey:r,currentTemplateAndNested:i,reason:"key and value exists"}}function Fi(t,e,n,r=0){var i;const{currentTemplateAndNested:s,currentKey:a,reason:o}=Hi(t,e,r);if(!a)return{result:!1,reason:o};const u=s??{nested:void 0,template:void 0};if(s||t.set(a,u),r===e.length-1)return u.template=n,{result:!0,reason:"set value at end of keys array"};const l=(i=u.nested)!==null&&i!==void 0?i:new WeakMap;return u.nested||(u.nested=l),Fi(l,e,n,r+1)}function ji(t,e,n){return{name:t,check:e,transform:n}}const Ca=new WeakMap;function zi(t,e,n){const r=Aa(t,e),i=r??n();if(!r){const a=$a(t,e,i);if(a.result)Ca.set(t,i);else throw new Error(`Failed to set template transform: ${a.reason}`)}const s=Sa(e,i.valueIndexDeletions);return{strings:i.templateStrings,values:s}}function Vi(t,e,n,r){const i=[],s=[],a=[];return t.forEach((u,l)=>{var f;const c=i.length-1,h=i[c],m=l-1,p=e[m];let d;r&&r(u),typeof h=="string"&&(d=(f=n.find(w=>w.check(h,u,p)))===null||f===void 0?void 0:f.transform,d&&(i[c]=h+d(p)+u,a.push(m))),d||i.push(u);const y=t.raw[l];d?s[c]=s[c]+d(p)+y:s.push(y)}),{templateStrings:Object.assign([],i,{raw:s}),valueIndexDeletions:a}}function Wi(t){return typeof t=="function"&&t.hasOwnProperty("tagName")&&typeof t.tagName=="string"&&t.tagName.includes("-")}const Ta=[ji("tag name css selector interpolation",(t,e,n)=>Wi(n),t=>t.tagName)];function Pa(t,e){return Vi(t,e,Ta)}function vr(t,...e){const n=zi(t,e,()=>Pa(t,e));return Ai(n.strings,...n.values)}const Ra=[ji("tag name interpolation",(t,e,n)=>{const r=t.trim().endsWith("<")&&!!e.match(/^[\s\n>]/)||(t==null?void 0:t.trim().endsWith("</"))&&e.trim().startsWith(">"),i=Wi(n);if(r&&!i)throw console.error({lastNewString:t,currentLitString:e,currentValue:n}),new Error(`Got interpolated tag name but it wasn't of type VirElement: '${n.prototype.constructor.name}'`);return r&&i},t=>t.tagName)];function ka(t){}function Da(t){return Vi(t.strings,t.values,Ra,ka)}function Be(t,...e){const n=Gs(t,...e),r=zi(t,e,()=>Da(n));return{...n,strings:r.strings,values:r.values}}function Oa(t){return{height:t.maxHeight,width:t.maxWidth}}function Ba({constraintBox:t,sizableBox:e}){return e.width/e.height>t.width/t.height?"width":"height"}function Qt(t){if("templateString"in t)return t.templateString;const{strings:e,values:n}=t;if((!e||!(e!=null&&e.length))&&(!n||!n.length))return"";const r=[...n||[],""],s=(e??[""]).map((a,o)=>{const u=Na(a,r[o]);return`${a}${u}`});return bi(s.join(""))}function Na(t,e){return e._$litType$!=null||e._$litDirective$!=null?Qt(e):Array.isArray(e)?e.map(r=>Qt(r)).join(""):t.endsWith("=")?`"${e}"`:e}var Xr=Object.freeze,Ma=Object.defineProperty,Ia=(t,e)=>Xr(Ma(t,"raw",{value:Xr(e||t.slice())})),Zr;const Mn="ready-ping",Gi="ready-pong",Ht=Mi()({tagName:"vir-resizable-image",stateInit:{imageData:Oi(),imageDimensions:void 0},styles:vr`
        :host {
            display: block;
            position: relative;
            overflow: hidden;
        }

        .frame-constraint {
            position: relative;
            transition: 100ms;
        }

        iframe {
            display: block;
            border: none;
            max-width: calc(100% + 1px);
            max-height: calc(100% + 1px);
            width: calc(100% + 1px);
            height: calc(100% + 1px);
        }
    `,renderCallback:({state:t,inputs:e,updateState:n,host:r})=>{n({imageData:{createPromise:async()=>Ka(e.imageUrl),trigger:e.imageUrl}});const i=Ii(t.imageData,"Loading...",s=>{const a=r.shadowRoot.querySelector(".frame-constraint");if(!(a instanceof HTMLElement))throw new Error("Could not find frame constraint div.");const o=t.imageDimensions??s.dimensions,u=Oa(e.maxDimensions),l=Ba({sizableBox:o,constraintBox:u}),f=u[l]/o[l],c=f>1&&!e.forceImageGrow?1:f;return a.style.width=Jt(Math.floor(o.width*c)),a.style.height=Jt(Math.floor(o.height*c)),Be`
                    <iframe
                        ${Ea(async h=>{var d;const m=h;let p=!1;for(m.contentWindow.addEventListener("message",y=>{if(y.data===Mn)return;if(y.data===Gi){p=!0;return}const w=JSON.parse(y.data),_=Number(w.width),g=Number(w.height);!isNaN(_)&&!isNaN(g)?n({imageDimensions:{width:_,height:g}}):console.warn(`Got bad data: ${JSON.stringify(w)}`)});!p;)(d=m.contentWindow)==null||d.postMessage(Mn),await Ei(100)})}
                        scrolling="no"
                        srcdoc=${Ua(s,e.transformSvgJavascript)}
                    ></iframe>
                `});return Be`
            <div class="frame-constraint">${i}</div>
        `}});async function Ka(t){var o;const e=await fetch(t),n=await e.text(),r=((o=e.headers.get("Content-Type"))==null?void 0:o.includes("svg"))||n.includes("<svg"),i=Be`
        <img src=${t} />
    `,s=r?n:Qt(i),a=await La(t);return{templateString:s,dimensions:a,imageUrl:t}}async function La(t){const e=await Hs(t);return{width:e.naturalWidth,height:e.naturalHeight}}function Ua(t,e){const n=Be(Zr||(Zr=Ia([`
        <!DOCTYPE html>
        <html>
            <head>
                <style>
                    body,
                    html {
                        height: 100vh;
                        width: 100vw;
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                    }

                    img,
                    svg {
                        max-height: 100vh;
                        max-width: 100vw;
                        width: 100vw;
                        height: auto;
                    }
                </style>
                <script>
                    let resolve;
                    const readyPromise = new Promise((innerResolve) => {
                        resolve = innerResolve;
                    });
                    globalThis.addEventListener('message', (event) => {
                        if (event.data === '`,`') {
                            resolve();
                            globalThis.postMessage('`,`');
                        }
                    });
                <\/script>
            </head>
            <body>
                `,`

                <script>
                    const svgElement = document.body.querySelector('svg');

                    if (svgElement) {
                        const viewBox = svgElement.getAttribute('viewBox');
                        const viewBoxDimensions = viewBox?.match(
                            /s*\\d+\\s+\\d+\\s+(\\d+)\\s+(\\d+)\\s*/,
                        );
                        const viewBoxWidth = viewBoxDimensions?.[1];
                        const viewBoxHeight = viewBoxDimensions?.[2];
                        const width = Number(
                            svgElement.getAttribute('width')?.replace(/px$/, '') ?? viewBoxWidth,
                        );
                        const height = Number(
                            svgElement.getAttribute('height')?.replace(/px$/, '') ?? viewBoxHeight,
                        );

                        if (!isNaN(width) && !isNaN(height) && !viewBox) {
                            svgElement.setAttribute('viewBox', \`0 0 \${width} \${height}\`);
                        } else if (isNaN(width) || isNaN(height)) {
                            console.warn(
                                \`Failed to retrieve dimensions: \${JSON.stringify({
                                    width,
                                    height,
                                    viewBoxWidth,
                                    viewBoxHeight,
                                    imageUrl: '`,`',
                                })}\`,
                            );
                        }
                        svgElement.removeAttribute('width');
                        svgElement.removeAttribute('height');
                        svgElement.style.removeProperty('width');
                        svgElement.style.removeProperty('height');
                        /*
                        console.log({
                            width,
                            height,
                            viewBoxWidth,
                            viewBoxHeight,
                            imageUrl: '`,`',
                            dimensions: JSON.parse('`,`'),
                        });
                        */

                        `,`;

                        readyPromise.then(() => {
                            globalThis.postMessage(JSON.stringify({width, height}));
                        });
                    }
                <\/script>
            </body>
        </html>
    `],[`
        <!DOCTYPE html>
        <html>
            <head>
                <style>
                    body,
                    html {
                        height: 100vh;
                        width: 100vw;
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                    }

                    img,
                    svg {
                        max-height: 100vh;
                        max-width: 100vw;
                        width: 100vw;
                        height: auto;
                    }
                </style>
                <script>
                    let resolve;
                    const readyPromise = new Promise((innerResolve) => {
                        resolve = innerResolve;
                    });
                    globalThis.addEventListener('message', (event) => {
                        if (event.data === '`,`') {
                            resolve();
                            globalThis.postMessage('`,`');
                        }
                    });
                <\/script>
            </head>
            <body>
                `,`

                <script>
                    const svgElement = document.body.querySelector('svg');

                    if (svgElement) {
                        const viewBox = svgElement.getAttribute('viewBox');
                        const viewBoxDimensions = viewBox?.match(
                            /s*\\\\d+\\\\s+\\\\d+\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s*/,
                        );
                        const viewBoxWidth = viewBoxDimensions?.[1];
                        const viewBoxHeight = viewBoxDimensions?.[2];
                        const width = Number(
                            svgElement.getAttribute('width')?.replace(/px$/, '') ?? viewBoxWidth,
                        );
                        const height = Number(
                            svgElement.getAttribute('height')?.replace(/px$/, '') ?? viewBoxHeight,
                        );

                        if (!isNaN(width) && !isNaN(height) && !viewBox) {
                            svgElement.setAttribute('viewBox', \\\`0 0 \\\${width} \\\${height}\\\`);
                        } else if (isNaN(width) || isNaN(height)) {
                            console.warn(
                                \\\`Failed to retrieve dimensions: \\\${JSON.stringify({
                                    width,
                                    height,
                                    viewBoxWidth,
                                    viewBoxHeight,
                                    imageUrl: '`,`',
                                })}\\\`,
                            );
                        }
                        svgElement.removeAttribute('width');
                        svgElement.removeAttribute('height');
                        svgElement.style.removeProperty('width');
                        svgElement.style.removeProperty('height');
                        /*
                        console.log({
                            width,
                            height,
                            viewBoxWidth,
                            viewBoxHeight,
                            imageUrl: '`,`',
                            dimensions: JSON.parse('`,`'),
                        });
                        */

                        `,`;

                        readyPromise.then(() => {
                            globalThis.postMessage(JSON.stringify({width, height}));
                        });
                    }
                <\/script>
            </body>
        </html>
    `])),Mn,Gi,t.templateString,t.imageUrl,t.imageUrl,JSON.stringify(t.dimensions),e??"");return bi(Qt(n))}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k=function(){return k=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},k.apply(this,arguments)};function In(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var I=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L=Object.keys,z=Array.isArray;typeof Promise<"u"&&!I.Promise&&(I.Promise=Promise);function W(t,e){return typeof e!="object"||L(e).forEach(function(n){t[n]=e[n]}),t}var mt=Object.getPrototypeOf,Ha={}.hasOwnProperty;function q(t,e){return Ha.call(t,e)}function Qe(t,e){typeof e=="function"&&(e=e(mt(t))),(typeof Reflect>"u"?L:Reflect.ownKeys)(e).forEach(function(n){he(t,n,e[n])})}var Ji=Object.defineProperty;function he(t,e,n,r){Ji(t,e,W(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Xe(t){return{from:function(e){return t.prototype=Object.create(e.prototype),he(t.prototype,"constructor",t),{extend:Qe.bind(null,t.prototype)}}}}var Fa=Object.getOwnPropertyDescriptor;function mr(t,e){var n=Fa(t,e),r;return n||(r=mt(t))&&mr(r,e)}var ja=[].slice;function cn(t,e,n){return ja.call(t,e,n)}function Yi(t,e){return e(t)}function it(t){if(!t)throw new Error("Assertion Failed")}function qi(t){I.setImmediate?setImmediate(t):setTimeout(t,0)}function Qi(t,e){return t.reduce(function(n,r,i){var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function za(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function fe(t,e){if(q(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=fe(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(a!==-1){var o=t[e.substr(0,a)];return o===void 0?void 0:fe(o,e.substr(a+1))}}function te(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){it(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)te(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s),o=e.substr(s+1);if(o==="")n===void 0?z(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var u=t[a];(!u||!q(t,a))&&(u=t[a]={}),te(u,o,n)}}else n===void 0?z(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Va(t,e){typeof e=="string"?te(t,e,void 0):"length"in e&&[].map.call(e,function(n){te(t,n,void 0)})}function Xi(t){var e={};for(var n in t)q(t,n)&&(e[n]=t[n]);return e}var Wa=[].concat;function Zi(t){return Wa.apply([],t)}var es="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Zi([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return I[t]}),Ga=es.map(function(t){return I[t]});Qi(es,function(t){return[t,!0]});var ye=null;function St(t){ye=typeof WeakMap<"u"&&new WeakMap;var e=Kn(t);return ye=null,e}function Kn(t){if(!t||typeof t!="object")return t;var e=ye&&ye.get(t);if(e)return e;if(z(t)){e=[],ye&&ye.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Kn(t[n]))}else if(Ga.indexOf(t.constructor)>=0)e=t;else{var i=mt(t);e=i===Object.prototype?{}:Object.create(i),ye&&ye.set(t,e);for(var s in t)q(t,s)&&(e[s]=Kn(t[s]))}return e}var Ja={}.toString;function Ln(t){return Ja.call(t).slice(8,-1)}var Un=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ya=typeof Un=="symbol"?function(t){var e;return t!=null&&(e=t[Un])&&e.apply(t)}:function(){return null},Fe={};function le(t){var e,n,r,i;if(arguments.length===1){if(z(t))return t.slice();if(this===Fe&&typeof t=="string")return[t];if(i=Ya(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var yr=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ae=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ts(t,e){ae=t,ns=e}var ns=function(){return!0},qa=!new Error("").stack;function Ie(){if(qa)try{throw Ie.arguments,new Error}catch(t){return t}return new Error}function Hn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(ns).map(function(r){return`
`+r}).join("")):""}var Qa=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],rs=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gr=Qa.concat(rs),Xa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ze(t,e){this._e=Ie(),this.name=t,this.message=e}Xe(Ze).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Hn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function is(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Xt(t,e,n,r){this._e=Ie(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=is(t,e)}Xe(Xt).from(Ze);function ut(t,e){this._e=Ie(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=is(t,e)}Xe(ut).from(Ze);var wr=gr.reduce(function(t,e){return t[e]=e+"Error",t},{}),Za=Ze,T=gr.reduce(function(t,e){var n=e+"Error";function r(i,s){this._e=Ie(),this.name=n,i?typeof i=="string"?(this.message=""+i+(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Xa[e]||n,this.inner=null)}return Xe(r).from(Za),t[e]=r,t},{});T.Syntax=SyntaxError;T.Type=TypeError;T.Range=RangeError;var ei=rs.reduce(function(t,e){return t[e+"Error"]=T[e],t},{});function eo(t,e){if(!t||t instanceof Ze||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ei[t.name])return t;var n=new ei[t.name](e||t.message,t);return"stack"in t&&he(n,"stack",{get:function(){return this.inner.stack}}),n}var fn=gr.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=T[e]),t},{});fn.ModifyError=Xt;fn.DexieError=Ze;fn.BulkError=ut;function M(){}function At(t){return t}function to(t,e){return t==null||t===At?e:function(n){return e(t(n))}}function Ne(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function no(t,e){return t===M?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ne(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ne(i,this.onerror):i),s!==void 0?s:n}}function ro(t,e){return t===M?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ne(r,this.onerror):r)}}function io(t,e){return t===M?e:function(n){var r=t.apply(this,arguments);W(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ne(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Ne(s,this.onerror):s),r===void 0?a===void 0?void 0:a:W(r,a)}}function so(t,e){return t===M?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function br(t,e){return t===M?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}var yt={},ao=100,oo=20,ss=100,_r=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,mt(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,mt(e),t]}(),Fn=_r[0],Zt=_r[1],jn=_r[2],as=Zt&&Zt.then,Ft=Fn&&Fn.constructor,Er=!!jn,zn=!1,uo=jn?function(){jn.then(Ot)}:I.setImmediate?setImmediate.bind(null,Ot):I.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Ot(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Ot,0)},gt=function(t,e){st.push([t,e]),en&&(uo(),en=!1)},Vn=!0,en=!0,Re=[],jt=[],Wn=null,Gn=At,We={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ri,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{ri(t[0],t[1])}catch{}})}},A=We,st=[],ke=0,zt=[];function S(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=M,this._lib=!1;var e=this._PSD=A;if(ae&&(this._stackHolder=Ie(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==yt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Yn(this,this._value);return}this._state=null,this._value=null,++e.ref,us(this,t)}var Jn={get:function(){var t=A,e=tn;function n(r,i){var s=this,a=!t.global&&(t!==A||e!==tn),o=a&&!de(),u=new S(function(l,f){xr(s,new os(rn(r,t,a,o),rn(i,t,a,o),l,f,t))});return ae&&fs(u,this),u}return n.prototype=yt,n},set:function(t){he(this,"then",t&&t.prototype===yt?Jn:{get:function(){return t},set:Jn.set})}};Qe(S.prototype,{then:Jn,_then:function(t,e){xr(this,new os(null,null,t,e,A))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):Vt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):Vt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),Vt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{zn=!0;var t=cs(this,[],oo),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{zn=!1}}},timeout:function(t,e){var n=this;return t<1/0?new S(function(r,i){var s=setTimeout(function(){return i(new T.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&he(S.prototype,Symbol.toStringTag,"Dexie.Promise");We.env=hs();function os(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}Qe(S,{all:function(){var t=le.apply(null,arguments).map(nn);return new S(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,s){return S.resolve(i).then(function(a){t[s]=a,--r||e(t)},n)})})},resolve:function(t){if(t instanceof S)return t;if(t&&typeof t.then=="function")return new S(function(n,r){t.then(n,r)});var e=new S(yt,!0,t);return fs(e,Wn),e},reject:Vt,race:function(){var t=le.apply(null,arguments).map(nn);return new S(function(e,n){t.map(function(r){return S.resolve(r).then(e,n)})})},PSD:{get:function(){return A},set:function(t){return A=t}},totalEchoes:{get:function(){return tn}},newPSD:_e,usePSD:tt,scheduler:{get:function(){return gt},set:function(t){gt=t}},rejectionMapper:{get:function(){return Gn},set:function(t){Gn=t}},follow:function(t,e){return new S(function(n,r){return _e(function(i,s){var a=A;a.unhandleds=[],a.onunhandled=s,a.finalize=Ne(function(){var o=this;co(function(){o.unhandleds.length===0?i():s(o.unhandleds[0])})},a.finalize),t()},e,n,r)})}});Ft&&(Ft.allSettled&&he(S,"allSettled",function(){var t=le.apply(null,arguments).map(nn);return new S(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,s){return S.resolve(i).then(function(a){return r[s]={status:"fulfilled",value:a}},function(a){return r[s]={status:"rejected",reason:a}}).then(function(){return--n||e(r)})})})}),Ft.any&&typeof AggregateError<"u"&&he(S,"any",function(){var t=le.apply(null,arguments).map(nn);return new S(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(s,a){return S.resolve(s).then(function(o){return e(o)},function(o){i[a]=o,--r||n(new AggregateError(i))})})})}));function us(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&$t();n&&typeof n.then=="function"?us(t,function(i,s){n instanceof S?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,ls(t)),r&&Ct()}},Yn.bind(null,t))}catch(n){Yn(t,n)}}function Yn(t,e){if(jt.push(e),t._state===null){var n=t._lib&&$t();e=Gn(e),t._state=!1,t._value=e,ae&&e!==null&&typeof e=="object"&&!e._promise&&za(function(){var r=mr(e,"stack");e._promise=t,he(e,"stack",{get:function(){return zn?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),fo(t),ls(t),n&&Ct()}}function ls(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)xr(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),ke===0&&(++ke,gt(function(){--ke===0&&Sr()},[]))}function xr(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++ke,gt(lo,[n,t,e])}function lo(t,e,n){try{Wn=e;var r,i=e._value;e._state?r=t(i):(jt.length&&(jt=[]),r=t(i),jt.indexOf(i)===-1&&ho(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Wn=null,--ke===0&&Sr(),--n.psd.ref||n.psd.finalize()}}function cs(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,s,a;i!=null?(s=i.name||"Error",a=i.message||i,r=Hn(i,0)):(s=i,a=""),e.push(s+(a?": "+a:"")+r)}return ae&&(r=Hn(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&cs(t._prev,e,n)),e}function fs(t,e){var n=e?e._numPrev+1:0;n<ao&&(t._prev=e,t._numPrev=n)}function Ot(){$t()&&Ct()}function $t(){var t=Vn;return Vn=!1,en=!1,t}function Ct(){var t,e,n;do for(;st.length>0;)for(t=st,st=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(st.length>0);Vn=!0,en=!0}function Sr(){var t=Re;Re=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=zt.slice(0),n=e.length;n;)e[--n]()}function co(t){function e(){t(),zt.splice(zt.indexOf(e),1)}zt.push(e),++ke,gt(function(){--ke===0&&Sr()},[])}function fo(t){Re.some(function(e){return e._value===t._value})||Re.push(t)}function ho(t){for(var e=Re.length;e;)if(Re[--e]._value===t._value){Re.splice(e,1);return}}function Vt(t){return new S(yt,!1,t)}function K(t,e){var n=A;return function(){var r=$t(),i=A;try{return Ee(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Ee(i,!1),r&&Ct()}}}var j={awaits:0,echoes:0,id:0},po=0,Wt=[],_n=0,tn=0,vo=0;function _e(t,e,n,r){var i=A,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++vo;var a=We.env;s.env=Er?{Promise:S,PromiseProp:{value:S,configurable:!0,writable:!0},all:S.all,race:S.race,allSettled:S.allSettled,any:S.any,resolve:S.resolve,reject:S.reject,nthen:ti(a.nthen,s),gthen:ti(a.gthen,s)}:{},e&&W(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=tt(s,t,n,r);return s.ref===0&&s.finalize(),o}function et(){return j.id||(j.id=++po),++j.awaits,j.echoes+=ss,j.id}function de(){return j.awaits?(--j.awaits===0&&(j.id=0),j.echoes=j.awaits*ss,!0):!1}(""+as).indexOf("[native code]")===-1&&(et=de=M);function nn(t){return j.echoes&&t&&t.constructor===Ft?(et(),t.then(function(e){return de(),e},function(e){return de(),U(e)})):t}function mo(t){++tn,(!j.echoes||--j.echoes===0)&&(j.echoes=j.id=0),Wt.push(A),Ee(t,!0)}function yo(){var t=Wt[Wt.length-1];Wt.pop(),Ee(t,!1)}function Ee(t,e){var n=A;if((e?j.echoes&&(!_n++||t!==A):_n&&(!--_n||t!==A))&&ds(e?mo.bind(null,t):yo),t!==A&&(A=t,n===We&&(We.env=hs()),Er)){var r=We.env.Promise,i=t.env;Zt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(I,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function hs(){var t=I.Promise;return Er?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(I,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Zt.then,gthen:t.prototype.then}:{}}function tt(t,e,n,r,i){var s=A;try{return Ee(t,!0),e(n,r,i)}finally{Ee(s,!1)}}function ds(t){as.call(Fn,t)}function rn(t,e,n,r){return typeof t!="function"?t:function(){var i=A;n&&et(),Ee(e,!0);try{return t.apply(this,arguments)}finally{Ee(i,!1),r&&ds(de)}}}function ti(t,e){return function(n,r){return t.call(this,rn(n,e),rn(r,e))}}var ni="unhandledrejection";function ri(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(I.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(ni,!0,!0),W(r,i)):I.CustomEvent&&(r=new CustomEvent(ni,{detail:i}),W(r,i)),r&&I.dispatchEvent&&(dispatchEvent(r),!I.PromiseRejectionEvent&&I.onunhandledrejection))try{I.onunhandledrejection(r)}catch{}ae&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var U=S.reject;function qn(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!A.letThrough&&!t._vip){if(t._state.openComplete)return U(new T.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return U(new T.DatabaseClosed);t.open().catch(M)}return t._state.dbReadyPromise.then(function(){return qn(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===wr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return qn(t,e,n,r)})):U(s)}return i._promise(e,function(s,a){return _e(function(){return A.trans=i,r(s,a,i)})}).then(function(s){return i._completion.then(function(){return s})})}}var ii="3.2.3",Pe=String.fromCharCode(65535),Qn=-1/0,oe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ps="String expected.",lt=[],hn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),go=hn,wo=hn,vs=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},dn="__dbnames",En="readonly",xn="readwrite";function Me(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var ms={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bt(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=St(e),delete e[t]),e}:function(e){return e}}var bo=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||A.trans,s=this.name;function a(u,l,f){if(!f.schema[s])throw new T.NotFound("Table "+s+" not part of transaction");return n(f.idbtrans,f)}var o=$t();try{return i&&i.db===this.db?i===A.trans?i._promise(e,a,r):_e(function(){return i._promise(e,a,r)},{trans:i,transless:A.transless||A}):qn(this.db,e,[this.name],a)}finally{o&&Ct()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(z(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=L(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){return f.compound&&n.every(function(c){return f.keyPath.indexOf(c)>=0})&&f.keyPath.every(function(c){return n.indexOf(c)>=0})})[0];if(r&&this.db._maxKey!==Pe)return this.where(r.name).equals(r.keyPath.map(function(f){return e[f]}));!r&&ae&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,s=this.db._deps.indexedDB;function a(f,c){try{return s.cmp(f,c)===0}catch{return!1}}var o=n.reduce(function(f,c){var h=f[0],m=f[1],p=i[c],d=e[c];return[h||p,h||!p?Me(m,p&&p.multi?function(y){var w=fe(y,c);return z(w)&&w.some(function(_){return a(d,_)})}:function(y){return a(d,fe(y,c))}):m]},[null,null]),u=o[0],l=o[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,z(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var s in r)if(q(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){W(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,s=i.auto,a=i.keyPath,o=e;return a&&s&&(o=Bt(a)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[o]})}).then(function(u){return u.numFailures?S.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{te(e,a,u)}catch{}return u})},t.prototype.update=function(e,n){if(typeof e=="object"&&!z(e)){var r=fe(e,this.schema.primKey.keyPath);if(r===void 0)return U(new T.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?L(n).forEach(function(i){te(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,s=i.auto,a=i.keyPath,o=e;return a&&s&&(o=Bt(a)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[o],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?S.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{te(e,a,u)}catch{}return u})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?S.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:ms})}).then(function(n){return n.numFailures?S.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(s){return n.hook.reading.fire(s)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var u=i.schema.primKey,l=u.auto,f=u.keyPath;if(f&&s)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,h=f&&l?e.map(Bt(f)):e;return i.core.mutate({trans:o,type:"add",keys:s,values:h,wantResults:a}).then(function(m){var p=m.numFailures,d=m.results,y=m.lastResult,w=m.failures,_=a?d:y;if(p===0)return _;throw new ut(i.name+".bulkAdd(): "+p+" of "+c+" operations failed",w)})})},t.prototype.bulkPut=function(e,n,r){var i=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var u=i.schema.primKey,l=u.auto,f=u.keyPath;if(f&&s)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,h=f&&l?e.map(Bt(f)):e;return i.core.mutate({trans:o,type:"put",keys:s,values:h,wantResults:a}).then(function(m){var p=m.numFailures,d=m.results,y=m.lastResult,w=m.failures,_=a?d:y;if(p===0)return _;throw new ut(i.name+".bulkPut(): "+p+" of "+c+" operations failed",w)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var s=i.numFailures,a=i.lastResult,o=i.failures;if(s===0)return a;throw new ut(n.name+".bulkDelete(): "+s+" of "+r+" operations failed",o)})},t}();function Tt(t){var e={},n=function(o,u){if(u){for(var l=arguments.length,f=new Array(l-1);--l;)f[l-1]=arguments[l];return e[o].subscribe.apply(null,f),t}else if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,u,l){if(typeof o=="object")return a(o);u||(u=so),l||(l=M);var f={subscribers:[],fire:l,subscribe:function(c){f.subscribers.indexOf(c)===-1&&(f.subscribers.push(c),f.fire=u(f.fire,c))},unsubscribe:function(c){f.subscribers=f.subscribers.filter(function(h){return h!==c}),f.fire=f.subscribers.reduce(u,l)}};return e[o]=n[o]=f,f}function a(o){L(o).forEach(function(u){var l=o[u];if(z(l))s(u,o[u][0],o[u][1]);else if(l==="asap")var f=s(u,At,function(){for(var h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];f.subscribers.forEach(function(p){qi(function(){p.apply(null,m)})})});else throw new T.InvalidArgument("Invalid event config")})}}function Pt(t,e){return Xe(e).from({prototype:t}),e}function _o(t){return Pt(bo.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:Tt(null,{creating:[no,M],reading:[to,At],updating:[io,M],deleting:[ro,M]})})}function Ke(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Sn(t,e){t.filter=Me(t.filter,e)}function An(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Me(r(),e())}:e,t.justLimit=n&&!r}function Eo(t,e){t.isMatch=Me(t.isMatch,e)}function Gt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new T.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function si(t,e,n){var r=Gt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Nt(t,e,n,r){var i=t.replayFilter?Me(t.filter,t.replayFilter()):t.filter;if(t.or){var s={},a=function(o,u,l){if(!i||i(u,l,function(h){return u.stop(h)},function(h){return u.fail(h)})){var f=u.primaryKey,c=""+f;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(f)),q(s,c)||(s[c]=!0,e(o,u,l))}};return Promise.all([t.or._iterate(a,n),ai(si(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}else return ai(si(t,r,n),Me(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function ai(t,e,n,r){var i=r?function(a,o,u){return n(r(a),o,u)}:n,s=K(i);return t.then(function(a){if(a)return a.start(function(){var o=function(){return a.continue()};(!e||e(a,function(u){return o=u},function(u){a.stop(u),o=M},function(u){a.fail(u),o=M}))&&s(a.value,a,function(u){return o=u}),o()})})}function V(t,e){try{var n=oi(t),r=oi(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return So(ui(t),ui(e));case"Array":return xo(t,e)}}catch{}return NaN}function xo(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s){var a=V(t[s],e[s]);if(a!==0)return a}return n===r?0:n<r?-1:1}function So(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===r?0:n<r?-1:1}function oi(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=Ln(t);return n==="ArrayBuffer"?"binary":n}function ui(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Ao=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,U.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,U.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Me(n.algorithm,e)},t.prototype._iterate=function(e,n){return Nt(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&W(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return Nt(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,s=i.table.core;if(Ke(i,!0))return s.count({trans:r,query:{index:Gt(i,s.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var a=0;return Nt(i,function(){return++a,!1},r,s).then(function(){return a})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],s=r.length-1;function a(l,f){return f?a(l[r[f]],f-1):l[i]}var o=this._ctx.dir==="next"?1:-1;function u(l,f){var c=a(l,s),h=a(f,s);return c<h?-o:c>h?o:0}return this.toArray(function(l){return l.sort(u)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ke(i,!0)&&i.limit>0){var s=i.valueMapper,a=Gt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return s?l.map(s):l})}else{var o=[];return Nt(i,function(u){return o.push(u)},r,i.table.core).then(function(){return o})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Ke(n)?An(n,function(){var r=e;return function(i,s){return r===0?!0:r===1?(--r,!1):(s(function(){i.advance(r),r=0}),!1)}}):An(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),An(this._ctx,function(){var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this},t.prototype.until=function(e,n){return Sn(this._ctx,function(r,i,s){return e(r.value)?(i(s),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Sn(this._ctx,function(n){return e(n.value)}),Eo(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Ke(n,!0)&&n.limit>0)return this._read(function(i){var s=Gt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(i){var s=i.result;return s}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Sn(this._ctx,function(i){var s=i.primaryKey.toString(),a=q(r,s);return r[s]=!0,!a}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var s;if(typeof e=="function")s=e;else{var a=L(e),o=a.length;s=function(w){for(var _=!1,g=0;g<o;++g){var b=a[g],v=e[b];fe(w,b)!==v&&(te(w,b,v),_=!0)}return _}}var u=r.table.core,l=u.schema.primaryKey,f=l.outbound,c=l.extractKey,h=n.db._options.modifyChunkSize||200,m=[],p=0,d=[],y=function(w,_){var g=_.failures,b=_.numFailures;p+=w-b;for(var v=0,E=L(g);v<E.length;v++){var $=E[v];m.push(g[$])}};return n.clone().primaryKeys().then(function(w){var _=function(g){var b=Math.min(h,w.length-g);return u.getMany({trans:i,keys:w.slice(g,g+b),cache:"immutable"}).then(function(v){for(var E=[],$=[],x=f?[]:null,C=[],P=0;P<b;++P){var B=v[P],N={value:St(B),primKey:w[g+P]};s.call(N,N.value,N)!==!1&&(N.value==null?C.push(w[g+P]):!f&&V(c(B),c(N.value))!==0?(C.push(w[g+P]),E.push(N.value)):($.push(N.value),f&&x.push(w[g+P])))}var D=Ke(r)&&r.limit===1/0&&(typeof e!="function"||e===$n)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&u.mutate({trans:i,type:"add",values:E}).then(function(F){for(var R in F.failures)C.splice(parseInt(R),1);y(E.length,F)})).then(function(){return($.length>0||D&&typeof e=="object")&&u.mutate({trans:i,type:"put",keys:x,values:$,criteria:D,changeSpec:typeof e!="function"&&e}).then(function(F){return y($.length,F)})}).then(function(){return(C.length>0||D&&e===$n)&&u.mutate({trans:i,type:"delete",keys:C,criteria:D}).then(function(F){return y(C.length,F)})}).then(function(){return w.length>g+b&&_(g+h)})})};return _(0).then(function(){if(m.length>0)throw new Xt("Error modifying one or more objects",m,p,d);return w.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Ke(e)&&(e.isPrimKey&&!wo||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(function(a){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(o){var u=o.failures;o.lastResult,o.results;var l=o.numFailures;if(l)throw new Xt("Could not delete some values",Object.keys(u).map(function(f){return u[f]}),a-l);return a-l})})}):this.modify($n)},t}(),$n=function(t,e){return e.value=null};function $o(t){return Pt(Ao.prototype,function(n,r){this.db=t;var i=ms,s=null;if(r)try{i=r()}catch(l){s=l}var a=n._ctx,o=a.table,u=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:a.or,valueMapper:u!==At?u:null}})}function Co(t,e){return t<e?-1:t===e?0:1}function To(t,e){return t>e?-1:t===e?0:1}function J(t,e,n){var r=t instanceof gs?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Le(t){return new t.Collection(t,function(){return ys("")}).limit(0)}function Po(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Ro(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ko(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),o=-1,u=0;u<a;++u){var l=e[u];if(l!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;i(t[u],l)<0&&(o=u)}return a<r.length&&s==="next"?t+n.substr(t.length):a<t.length&&s==="prev"?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function Mt(t,e,n,r){var i,s,a,o,u,l,f,c=n.length;if(!n.every(function(d){return typeof d=="string"}))return J(t,ps);function h(d){i=Po(d),s=Ro(d),a=d==="next"?Co:To;var y=n.map(function(w){return{lower:s(w),upper:i(w)}}).sort(function(w,_){return a(w.lower,_.lower)});o=y.map(function(w){return w.upper}),u=y.map(function(w){return w.lower}),l=d,f=d==="next"?"":r}h("next");var m=new t.Collection(t,function(){return me(o[0],u[c-1]+r)});m._ondirectionchange=function(d){h(d)};var p=0;return m._addAlgorithm(function(d,y,w){var _=d.key;if(typeof _!="string")return!1;var g=s(_);if(e(g,u,p))return!0;for(var b=null,v=p;v<c;++v){var E=ko(_,g,o[v],u[v],a,l);E===null&&b===null?p=v+1:(b===null||a(b,E)>0)&&(b=E)}return y(b!==null?function(){d.continue(b+f)}:w),!1}),m}function me(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function ys(t){return{type:1,lower:t,upper:t}}var gs=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Le(this):new this.Collection(this,function(){return me(e,n,!r,!i)})}catch{return J(this,oe)}},t.prototype.equals=function(e){return e==null?J(this,oe):new this.Collection(this,function(){return ys(e)})},t.prototype.above=function(e){return e==null?J(this,oe):new this.Collection(this,function(){return me(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?J(this,oe):new this.Collection(this,function(){return me(e,void 0,!1)})},t.prototype.below=function(e){return e==null?J(this,oe):new this.Collection(this,function(){return me(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?J(this,oe):new this.Collection(this,function(){return me(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?J(this,ps):this.between(e,e+Pe,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Mt(this,function(n,r){return n.indexOf(r[0])===0},[e],Pe)},t.prototype.equalsIgnoreCase=function(e){return Mt(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=le.apply(Fe,arguments);return e.length===0?Le(this):Mt(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=le.apply(Fe,arguments);return e.length===0?Le(this):Mt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Pe)},t.prototype.anyOf=function(){var e=this,n=le.apply(Fe,arguments),r=this._cmp;try{n.sort(r)}catch{return J(this,oe)}if(n.length===0)return Le(this);var i=new this.Collection(this,function(){return me(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?e._ascending:e._descending,n.sort(r)};var s=0;return i._addAlgorithm(function(a,o,u){for(var l=a.key;r(l,n[s])>0;)if(++s,s===n.length)return o(u),!1;return r(l,n[s])===0?!0:(o(function(){a.continue(n[s])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[Qn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=le.apply(Fe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return J(this,oe)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Qn,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,s=this._ascending,a=this._descending,o=this._min,u=this._max;if(e.length===0)return Le(this);if(!e.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&s(v[0],v[1])<=0}))return J(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var l=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function c(v,E){for(var $=0,x=v.length;$<x;++$){var C=v[$];if(i(E[0],C[1])<0&&i(E[1],C[0])>0){C[0]=o(C[0],E[0]),C[1]=u(C[1],E[1]);break}}return $===x&&v.push(E),v}var h=s;function m(v,E){return h(v[0],E[0])}var p;try{p=e.reduce(c,[]),p.sort(m)}catch{return J(this,oe)}var d=0,y=f?function(v){return s(v,p[d][1])>0}:function(v){return s(v,p[d][1])>=0},w=l?function(v){return a(v,p[d][0])>0}:function(v){return a(v,p[d][0])>=0};function _(v){return!y(v)&&!w(v)}var g=y,b=new this.Collection(this,function(){return me(p[0][0],p[p.length-1][1],!l,!f)});return b._ondirectionchange=function(v){v==="next"?(g=y,h=s):(g=w,h=a),p.sort(m)},b._addAlgorithm(function(v,E,$){for(var x=v.key;g(x);)if(++d,d===p.length)return E($),!1;return _(x)?!0:(r._cmp(x,p[d][1])===0||r._cmp(x,p[d][0])===0||E(function(){h===s?v.continue(p[d][0]):v.continue(p[d][1])}),!1)}),b},t.prototype.startsWithAnyOf=function(){var e=le.apply(Fe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Le(this):this.inAnyRange(e.map(function(n){return[n,n+Pe]})):J(this,"startsWithAnyOf() only works with strings")},t}();function Do(t){return Pt(gs.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var s=t._deps.indexedDB;if(!s)throw new T.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=function(a,o){return s.cmp(o,a)},this._max=function(a,o){return s.cmp(a,o)>0?a:o},this._min=function(a,o){return s.cmp(a,o)<0?a:o},this._IDBKeyRange=t._deps.IDBKeyRange})}function ie(t){return K(function(e){return wt(e),t(e.target.error),!1})}function wt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var bt="storagemutated",we="x-storagemutated-1",xe=Tt(null,bt),Oo=function(){function t(){}return t.prototype._lock=function(){return it(!A.global),++this._reculock,this._reculock===1&&!A.global&&(A.lockOwnerFor=this),this},t.prototype._unlock=function(){if(it(!A.global),--this._reculock===0)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{tt(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&A.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(it(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new T.DatabaseClosed(i);case"MissingAPIError":throw new T.MissingAPI(i.message,i);default:throw new T.OpenFailed(i)}if(!this.active)throw new T.TransactionInactive;return it(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=K(function(s){wt(s),n._reject(e.error)}),e.onabort=K(function(s){wt(s),n.active&&n._reject(new T.Abort(e.error)),n.active=!1,n.on("abort").fire(s)}),e.oncomplete=K(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&xe.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return U(new T.ReadOnly("Transaction is readonly"));if(!this.active)return U(new T.TransactionInactive);if(this._locked())return new S(function(a,o){i._blockedFuncs.push([function(){i._promise(e,n,r).then(a,o)},A])});if(r)return _e(function(){var a=new S(function(o,u){i._lock();var l=n(o,u,i);l&&l.then&&l.then(o,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var s=new S(function(a,o){var u=n(a,o,i);u&&u.then&&u.then(a,o)});return s._lib=!0,s},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=S.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new S(function(a,o){r.then(function(u){return n._waitingQueue.push(K(a.bind(null,u)))},function(u){return n._waitingQueue.push(K(o.bind(null,u)))}).finally(function(){n._waitingFor===s&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(q(n,e))return n[e];var r=this.schema[e];if(!r)throw new T.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function Bo(t){return Pt(Oo.prototype,function(n,r,i,s,a){var o=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new S(function(u,l){o._resolve=u,o._reject=l}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(u){var l=o.active;return o.active=!1,o.on.error.fire(u),o.parent?o.parent._reject(u):l&&o.idbtrans&&o.idbtrans.abort(),U(u)})})}function Xn(t,e,n,r,i,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+ws(e)}}function ws(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function bs(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Qi(n,function(r){return[r.name,r]})}}function No(t){return t.length===1?t[0]:t}var _t=function(t){try{return t.only([[]]),_t=function(){return[[]]},[[]]}catch{return _t=function(){return Pe},Pe}};function Zn(t){return t==null?function(){}:typeof t=="string"?Mo(t):function(e){return fe(e,t)}}function Mo(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return fe(n,t)}}function li(t){return[].slice.call(t)}var Io=0;function ct(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function Ko(t,e,n){function r(c,h){var m=li(c.objectStoreNames);return{schema:{name:c.name,tables:m.map(function(p){return h.objectStore(p)}).map(function(p){var d=p.keyPath,y=p.autoIncrement,w=z(d),_=d==null,g={},b={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:w,keyPath:d,autoIncrement:y,unique:!0,extractKey:Zn(d)},indexes:li(p.indexNames).map(function(v){return p.index(v)}).map(function(v){var E=v.name,$=v.unique,x=v.multiEntry,C=v.keyPath,P=z(C),B={name:E,compound:P,keyPath:C,unique:$,multiEntry:x,extractKey:Zn(C)};return g[ct(C)]=B,B}),getIndexByKeyPath:function(v){return g[ct(v)]}};return g[":id"]=b.primaryKey,d!=null&&(g[ct(d)]=b.primaryKey),b})},hasGetAll:m.length>0&&"getAll"in h.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=c.lower,m=c.upper,p=c.lowerOpen,d=c.upperOpen,y=h===void 0?m===void 0?null:e.upperBound(m,!!d):m===void 0?e.lowerBound(h,!!p):e.bound(h,m,!!p,!!d);return y}function s(c){var h=c.name;function m(y){var w=y.trans,_=y.type,g=y.keys,b=y.values,v=y.range;return new Promise(function(E,$){E=K(E);var x=w.objectStore(h),C=x.keyPath==null,P=_==="put"||_==="add";if(!P&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var B=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var N,D=[],F=[],R=0,Q=function(re){++R,wt(re)};if(_==="deleteRange"){if(v.type===4)return E({numFailures:R,failures:F,results:[],lastResult:void 0});v.type===3?D.push(N=x.clear()):D.push(N=x.delete(i(v)))}else{var Z=P?C?[b,g]:[b,null]:[g,null],pe=Z[0],ne=Z[1];if(P)for(var X=0;X<B;++X)D.push(N=ne&&ne[X]!==void 0?x[_](pe[X],ne[X]):x[_](pe[X])),N.onerror=Q;else for(var X=0;X<B;++X)D.push(N=x[_](pe[X])),N.onerror=Q}var ve=function(re){var nt=re.target.result;D.forEach(function(ee,kt){return ee.error!=null&&(F[kt]=ee.error)}),E({numFailures:R,failures:F,results:_==="delete"?g:D.map(function(ee){return ee.result}),lastResult:nt})};N.onerror=function(re){Q(re),ve(re)},N.onsuccess=ve})}function p(y){var w=y.trans,_=y.values,g=y.query,b=y.reverse,v=y.unique;return new Promise(function(E,$){E=K(E);var x=g.index,C=g.range,P=w.objectStore(h),B=x.isPrimaryKey?P:P.index(x.name),N=b?v?"prevunique":"prev":v?"nextunique":"next",D=_||!("openKeyCursor"in B)?B.openCursor(i(C),N):B.openKeyCursor(i(C),N);D.onerror=ie($),D.onsuccess=K(function(F){var R=D.result;if(!R){E(null);return}R.___id=++Io,R.done=!1;var Q=R.continue.bind(R),Z=R.continuePrimaryKey;Z&&(Z=Z.bind(R));var pe=R.advance.bind(R),ne=function(){throw new Error("Cursor not started")},X=function(){throw new Error("Cursor not stopped")};R.trans=w,R.stop=R.continue=R.continuePrimaryKey=R.advance=ne,R.fail=K($),R.next=function(){var ve=this,re=1;return this.start(function(){return re--?ve.continue():ve.stop()}).then(function(){return ve})},R.start=function(ve){var re=new Promise(function(ee,kt){ee=K(ee),D.onerror=ie(kt),R.fail=kt,R.stop=function(Ts){R.stop=R.continue=R.continuePrimaryKey=R.advance=X,ee(Ts)}}),nt=function(){if(D.result)try{ve()}catch(ee){R.fail(ee)}else R.done=!0,R.start=function(){throw new Error("Cursor behind last entry")},R.stop()};return D.onsuccess=K(function(ee){D.onsuccess=nt,nt()}),R.continue=Q,R.continuePrimaryKey=Z,R.advance=pe,nt(),re},E(R)},$)})}function d(y){return function(w){return new Promise(function(_,g){_=K(_);var b=w.trans,v=w.values,E=w.limit,$=w.query,x=E===1/0?void 0:E,C=$.index,P=$.range,B=b.objectStore(h),N=C.isPrimaryKey?B:B.index(C.name),D=i(P);if(E===0)return _({result:[]});if(y){var F=v?N.getAll(D,x):N.getAllKeys(D,x);F.onsuccess=function(pe){return _({result:pe.target.result})},F.onerror=ie(g)}else{var R=0,Q=v||!("openKeyCursor"in N)?N.openCursor(D):N.openKeyCursor(D),Z=[];Q.onsuccess=function(pe){var ne=Q.result;if(!ne)return _({result:Z});if(Z.push(v?ne.value:ne.primaryKey),++R===E)return _({result:Z});ne.continue()},Q.onerror=ie(g)}})}}return{name:h,schema:c,mutate:m,getMany:function(y){var w=y.trans,_=y.keys;return new Promise(function(g,b){g=K(g);for(var v=w.objectStore(h),E=_.length,$=new Array(E),x=0,C=0,P,B=function(R){var Q=R.target;($[Q._pos]=Q.result)!=null,++C===x&&g($)},N=ie(b),D=0;D<E;++D){var F=_[D];F!=null&&(P=v.get(_[D]),P._pos=D,P.onsuccess=B,P.onerror=N,++x)}x===0&&g($)})},get:function(y){var w=y.trans,_=y.key;return new Promise(function(g,b){g=K(g);var v=w.objectStore(h),E=v.get(_);E.onsuccess=function($){return g($.target.result)},E.onerror=ie(b)})},query:d(u),openCursor:p,count:function(y){var w=y.query,_=y.trans,g=w.index,b=w.range;return new Promise(function(v,E){var $=_.objectStore(h),x=g.isPrimaryKey?$:$.index(g.name),C=i(b),P=C?x.count(C):x.count();P.onsuccess=K(function(B){return v(B.target.result)}),P.onerror=ie(E)})}}}var a=r(t,n),o=a.schema,u=a.hasGetAll,l=o.tables.map(function(c){return s(c)}),f={};return l.forEach(function(c){return f[c.name]=c}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(c){var h=f[c];if(!h)throw new Error("Table '"+c+"' not found");return f[c]},MIN_KEY:-1/0,MAX_KEY:_t(e),schema:o}}function Lo(t,e){return e.reduce(function(n,r){var i=r.create;return k(k({},n),i(n))},t)}function Uo(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var s=Lo(Ko(e,i,r),t.dbcore);return{dbcore:s}}function Ar(t,e){var n=t._novip,r=e.db,i=Uo(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(s){var a=s.name;n.core.schema.tables.some(function(o){return o.name===a})&&(s.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=s.core))})}function sn(t,e,n,r){var i=t._novip;n.forEach(function(s){var a=r[s];e.forEach(function(o){var u=mr(o,s);(!u||"value"in u&&u.value===void 0)&&(o===i.Transaction.prototype||o instanceof i.Transaction?he(o,s,{get:function(){return this.table(s)},set:function(l){Ji(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new i.Table(s,a))})})}function er(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Ho(t,e){return t._cfg.version-e._cfg.version}function Fo(t,e,n,r){var i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);var a=s._reject.bind(s),o=A.transless||A;_e(function(){A.trans=s,A.transless=o,e===0?(L(i).forEach(function(u){$r(n,u,i[u].primKey,i[u].indexes)}),Ar(t,n),S.follow(function(){return t.on.populate.fire(s)}).catch(a)):jo(t,e,s,n).catch(a)})}function jo(t,e,n,r){var i=t._novip,s=[],a=i._versions,o=i._dbSchema=Cr(i,i.idbdb,r),u=!1,l=a.filter(function(c){return c._cfg.version>=e});l.forEach(function(c){s.push(function(){var h=o,m=c._cfg.dbschema;nr(i,h,r),nr(i,m,r),o=i._dbSchema=m;var p=_s(h,m);p.add.forEach(function(b){$r(r,b[0],b[1].primKey,b[1].indexes)}),p.change.forEach(function(b){if(b.recreate)throw new T.Upgrade("Not yet support for changing primary key");var v=r.objectStore(b.name);b.add.forEach(function(E){return tr(v,E)}),b.change.forEach(function(E){v.deleteIndex(E.name),tr(v,E)}),b.del.forEach(function(E){return v.deleteIndex(E)})});var d=c._cfg.contentUpgrade;if(d&&c._cfg.version>e){Ar(i,r),n._memoizedTables={},u=!0;var y=Xi(m);p.del.forEach(function(b){y[b]=h[b]}),er(i,[i.Transaction.prototype]),sn(i,[i.Transaction.prototype],L(y),y),n.schema=y;var w=yr(d);w&&et();var _,g=S.follow(function(){if(_=d(n),_&&w){var b=de.bind(null,null);_.then(b,b)}});return _&&typeof _.then=="function"?S.resolve(_):g.then(function(){return _})}}),s.push(function(h){if(!u||!go){var m=c._cfg.dbschema;Vo(m,h)}er(i,[i.Transaction.prototype]),sn(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function f(){return s.length?S.resolve(s.shift()(n.idbtrans)).then(f):S.resolve()}return f().then(function(){zo(o,r)})}function _s(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],s=e[r];if(!i)n.add.push([r,s]);else{var a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!hn)a.recreate=!0,n.change.push(a);else{var o=i.idxByName,u=s.idxByName,l=void 0;for(l in o)u[l]||a.del.push(l);for(l in u){var f=o[l],c=u[l];f?f.src!==c.src&&a.change.push(c):a.add.push(c)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function $r(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(s){return tr(i,s)}),i}function zo(t,e){L(t).forEach(function(n){e.db.objectStoreNames.contains(n)||$r(e,n,t[n].primKey,t[n].indexes)})}function Vo(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function tr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Cr(t,e,n){var r={},i=cn(e.objectStoreNames,0);return i.forEach(function(s){for(var a=n.objectStore(s),o=a.keyPath,u=Xn(ws(o),o||"",!1,!1,!!a.autoIncrement,o&&typeof o!="string",!0),l=[],f=0;f<a.indexNames.length;++f){var c=a.index(a.indexNames[f]);o=c.keyPath;var h=Xn(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(h)}r[s]=bs(s,u,l)}),r}function Wo(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=Cr(r,e,n);r._storeNames=cn(e.objectStoreNames,0),sn(r,[r._allTables],L(i),i)}function Go(t,e){var n=Cr(t,t.idbdb,e),r=_s(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function nr(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,s=0;s<i.length;++s){var a=i[s],o=n.objectStore(a);r._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var l=o.indexNames[u],f=o.index(l).keyPath,c=typeof f=="string"?f:"["+cn(f).join("+")+"]";if(e[a]){var h=e[a].idxByName[c];h&&(h.name=l,delete e[a].idxByName[c],e[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&I.WorkerGlobalScope&&I instanceof I.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Jo(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Xn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),z(i),n===0)})}var Yo=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){L(e).forEach(function(r){if(e[r]!==null){var i=Jo(e[r]),s=i.shift();if(s.multi)throw new T.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),n[r]=bs(r,s,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?W(this._cfg.storesSource,e):e;var r=n._versions,i={},s={};return r.forEach(function(a){W(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,er(n,[n._allTables,n,n.Transaction.prototype]),sn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],L(s),s),n._storeNames=L(s),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=br(this._cfg.contentUpgrade||M,e),this},t}();function qo(t){return Pt(Yo.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Tr(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Dr(dn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Pr(t){return t&&typeof t.databases=="function"}function Qo(t){var e=t.indexedDB,n=t.IDBKeyRange;return Pr(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==dn})}):Tr(e,n).toCollection().primaryKeys()}function Xo(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Pr(n)&&e!==dn&&Tr(n,r).put({name:e}).catch(M)}function Zo(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Pr(n)&&e!==dn&&Tr(n,r).delete(e).catch(M)}function rr(t){return _e(function(){return A.letThrough=!0,t()})}function eu(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function tu(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?U(e.dbOpenError):t});ae&&(e.openCanceller._stackHolder=Ie()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}var s=e.dbReadyResolve,a=null,o=!1;return S.race([r,(typeof navigator>"u"?S.resolve():eu()).then(function(){return new S(function(u,l){if(i(),!n)throw new T.MissingAPI;var f=t.name,c=e.autoSchema?n.open(f):n.open(f,Math.round(t.verno*10));if(!c)throw new T.MissingAPI;c.onerror=ie(l),c.onblocked=K(t._fireOnBlocked),c.onupgradeneeded=K(function(h){if(a=c.transaction,e.autoSchema&&!t._options.allowEmptyDB){c.onerror=wt,a.abort(),c.result.close();var m=n.deleteDatabase(f);m.onsuccess=m.onerror=K(function(){l(new T.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{a.onerror=ie(l);var p=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;o=p<1,t._novip.idbdb=c.result,Fo(t,p/10,a,l)}},l),c.onsuccess=K(function(){a=null;var h=t._novip.idbdb=c.result,m=cn(h.objectStoreNames);if(m.length>0)try{var p=h.transaction(No(m),"readonly");e.autoSchema?Wo(t,h,p):(nr(t,t._dbSchema,p),Go(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ar(t,p)}catch{}lt.push(t),h.onversionchange=K(function(d){e.vcFired=!0,t.on("versionchange").fire(d)}),h.onclose=K(function(d){t.on("close").fire(d)}),o&&Xo(t._deps,f),u()},l)})})]).then(function(){return i(),e.onReadyBeingFired=[],S.resolve(rr(function(){return t.on.ready.fire(t.vip)})).then(function u(){if(e.onReadyBeingFired.length>0){var l=e.onReadyBeingFired.reduce(br,M);return e.onReadyBeingFired=[],S.resolve(rr(function(){return l(t.vip)})).then(u)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(u){e.dbOpenError=u;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),U(u)}).finally(function(){e.openComplete=!0,s()})}function ir(t){var e=function(a){return t.next(a)},n=function(a){return t.throw(a)},r=s(e),i=s(n);function s(a){return function(o){var u=a(o),l=u.value;return u.done?l:!l||typeof l.then!="function"?z(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return s(e)()}function nu(t,e,n){var r=arguments.length;if(r<2)throw new T.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=Zi(i);return[t,s,n]}function Es(t,e,n,r,i){return S.resolve().then(function(){var s=A.transless||A,a=t._createTransaction(e,n,t._dbSchema,r),o={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===wr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Es(t,e,n,null,i)})):U(c)}var u=yr(i);u&&et();var l,f=S.follow(function(){if(l=i.call(a,a),l)if(u){var c=de.bind(null,null);l.then(c,c)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=ir(l))},o);return(l&&typeof l.then=="function"?S.resolve(l).then(function(c){return a.active?c:U(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return l})).then(function(c){return r&&a._resolve(),a._completion.then(function(){return c})}).catch(function(c){return a._reject(c),U(c)})})}function It(t,e,n){for(var r=z(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function ru(t){return k(k({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},s=[];function a(d,y,w){var _=ct(d),g=i[_]=i[_]||[],b=d==null?0:typeof d=="string"?1:d.length,v=y>0,E=k(k({},w),{isVirtual:v,keyTail:y,keyLength:b,extractKey:Zn(d),unique:!v&&w.unique});if(g.push(E),E.isPrimaryKey||s.push(E),b>1){var $=b===2?d[0]:d.slice(0,b-1);a($,y+1,w)}return g.sort(function(x,C){return x.keyTail-C.keyTail}),E}var o=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var u=0,l=r.indexes;u<l.length;u++){var f=l[u];a(f.keyPath,0,f)}function c(d){var y=i[ct(d)];return y&&y[0]}function h(d,y){return{type:d.type===1?2:d.type,lower:It(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,y),lowerOpen:!0,upper:It(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,y),upperOpen:!0}}function m(d){var y=d.query.index;return y.isVirtual?k(k({},d),{query:{index:y,range:h(d.query.range,y.keyTail)}}):d}var p=k(k({},n),{schema:k(k({},r),{primaryKey:o,indexes:s,getIndexByKeyPath:c}),count:function(d){return n.count(m(d))},query:function(d){return n.query(m(d))},openCursor:function(d){var y=d.query.index,w=y.keyTail,_=y.isVirtual,g=y.keyLength;if(!_)return n.openCursor(d);function b(v){function E(x){x!=null?v.continue(It(x,d.reverse?t.MAX_KEY:t.MIN_KEY,w)):d.unique?v.continue(v.key.slice(0,g).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,w)):v.continue()}var $=Object.create(v,{continue:{value:E},continuePrimaryKey:{value:function(x,C){v.continuePrimaryKey(It(x,t.MAX_KEY,w),C)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var x=v.key;return g===1?x[0]:x.slice(0,g)}},value:{get:function(){return v.value}}});return $}return n.openCursor(m(d)).then(function(v){return v&&b(v)})}});return p}})}var iu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ru};function Rr(t,e,n,r){return n=n||{},r=r||"",L(t).forEach(function(i){if(!q(e,i))n[r+i]=void 0;else{var s=t[i],a=e[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){var o=Ln(s),u=Ln(a);o!==u?n[r+i]=e[i]:o==="Object"?Rr(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else s!==a&&(n[r+i]=e[i])}}),L(e).forEach(function(i){q(t,i)||(n[r+i]=e[i])}),n}function su(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var au={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return k(k({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=k(k({},n),{mutate:function(s){var a=A.trans,o=a.table(e).hook,u=o.deleting,l=o.creating,f=o.updating;switch(s.type){case"add":if(l.fire===M)break;return a._promise("readwrite",function(){return c(s)},!0);case"put":if(l.fire===M&&f.fire===M)break;return a._promise("readwrite",function(){return c(s)},!0);case"delete":if(u.fire===M)break;return a._promise("readwrite",function(){return c(s)},!0);case"deleteRange":if(u.fire===M)break;return a._promise("readwrite",function(){return h(s)},!0)}return n.mutate(s);function c(p){var d=A.trans,y=p.keys||su(r,p);if(!y)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?k(k({},p),{keys:y}):k({},p),p.type!=="delete"&&(p.values=In([],p.values,!0)),p.keys&&(p.keys=In([],p.keys,!0)),ou(n,p,y).then(function(w){var _=y.map(function(g,b){var v=w[b],E={onerror:null,onsuccess:null};if(p.type==="delete")u.fire.call(E,g,v,d);else if(p.type==="add"||v===void 0){var $=l.fire.call(E,g,p.values[b],d);g==null&&$!=null&&(g=$,p.keys[b]=g,r.outbound||te(p.values[b],r.keyPath,g))}else{var x=Rr(v,p.values[b]),C=f.fire.call(E,x,g,v,d);if(C){var P=p.values[b];Object.keys(C).forEach(function(B){q(P,B)?P[B]=C[B]:te(P,B,C[B])})}}return E});return n.mutate(p).then(function(g){for(var b=g.failures,v=g.results,E=g.numFailures,$=g.lastResult,x=0;x<y.length;++x){var C=v?v[x]:y[x],P=_[x];C==null?P.onerror&&P.onerror(b[x]):P.onsuccess&&P.onsuccess(p.type==="put"&&w[x]?p.values[x]:C)}return{failures:b,results:v,numFailures:E,lastResult:$}}).catch(function(g){return _.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function h(p){return m(p.trans,p.range,1e4)}function m(p,d,y){return n.query({trans:p,values:!1,query:{index:r,range:d},limit:y}).then(function(w){var _=w.result;return c({type:"delete",keys:_,trans:p}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):_.length<y?{failures:[],numFailures:0,lastResult:void 0}:m(p,k(k({},d),{lower:_[_.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function ou(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function xs(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,s=0;i<e.keys.length&&s<t.length;++i)V(e.keys[i],t[s])===0&&(r.push(n?St(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}var uu={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return k(k({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=xs(r.keys,r.trans._cache,r.cache==="clone");return i?S.resolve(i):n.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?St(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Cn;function kr(t){return!("from"in t)}var ue=function(t,e){if(this)W(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new ue;return t&&"d"in t&&W(n,t),n}};Qe(ue.prototype,(Cn={add:function(t){return an(this,t),this},addKey:function(t){return Et(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return Et(e,n,n)}),this}},Cn[Un]=function(){return sr(this)},Cn));function Et(t,e,n){var r=V(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(kr(t))return W(t,{from:e,to:n,d:1});var i=t.l,s=t.r;if(V(n,t.from)<0)return i?Et(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},ci(t);if(V(e,t.to)>0)return s?Et(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},ci(t);V(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),V(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var a=!t.r;i&&!t.l&&an(t,i),s&&a&&an(t,s)}}function an(t,e){function n(r,i){var s=i.from,a=i.to,o=i.l,u=i.r;Et(r,s,a),o&&n(r,o),u&&n(r,u)}kr(e)||n(t,e)}function lu(t,e){var n=sr(e),r=n.next();if(r.done)return!1;for(var i=r.value,s=sr(t),a=s.next(i.from),o=a.value;!r.done&&!a.done;){if(V(o.from,i.to)<=0&&V(o.to,i.from)>=0)return!0;V(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function sr(t){var e=kr(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&V(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||V(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function ci(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var s=i==="r"?"l":"r",a=k({},t),o=t[i];t.from=o.from,t.to=o.to,t[i]=o[i],a[i]=o[s],t[s]=a,a.d=fi(a)}t.d=fi(t)}function fi(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var cu={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new ue(t.MIN_KEY,t.MAX_KEY);return k(k({},t),{table:function(r){var i=t.table(r),s=i.schema,a=s.primaryKey,o=a.extractKey,u=a.outbound,l=k(k({},i),{mutate:function(h){var m=h.trans,p=m.mutatedParts||(m.mutatedParts={}),d=function($){var x="idb://"+e+"/"+r+"/"+$;return p[x]||(p[x]=new ue)},y=d(""),w=d(":dels"),_=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],b=g[0],v=g[1],E=h.trans._cache;return i.mutate(h).then(function($){if(z(b)){_!=="delete"&&(b=$.results),y.addKeys(b);var x=xs(b,E);!x&&_!=="add"&&w.addKeys(b),(x||v)&&fu(d,s,x,v)}else if(b){var C={from:b.lower,to:b.upper};w.add(C),y.add(C)}else y.add(n),w.add(n),s.indexes.forEach(function(P){return d(P.name).add(n)});return $})}}),f=function(h){var m,p,d=h.query,y=d.index,w=d.range;return[y,new ue((m=w.lower)!==null&&m!==void 0?m:t.MIN_KEY,(p=w.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},c={get:function(h){return[a,new ue(h.key)]},getMany:function(h){return[a,new ue().addKeys(h.keys)]},count:f,query:f,openCursor:f};return L(c).forEach(function(h){l[h]=function(m){var p=A.subscr;if(p){var d=function(E){var $="idb://"+e+"/"+r+"/"+E;return p[$]||(p[$]=new ue)},y=d(""),w=d(":dels"),_=c[h](m),g=_[0],b=_[1];if(d(g.name||"").add(b),!g.isPrimaryKey)if(h==="count")w.add(n);else{var v=h==="query"&&u&&m.values&&i.query(k(k({},m),{values:!1}));return i[h].apply(this,arguments).then(function(E){if(h==="query"){if(u&&m.values)return v.then(function(P){var B=P.result;return y.addKeys(B),E});var $=m.values?E.result.map(o):E.result;m.values?y.addKeys($):w.addKeys($)}else if(h==="openCursor"){var x=E,C=m.values;return x&&Object.create(x,{key:{get:function(){return w.addKey(x.primaryKey),x.key}},primaryKey:{get:function(){var P=x.primaryKey;return w.addKey(P),P}},value:{get:function(){return C&&y.addKey(x.primaryKey),x.value}}})}return E})}}return i[h].apply(this,arguments)}}),l}})}};function fu(t,e,n,r){function i(s){var a=t(s.name||"");function o(l){return l!=null?s.extractKey(l):null}var u=function(l){return s.multiEntry&&z(l)?l.forEach(function(f){return a.addKey(f)}):a.addKey(l)};(n||r).forEach(function(l,f){var c=n&&o(n[f]),h=r&&o(r[f]);V(c,h)!==0&&(c!=null&&u(c),h!=null&&u(h))})}e.indexes.forEach(i)}var Dr=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=k({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var s=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new S(function(o){a.dbReadyResolve=o}),a.openCanceller=new S(function(o,u){a.cancelOpen=u}),this._state=a,this.name=e,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[br,M]}),this.on.ready.subscribe=Yi(this.on.ready.subscribe,function(o){return function(u,l){t.vip(function(){var f=r._state;if(f.openComplete)f.dbOpenError||S.resolve().then(u),l&&o(u);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(u),l&&o(u);else{o(u);var c=r;l||o(function h(){c.on.ready.unsubscribe(u),c.on.ready.unsubscribe(h)})}})}}),this.Collection=$o(this),this.Table=_o(this),this.Transaction=Bo(this),this.Version=qo(this),this.WhereClause=Do(this),this.on("versionchange",function(o){o.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(o){!o.newVersion||o.newVersion<o.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+o.oldVersion/10)}),this._maxKey=_t(n.IDBKeyRange),this._createTransaction=function(o,u,l,f){return new r.Transaction(o,u,l,r._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(o){r.on("blocked").fire(o),lt.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(o)})},this.use(iu),this.use(au),this.use(cu),this.use(uu),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(function(o){return o(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new T.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(Ho),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?e():new S(function(r,i){if(n._state.openComplete)return i(new T.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new T.DatabaseClosed);return}n.open().catch(M)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,s=e.name;s&&this.unuse({stack:n,name:s});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:s}),a.sort(function(o,u){return o.level-u.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return i?s.create!==i:r?s.name!==r:!1})),this},t.prototype.open=function(){return tu(this)},t.prototype._close=function(){var e=this._state,n=lt.indexOf(this);if(n>=0&&lt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new S(function(r){e.dbReadyResolve=r}),e.openCanceller=new S(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new T.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new S(function(i,s){var a=function(){e.close();var o=e._deps.indexedDB.deleteDatabase(e.name);o.onsuccess=K(function(){Zo(e._deps,e.name),i()}),o.onerror=ie(s),o.onblocked=e._fireOnBlocked};if(n)throw new T.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return L(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=nu.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,s=A.trans;(!s||s.db!==this||e.indexOf("!")!==-1)&&(s=null);var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var o,u;try{if(u=n.map(function(f){var c=f instanceof i.Table?f.name:f;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===En)o=En;else if(e=="rw"||e==xn)o=xn;else throw new T.InvalidArgument("Invalid transaction mode: "+e);if(s){if(s.mode===En&&o===xn)if(a)s=null;else throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&u.forEach(function(f){if(s&&s.storeNames.indexOf(f)===-1)if(a)s=null;else throw new T.SubTransaction("Table "+f+" not included in parent transaction.")}),a&&s&&!s.active&&(s=null)}}catch(f){return s?s._promise(null,function(c,h){h(f)}):U(f)}var l=Es.bind(null,this,o,u,s,r);return s?s._promise(o,l,"lock"):A.trans?tt(A.transless,function(){return i._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(e){if(!q(this._allTables,e))throw new T.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),hu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",du=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[hu]=function(){return this},t}();function Ss(t,e){return L(e).forEach(function(n){var r=t[n]||(t[n]=new ue);an(r,e[n])}),t}function pu(t){return new du(function(e){var n=yr(t);function r(m){n&&et();var p=function(){return _e(t,{subscr:m,trans:null})},d=A.trans?tt(A.transless,p):p();return n&&d.then(de,de),d}var i=!1,s={},a={},o={get closed(){return i},unsubscribe:function(){i=!0,xe.storagemutated.unsubscribe(c)}};e.start&&e.start(o);var u=!1,l=!1;function f(){return L(a).some(function(m){return s[m]&&lu(s[m],a[m])})}var c=function(m){Ss(s,m),f()&&h()},h=function(){if(!(u||i)){s={};var m={},p=r(m);l||(xe(bt,c),l=!0),u=!0,Promise.resolve(p).then(function(d){u=!1,!i&&(f()?h():(s={},a=m,e.next&&e.next(d)))},function(d){u=!1,e.error&&e.error(d),o.unsubscribe()})}};return h(),o})}var ar;try{ar={indexedDB:I.indexedDB||I.mozIndexedDB||I.webkitIndexedDB||I.msIndexedDB,IDBKeyRange:I.IDBKeyRange||I.webkitIDBKeyRange}}catch{ar={indexedDB:null,IDBKeyRange:null}}var $e=Dr;Qe($e,k(k({},fn),{delete:function(t){var e=new $e(t,{addons:[]});return e.delete()},exists:function(t){return new $e(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Qo($e.dependencies).then(t)}catch{return U(new T.MissingAPI)}},defineClass:function(){function t(e){W(this,e)}return t},ignoreTransaction:function(t){return A.trans?tt(A.transless,t):t()},vip:rr,async:function(t){return function(){try{var e=ir(t.apply(this,arguments));return!e||typeof e.then!="function"?S.resolve(e):e}catch(n){return U(n)}}},spawn:function(t,e,n){try{var r=ir(t.apply(n,e||[]));return!r||typeof r.then!="function"?S.resolve(r):r}catch(i){return U(i)}},currentTransaction:{get:function(){return A.trans||null}},waitFor:function(t,e){var n=S.resolve(typeof t=="function"?$e.ignoreTransaction(t):t).timeout(e||6e4);return A.trans?A.trans.waitFor(n):n},Promise:S,debug:{get:function(){return ae},set:function(t){ts(t,t==="dexie"?function(){return!0}:vs)}},derive:Xe,extend:W,props:Qe,override:Yi,Events:Tt,on:xe,liveQuery:pu,extendObservabilitySet:Ss,getByKeyPath:fe,setByKeyPath:te,delByKeyPath:Va,shallowClone:Xi,deepClone:St,getObjectDiff:Rr,cmp:V,asap:qi,minKey:Qn,addons:[],connections:lt,errnames:wr,dependencies:ar,semVer:ii,version:ii.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));$e.maxKey=_t($e.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xe(bt,function(t){if(!ce){var e;hn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(we,!0,!0,t)):e=new CustomEvent(we,{detail:t}),ce=!0,dispatchEvent(e),ce=!1}}),addEventListener(we,function(t){var e=t.detail;ce||on(e)}));function on(t){var e=ce;try{ce=!0,xe.storagemutated.fire(t)}finally{ce=e}}var ce=!1;if(typeof BroadcastChannel<"u"){var Kt=new BroadcastChannel(we);typeof Kt.unref=="function"&&Kt.unref(),xe(bt,function(t){ce||Kt.postMessage(t)}),Kt.onmessage=function(t){t.data&&on(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){xe(bt,function(t){try{ce||(typeof localStorage<"u"&&localStorage.setItem(we,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&In([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:we,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===we){var e=JSON.parse(t.newValue);e&&on(e.changedParts)}});var hi=self.document&&navigator.serviceWorker;hi&&hi.addEventListener("message",vu)}function vu(t){var e=t.data;e&&e.type===we&&on(e.changedParts)}S.rejectionMapper=eo;ts(ae,vs);class Rt extends Error{constructor(e){super(e),this.name="SpaRouterError"}}class di extends Rt{constructor(e){super(e),this.name="WindowEventConsolidationError"}}const pn="locationchange";let pi=!1;const mu=window.history.pushState;function vi(...t){const e=mu.apply(window.history,t);return window.dispatchEvent(new Event(pn)),e}const yu=window.history.replaceState;function mi(...t){const e=yu.apply(window.history,t);return window.dispatchEvent(new Event(pn)),e}function gu(){if(!pi){if(window.history.pushState===vi)throw new di("The consolidation module thinks that window events have not been consolidated yet but window.history.pushState has already been overridden. Does this module have two copies in your repo?");if(window.history.replaceState===mi)throw new di("The consolidation module thinks that window events have not been consolidated yet but window.history.replaceState has already been overridden. Does this module have two copies in your repo?");pi=!0,window.history.pushState=vi,window.history.replaceState=mi,window.addEventListener("popstate",()=>{window.dispatchEvent(new Event(pn))})}}function wu(t){return Array.from(t.entries()).reduce((e,n)=>(e[n[0]]=n[1],e),{})}function bu(t){const e=Object.entries(t).reduce((n,r)=>{const i=`${r[0]}=${r[1]}`;return`${n}&${i}`},"");return new URLSearchParams(e)}function _u(t){const n=(t?window.location.pathname.replace(t,""):window.location.pathname).split("/").filter(a=>!!a),i=window.location.search?wu(new URLSearchParams(window.location.search)):void 0,s=window.location.hash||void 0;return{paths:n,search:i,hash:s}}class Eu extends Rt{constructor(e){super(e),this.name="SanitizationDepthMaxed"}}function As(t,e){if(t.paths.join(" ")!==e.paths.join(" "))return!1;if(typeof t.search=="object"&&typeof e.search=="object"){const n=Object.entries(t.search).join(" "),r=Object.entries(e.search).join(" ");if(n!==r)return!1}else if(t.search!==e.search)return!1;return t.hash===e.hash}const yi=6;function gi(t,e){const n=t.getCurrentRawRoutes();if(t.sanitizationDepth>yi)throw new Eu(`Route sanitization depth has exceed the max of ${yi} with ${JSON.stringify(n)}`);const r=t.sanitizeFullRoute(n);if(As(r,n))t.sanitizationDepth=0,e?e(r):t.listeners.forEach(i=>{i(r)});else return t.sanitizationDepth++,t.setRoutes(r,!0)}class Tn extends Rt{constructor(e){super(e),this.name="InvalidRouterInitParamsError"}}function xu(t){if("routeBase"in t&&typeof t.routeBase!="string"&&t.routeBase!=null)throw new Tn(`Invalid type for router init params "routeBase" property. Expected string or undefined but got "${t.routeBase}" with type "${typeof t.routeBase}".`);if("routeSanitizer"in t&&typeof t.routeSanitizer!="function"&&t.routeSanitizer!=null)throw new Tn(`Invalid type for router init params "routeSanitizer" property. Expected a function or undefined but got "${t.routeSanitizer}" with type "${typeof t.routeSanitizer}".`);if("maxListenerCount"in t&&(typeof t.maxListenerCount!="number"||isNaN(t.maxListenerCount))&&t.maxListenerCount!=null)throw new Tn(`Invalid type for router init params "maxListenerCount" property. Expected a number or undefined but got "${t.maxListenerCount}" with type "${typeof t.maxListenerCount}".`)}function Su(t,e,n,r=!1){const i=$s(t,e,n);r?window.history.replaceState(void 0,"",i):window.history.pushState(void 0,"",i)}function $s(t,e,n=""){var r;if(!n&&e!=null)throw new Rt("Route base regexp was defined but routeBase string was not provided.");const i=Au(e)?`/${n}`:"",s=t.search?bu(t.search).toString():"",a=s?`?${s}`:"",o=!((r=t.hash)===null||r===void 0)&&r.startsWith("#")?"":"#",u=t.hash?`${o}${t.hash}`:"";return`${i}/${t.paths.join("/")}${a}${u}`}function Au(t){return!!(t&&window.location.pathname.match(t))}function $u(t={}){var e;xu(t),gu();const n=(e=t.routeBase)===null||e===void 0?void 0:e.replace(/\/+$/,""),r=n?new RegExp(`^\\/${t.routeBase}`):void 0;let i=!1;const s={listeners:new Set,initParams:t,sanitizeFullRoute:a=>{const o={hash:void 0,search:void 0,...a};return t.routeSanitizer?t.routeSanitizer(o):o},setRoutes:(a,o=!1,u=!1)=>{const l=s.getCurrentRawRoutes(),f={...l,...a},c=s.sanitizeFullRoute(f);if(!(!u&&As(l,c)))return Su(c,r,n,o)},createRoutesUrl:a=>$s(a,r,n),getCurrentRawRoutes:()=>_u(r),addRouteListener:(a,o)=>{if(t.maxListenerCount&&s.listeners.size>=t.maxListenerCount)throw new Rt(`Tried to exceed route listener max of ${t.maxListenerCount}.`);return s.listeners.add(o),i||(window.addEventListener(pn,()=>gi(s)),i=!0),a&&gi(s,o),o},hasRouteListener:a=>s.listeners.has(a),removeRouteListener:a=>s.listeners.delete(a),sanitizationDepth:0};return s}const Cs=$u({routeBase:"resizable-image-element"}),Cu=["https://files.porsche.com/filestore/image/multimedia/none/992-gt3-modelimage-sideshot/model/765dfc51-51bc-11eb-80d1-005056bbdc38/porsche-model.png"],Tu="resizable-image-element-storage";class Pu extends Dr{constructor(){super(Tu),this.version(1).stores({storedUrls:"&index"})}}const Pn=new Pu,wi={async set(t){const e=un(t).map((n,r)=>({index:r,url:n}));await Pn.storedUrls.clear(),await Pn.storedUrls.bulkPut(e)},async get(){const e=(await Pn.storedUrls.toArray()).map(r=>r.url),n=un(e);return Ru(n.length?n:Cu)}};function Ru(t){var e,n;try{const r=un(((n=(e=Cs.getCurrentRawRoutes().search)==null?void 0:e.imageUrls)==null?void 0:n.split(","))??[]);return Array.isArray(r)&&r.length?r:t}catch{return t}}function un(t){return t.map(e=>e.replace(/^"/,"").replace(/"$/,"").trim()).filter(Ns)}const{defineElement:ku,defineElementNoInputs:Du}=xa(),Lt=ku()({tagName:"vir-url-input",events:{urlsChange:va()},styles:vr`
        :host {
            display: block;
        }

        textarea {
            box-sizing: border-box;
            width: 100%;
            height: 100%;
            max-height: 100%;
            height: 150px;
            font: inherit;
            outline: none;
            border: 2px solid #ccc;
            border-radius: 4px;

            white-space: pre;
            overflow-wrap: normal;
            overflow-x: scroll;
            padding: 8px;
        }

        textarea:focus {
            border-color: blue;
        }
    `,renderCallback:({inputs:t,dispatch:e,events:n,host:r})=>{const i=r.shadowRoot.querySelector("textarea"),s=t.urls.join(`
`),a=s+`
`;return i&&(i==null?void 0:i.value)!==s&&(i.value=s),Be`
            <textarea
                ${ze("input",o=>{const l=o.currentTarget.value.split(`
`).map(f=>f.trim().replace(/,+$/,""));e(new n.urlsChange(l))})}
                ${ze("blur",()=>{i&&(i.value=a)})}
                .value=${i&&i.matches(":focus")?s:a}
            ></textarea>
        `}}),Rn={maxWidth:100,maxHeight:200};Du({tagName:"vir-example-app",stateInit:{imageUrls:Oi(wi.get()),constraints:void 0,router:Cs,urlUpdateDebounce:{promise:void 0,lastSearch:void 0},forceImageGrow:!1},styles:vr`
        :host {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            box-sizing: border-box;
            padding: 16px;
        }

        .all-image-containers {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        ${Ht} {
            border: 5px solid red;
            background-color: rgb(241, 241, 241);
            border-radius: 8px;
        }

        .images-container {
            align-items: center;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .images-container > * {
            flex-shrink: 0;
        }

        label {
            display: flex;
            align-items: flex-start;
            flex-direction: column;
            font: inherit;
            font-size: 1.4em;
            gap: 4px;
        }

        .inline-label {
            flex-direction: row;
            align-items: center;
        }

        p {
            display: flex;
            gap: 8px;
        }

        input {
            font: inherit;
        }
    `,renderCallback:({state:t,updateState:e})=>{if(!t.constraints){const s=t.router.getCurrentRawRoutes().search;e({constraints:{maxWidth:Number(s==null?void 0:s.width)||Rn.maxWidth,maxHeight:Number(s==null?void 0:s.height)||Rn.maxHeight},forceImageGrow:(s==null?void 0:s.full)==null?!1:(s==null?void 0:s.full)==="1"})}const n=t.constraints??Rn,r=Array.isArray(t.imageUrls)?t.imageUrls:[];function i(){return{...t.router.getCurrentRawRoutes().search,width:String(n.maxWidth),height:String(n.maxHeight),full:t.forceImageGrow?"1":"0",...r.length?{imageUrls:r.join(",")}:{}}}return!t.urlUpdateDebounce.promise&&(!t.urlUpdateDebounce.lastSearch||!xi(i(),t.urlUpdateDebounce.lastSearch))&&e({urlUpdateDebounce:{promise:Ei(1e3).then(()=>{const s=i();try{t.router.setRoutes({search:s},!0)}catch(a){console.warn(a)}e({urlUpdateDebounce:{promise:void 0,lastSearch:s}})}),lastSearch:i()}}),Be`
            <a href="https://github.com/electrovir/resizable-image-element">
                <h1>resizable-image-element</h1>
            </a>
            <p>
                Add more image URLs to the input below:
            </p>
            <${Lt}
                ${dr(Lt,{urls:r})}
                ${ze(Lt.events.urlsChange,s=>{const a=s.detail;wi.set(a),e({imageUrls:{resolvedValue:s.detail}})})}
            ></${Lt}>
            <p>
                <label>
                    Max Width
                    <br>
                    ${Jt(n.maxWidth)}
                    <br>
                    <input
                        type="range"
                        max="1000"
                        min="20"
                        .value=${n.maxWidth}
                        ${ze("input",s=>{const a=s.currentTarget;e({constraints:{...n,maxWidth:Number(a.value)||0}})})}
                    />
                </label>
                <label>
                    Max Height
                    <br>
                    ${Jt(n.maxHeight)}
                    <br>
                    <input
                        type="range"
                        max="1000"
                        min="20"
                        .value=${n.maxHeight}
                        ${ze("input",s=>{const a=s.currentTarget;e({constraints:{...n,maxHeight:Number(a.value)||0}})})}
                    />
                </label>
                <label class="inline-label">
                    <input
                        type="checkbox"
                        ?checked=${t.forceImageGrow}
                        ${ze("input",()=>{e({forceImageGrow:!t.forceImageGrow})})}
                    />
                    Force image grow
                </label>
            </p>
            <div class="images-container">
                ${Ou(n,t.imageUrls,t.forceImageGrow)}
            </div>
        `}});function Ou(t,e,n){return Ii(e,"Loading...",r=>un(r).map(i=>Be`
                <${Ht}
                    ${dr(Ht,{imageUrl:i,maxDimensions:t,forceImageGrow:n})}
                ></${Ht}>
            `))}
