(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lt=window,nr=Lt.ShadowRoot&&(Lt.ShadyCSS===void 0||Lt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,rr=Symbol(),Tr=new WeakMap;let li=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==rr)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(nr&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=Tr.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Tr.set(n,e))}return e}toString(){return this.cssText}};const ft=t=>new li(typeof t=="string"?t:t+"",void 0,rr),ci=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new li(n,t,rr)},hs=(t,e)=>{nr?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=Lt.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},Pr=nr?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ft(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var hn;const Yt=window,kr=Yt.trustedTypes,ds=kr?kr.emptyScript:"",Dr=Yt.reactiveElementPolyfillSupport,$n={toAttribute(t,e){switch(e){case Boolean:t=t?ds:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},fi=(t,e)=>e!==t&&(e==e||t==t),dn={attribute:!0,type:String,converter:$n,reflect:!1,hasChanged:fi};let Le=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=dn){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const s=this[e];this[n]=i,this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||dn}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Pr(i))}else e!==void 0&&n.push(Pr(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return hs(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=dn){var i;const s=this.constructor._$Ep(e,r);if(s!==void 0&&r.reflect===!0){const a=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:$n).toAttribute(n,r.type);this._$El=e,a==null?this.removeAttribute(s):this.setAttribute(s,a),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const a=i.getPropertyOptions(s),o=typeof a.converter=="function"?{fromAttribute:a.converter}:((r=a.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?a.converter:$n;this._$El=s,this[s]=o.fromAttribute(n,a.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||fi)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Le.finalized=!0,Le.elementProperties=new Map,Le.elementStyles=[],Le.shadowRootOptions={mode:"open"},Dr==null||Dr({ReactiveElement:Le}),((hn=Yt.reactiveElementVersions)!==null&&hn!==void 0?hn:Yt.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var pn;const Gt=window,We=Gt.trustedTypes,Rr=We?We.createPolicy("lit-html",{createHTML:t=>t}):void 0,ge=`lit$${(Math.random()+"").slice(9)}$`,hi="?"+ge,ps=`<${hi}>`,ze=document,ht=(t="")=>ze.createComment(t),dt=t=>t===null||typeof t!="object"&&typeof t!="function",di=Array.isArray,vs=t=>di(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",nt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Or=/-->/g,Mr=/>/g,xe=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Br=/'/g,Nr=/"/g,pi=/^(?:script|style|textarea|title)$/i,ms=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),ys=ms(1),be=Symbol.for("lit-noChange"),F=Symbol.for("lit-nothing"),Kr=new WeakMap,je=ze.createTreeWalker(ze,129,null,!1),gs=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":"",a=nt;for(let u=0;u<n;u++){const l=t[u];let f,c,h=-1,m=0;for(;m<l.length&&(a.lastIndex=m,c=a.exec(l),c!==null);)m=a.lastIndex,a===nt?c[1]==="!--"?a=Or:c[1]!==void 0?a=Mr:c[2]!==void 0?(pi.test(c[2])&&(i=RegExp("</"+c[2],"g")),a=xe):c[3]!==void 0&&(a=xe):a===xe?c[0]===">"?(a=i??nt,h=-1):c[1]===void 0?h=-2:(h=a.lastIndex-c[2].length,f=c[1],a=c[3]===void 0?xe:c[3]==='"'?Nr:Br):a===Nr||a===Br?a=xe:a===Or||a===Mr?a=nt:(a=xe,i=void 0);const p=a===xe&&t[u+1].startsWith("/>")?" ":"";s+=a===nt?l+ps:h>=0?(r.push(f),l.slice(0,h)+"$lit$"+l.slice(h)+ge+p):l+ge+(h===-2?(r.push(void 0),u):p)}const o=s+(t[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Rr!==void 0?Rr.createHTML(o):o,r]};class pt{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,a=0;const o=e.length-1,u=this.parts,[l,f]=gs(e,n);if(this.el=pt.createElement(l,r),je.currentNode=this.el.content,n===2){const c=this.el.content,h=c.firstChild;h.remove(),c.append(...h.childNodes)}for(;(i=je.nextNode())!==null&&u.length<o;){if(i.nodeType===1){if(i.hasAttributes()){const c=[];for(const h of i.getAttributeNames())if(h.endsWith("$lit$")||h.startsWith(ge)){const m=f[a++];if(c.push(h),m!==void 0){const p=i.getAttribute(m.toLowerCase()+"$lit$").split(ge),d=/([.?@])?(.*)/.exec(m);u.push({type:1,index:s,name:d[2],strings:p,ctor:d[1]==="."?bs:d[1]==="?"?Es:d[1]==="@"?As:on})}else u.push({type:6,index:s})}for(const h of c)i.removeAttribute(h)}if(pi.test(i.tagName)){const c=i.textContent.split(ge),h=c.length-1;if(h>0){i.textContent=We?We.emptyScript:"";for(let m=0;m<h;m++)i.append(c[m],ht()),je.nextNode(),u.push({type:2,index:++s});i.append(c[h],ht())}}}else if(i.nodeType===8)if(i.data===hi)u.push({type:2,index:s});else{let c=-1;for(;(c=i.data.indexOf(ge,c+1))!==-1;)u.push({type:7,index:s}),c+=ge.length-1}s++}}static createElement(e,n){const r=ze.createElement("template");return r.innerHTML=e,r}}function Ye(t,e,n=t,r){var i,s,a,o;if(e===be)return e;let u=r!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[r]:n._$Cl;const l=dt(e)?void 0:e._$litDirective$;return(u==null?void 0:u.constructor)!==l&&((s=u==null?void 0:u._$AO)===null||s===void 0||s.call(u,!1),l===void 0?u=void 0:(u=new l(t),u._$AT(t,n,r)),r!==void 0?((a=(o=n)._$Co)!==null&&a!==void 0?a:o._$Co=[])[r]=u:n._$Cl=u),u!==void 0&&(e=Ye(t,u._$AS(t,e.values),u,r)),e}class ws{constructor(e,n){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var n;const{el:{content:r},parts:i}=this._$AD,s=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:ze).importNode(r,!0);je.currentNode=s;let a=je.nextNode(),o=0,u=0,l=i[0];for(;l!==void 0;){if(o===l.index){let f;l.type===2?f=new At(a,a.nextSibling,this,e):l.type===1?f=new l.ctor(a,l.name,l.strings,this,e):l.type===6&&(f=new xs(a,this,e)),this.u.push(f),l=i[++u]}o!==(l==null?void 0:l.index)&&(a=je.nextNode(),o++)}return s}p(e){let n=0;for(const r of this.u)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class At{constructor(e,n,r,i){var s;this.type=2,this._$AH=F,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cm=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Ye(this,e,n),dt(e)?e===F||e==null||e===""?(this._$AH!==F&&this._$AR(),this._$AH=F):e!==this._$AH&&e!==be&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):vs(e)?this.k(e):this.g(e)}O(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==F&&dt(this._$AH)?this._$AA.nextSibling.data=e:this.T(ze.createTextNode(e)),this._$AH=e}$(e){var n;const{values:r,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=pt.createElement(i.h,this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.p(r);else{const a=new ws(s,this),o=a.v(this.options);a.p(r),this.T(o),this._$AH=a}}_$AC(e){let n=Kr.get(e.strings);return n===void 0&&Kr.set(e.strings,n=new pt(e)),n}k(e){di(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new At(this.O(ht()),this.O(ht()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cm=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class on{constructor(e,n,r,i,s){this.type=1,this._$AH=F,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=F}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const s=this.strings;let a=!1;if(s===void 0)e=Ye(this,e,n,0),a=!dt(e)||e!==this._$AH&&e!==be,a&&(this._$AH=e);else{const o=e;let u,l;for(e=s[0],u=0;u<s.length-1;u++)l=Ye(this,o[r+u],n,u),l===be&&(l=this._$AH[u]),a||(a=!dt(l)||l!==this._$AH[u]),l===F?e=F:e!==F&&(e+=(l??"")+s[u+1]),this._$AH[u]=l}a&&!i&&this.j(e)}j(e){e===F?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class bs extends on{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===F?void 0:e}}const _s=We?We.emptyScript:"";class Es extends on{constructor(){super(...arguments),this.type=4}j(e){e&&e!==F?this.element.setAttribute(this.name,_s):this.element.removeAttribute(this.name)}}class As extends on{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){var r;if((e=(r=Ye(this,e,n,0))!==null&&r!==void 0?r:F)===be)return;const i=this._$AH,s=e===F&&i!==F||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==F&&(i===F||s);s&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class xs{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Ye(this,e)}}const Ir=Gt.litHtmlPolyfillSupport;Ir==null||Ir(pt,At),((pn=Gt.litHtmlVersions)!==null&&pn!==void 0?pn:Gt.litHtmlVersions=[]).push("2.6.1");const Ss=(t,e,n)=>{var r,i;const s=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let a=s._$litPart$;if(a===void 0){const o=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=a=new At(e.insertBefore(ht(),o),o,void 0,n??{})}return a._$AI(t),a};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var vn,mn;class st extends Le{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Ss(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return be}}st.finalized=!0,st._$litElement$=!0,(vn=globalThis.litElementHydrateSupport)===null||vn===void 0||vn.call(globalThis,{LitElement:st});const Lr=globalThis.litElementPolyfillSupport;Lr==null||Lr({LitElement:st});((mn=globalThis.litElementVersions)!==null&&mn!==void 0?mn:globalThis.litElementVersions=[]).push("3.2.2");var $s=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};function Cs(){return t=>{}}let vt=class extends st{};vt=$s([Cs()],vt);function vi(t){return t.replace(/\n/g," ").trim().replace(/\s{2,}/g," ")}const Ts={capitalizeFirstLetter:!1};function Ps(t){return t.length?t[0].toUpperCase()+t.slice(1):""}function ks(t,e){return e.capitalizeFirstLetter?Ps(t):t}function Ds(t,e=Ts){const n=t.toLowerCase();if(!n.length)return"";const r=n.replace(/^-+/,"").replace(/-{2,}/g,"-").replace(/-(?:.|$)/g,i=>{const s=i[1];return s?s.toUpperCase():""});return ks(r,e)}function Hr(t){return t!==t.toUpperCase()}function Rs(t){return t.split("").reduce((n,r,i,s)=>{const a=i>0?s[i-1]:"",o=i<s.length-1?s[i+1]:"",u=Hr(a)||Hr(o);return r===r.toLowerCase()||i===0||!u?n+=r:n+=`-${r.toLowerCase()}`,n},"").toLowerCase()}const Os=["january","february","march","april","may","june","july","august","september","october","november","december"];Os.map(t=>t.slice(0,3));function Ms(t){return!!t}const Bs=[(t,e)=>e in t,(t,e)=>e in t.constructor.prototype];function mi(t,e){return t?Bs.some(n=>{try{return n(t,e)}catch{return!1}}):!1}function Ns(t,e){return t&&e.every(n=>mi(t,n))}function Ks(t){return!!(mi(t,"then")&&typeof t.then=="function")}function Ge(){let t,e,n=!1;const r=new Promise((i,s)=>{t=a=>(n=!0,i(a)),e=a=>{n=!0,s(a)}});if(!t||!e)throw new Error(`Reject and resolve callbacks were not set by the promise constructor for ${Ge.name}.`);return{promise:r,resolve:t,reject:e,isSettled(){return n}}}function ir(t){return t?t instanceof Error?t.message:String(t):""}function Is(t){return t instanceof Error?t:new Error(ir(t))}function Re(t){let e;try{e=Reflect.ownKeys(t)}catch{}return e??[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Fr(t){return Object.entries(t).sort((e,n)=>e[0].localeCompare(n[0]))}function Ls(t,e){return Re(t).filter(r=>{const i=t[r];return e(r,i,t)}).reduce((r,i)=>(r[i]=t[i],r),{})}function Je(t,e){let n=!1;const r=Re(t).reduce((i,s)=>{const a=e(s,t[s],t);return a instanceof Promise&&(n=!0),{...i,[s]:a}},{});return n?new Promise(async(i,s)=>{try{await Promise.all(Re(r).map(async a=>{const o=await r[a];r[a]=o})),i(r)}catch(a){s(a)}}):r}function Ur(t){return!!t&&typeof t=="object"}function Hs(t,e){try{if(t===e)return!0;if(Ur(t)&&Ur(e)){const n=Fr(t),r=Fr(e);return JSON.stringify(n)===JSON.stringify(r)}else return JSON.stringify(t)===JSON.stringify(e)}catch(n){throw console.error(`Failed to compare objects using JSON.stringify: ${ir(n)}`),n}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fs=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function jr(t){return(e,n)=>n!==void 0?((r,i,s)=>{i.constructor.createProperty(s,r)})(t,e,n):Fs(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var yn;((yn=window.HTMLSlotElement)===null||yn===void 0?void 0:yn.prototype.assignedElements)!=null;const Cn=Symbol("this-is-an-element-vir-declarative-element"),sr=Symbol("key for ignoring inputs not having been set yet"),Us={[sr]:!0};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const js={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ar=t=>(...e)=>({_$litDirective$:t,values:e});class or{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}}function Vs(t,e){return yi(t,e,vt)}function yi(t,e,n){Tn(t,e);const r=t.element;if(!(r instanceof n))throw new Error(`${e} attached to non ${n.name} element.`);return r}function Tn(t,e){if(t.type!==js.ELEMENT)throw new Error(`${e} directive can only be attached directly to an element.`);if(!t.element)throw new Error(`${e} directive found no element.`)}function ur(t,e){return Ws(t,e)}const Ws=ar(class extends or{constructor(t){super(t),this.element=Vs(t,"assign")}render(t,e){return zs(t,this.element,e),be}});function zs(t,e,n){if(e.tagName.toLowerCase()!==t.tagName.toLowerCase())throw console.error(e,t),new Error(`Assignment mismatch. Assignment was made for ${e.tagName.toLowerCase()} but it's attached to ${t.tagName.toLowerCase()}`);e.assignInputs(n)}function gi(t){const e=t.getRootNode();if(!(e instanceof ShadowRoot))return!1;const n=e.host;return n instanceof vt?!0:gi(n)}var O=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},J=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},se,Se,Ce,Te,Ue,He,Y,at,Pn,kn;function Ys(t){if(!t)return{};const e=Ls(t,(r,i)=>i instanceof wi);return Je(e,(r,i)=>new Gs(i.initialValue))}const Dt=Symbol("not set");class Gs{constructor(e){se.add(this),Se.set(this,Dt),Ce.set(this,void 0),Te.set(this,void 0),Ue.set(this,[]),He.set(this,void 0),Y.set(this,Ge()),e&&this.setValue({newPromise:e})}setValue(e){if("createPromise"in e){if(O(this,Se,"f")===Dt||!Hs(e.trigger,O(this,Se,"f"))){J(this,Se,e.trigger,"f");const n=e.createPromise();O(this,se,"m",Pn).call(this,n)}}else"newPromise"in e?(O(this,Se,"f"),O(this,se,"m",Pn).call(this,e.newPromise),O(this,se,"m",at).call(this)):"resolvedValue"in e?O(this,se,"m",kn).call(this,e.resolvedValue):e.forceUpdate&&(J(this,Se,Dt,"f"),J(this,Ce,void 0,"f"),O(this,Y,"f").isSettled()||O(this,Y,"f").reject("Canceled by force update"),J(this,Y,Ge(),"f"),O(this,se,"m",at).call(this))}getValue(){return O(this,Y,"f").isSettled()?O(this,Te,"f")?O(this,Te,"f"):O(this,Ce,"f"):O(this,Y,"f").promise}addSettleListener(e){O(this,Ue,"f").push(e)}removeSettleListener(e){J(this,Ue,O(this,Ue,"f").filter(n=>n!==e),"f")}}Se=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Ue=new WeakMap,He=new WeakMap,Y=new WeakMap,se=new WeakSet,at=function(){O(this,Ue,"f").forEach(e=>{e()})},Pn=function(e){e!==O(this,He,"f")&&(J(this,Ce,void 0,"f"),J(this,Te,void 0,"f"),J(this,He,e,"f"),O(this,Y,"f").isSettled()&&J(this,Y,Ge(),"f"),e.then(n=>{O(this,He,"f")===e&&O(this,se,"m",kn).call(this,n)}).catch(n=>{O(this,He,"f")===e&&(J(this,Te,Is(n),"f"),O(this,Y,"f").promise.catch(()=>{}),O(this,Y,"f").reject(n),O(this,se,"m",at).call(this))}))},kn=function(e){e!==O(this,Ce,"f")&&(J(this,Te,void 0,"f"),J(this,Ce,e,"f"),O(this,Y,"f").isSettled()&&J(this,Y,Ge(),"f"),O(this,Y,"f").resolve(e),O(this,se,"m",at).call(this))};class wi{constructor(e){this.initialValue=e}}function bi(t){return new wi(t)}function _i(t,e){return`${t}-${Rs(e)}`}function Js(t,e){return e?Je(e,n=>ft(`--${_i(t,String(n))}`)):{}}function qs(t,e){return t?Je(t,(n,r)=>{const i=e[n];return ft(`var(${i}, ${r})`)}):{}}class Qs extends CustomEvent{get type(){return this._type}constructor(e,n){super(typeof e=="string"?e:e.type,{detail:n,bubbles:!0,composed:!0}),this._type=""}}function Ei(){return t=>{var e;return e=class extends Qs{constructor(n){super(t,n),this._type=t}},e.type=t,e}}function Xs(){return Ei()}function Zs(t){return t?Object.keys(t).filter(e=>{if(typeof e!="string")throw new Error(`Expected event key of type string but got type "${typeof e}" for key ${String(e)}`);if(e==="")throw new Error("Got empty string for events key.");return!0}).reduce((e,n)=>{const r=Ei()(n);return e[n]=r,e},{}):{}}function Vr(t,e,n){if(typeof t!="string"&&typeof t!="number"&&typeof t!="symbol")throw new Error(`Property name must be a string, got type '${typeof t}' from: '${String(t)}' for '${n.toLowerCase()}'`);if(!(t in e))throw new Error(`Property '${String(t)}' does not exist on '${n.toLowerCase()}'.`)}function Wr(t,e){const n=t;function r(s,a){e&&Vr(a,t,t.tagName);const o=t.asyncStateHandlerMap[a];return o?o.getValue():n[a]}return new Proxy({},{get:r,set:(s,a,o)=>{e&&Vr(a,t,t.tagName),s[a]=void 0;const u=t.asyncStateHandlerMap[a];return u?u.setValue(o):n[a]=o,!0},ownKeys:s=>Reflect.ownKeys(s),getOwnPropertyDescriptor(s,a){if(a in s)return{get value(){return r(s,a)},configurable:!0,enumerable:!0}},has:(s,a)=>Reflect.has(s,a)})}function ea(t,e){return e?Je(e,n=>_i(t,String(n))):{}}function ta({hostClassNames:t,cssVarNames:e,cssVarValues:n}){return{hostClassSelectors:Je(t,(r,i)=>ft(`:host(.${i})`)),hostClassNames:Je(t,(r,i)=>ft(i)),cssVarNames:e,cssVarValues:n}}function na({host:t,hostClassesInit:e,hostClassNames:n,state:r,inputs:i}){e&&Re(e).forEach(s=>{const a=e[s],o=n[s];typeof a=="function"&&(a({state:r,inputs:i})?t.classList.add(o):t.classList.remove(o))})}function ra(t,e){function n(i){Re(i).forEach(s=>{const a=i[s],o=t.asyncStateHandlerMap[s];o?o.setValue(a):t.instanceState[s]=a})}return{dispatch:i=>t.dispatchEvent(i),updateState:n,inputs:t.instanceInputs,host:t,state:t.instanceState,events:e}}function lr(t){var e;const n=Zs(t.events),r=ea(t.tagName,t.hostClasses),i=Js(t.tagName,t.cssVars),s=qs(t.cssVars,i),a={...Us,...t.options},o=typeof t.styles=="function"?t.styles(ta({hostClassNames:r,cssVarNames:i,cssVarValues:s})):t.styles||ci``,u=t.renderCallback,l=(e=class extends vt{createRenderParams(){return ra(this,n)}get instanceType(){throw new Error(`"instanceType" was called on ${t.tagName} as a value but it is only for types.`)}static get inputsType(){throw new Error(`"inputsType" was called on ${t.tagName} as a value but it is only for types.`)}static get stateType(){throw new Error(`"stateType" was called on ${t.tagName} as a value but it is only for types.`)}markInputsAsHavingBeenSet(){this.haveInputsBeenSet||(this.haveInputsBeenSet=!0)}render(){gi(this)&&!this.haveInputsBeenSet&&!a[sr]&&console.warn(this,`${t.tagName} got rendered before its input object was set. This was most likely caused by forgetting to use the "${ur.name}" directive on it. If no inputs are intended, use "${lr.name}" to define ${t.tagName}.`);const f=this.createRenderParams();!this.initCalled&&t.initCallback&&(this.initCalled=!0,t.initCallback(f));const c=t.renderCallback(f);return na({host:f.host,hostClassesInit:t.hostClasses,hostClassNames:r,state:f.state,inputs:f.inputs}),c}disconnectedCallback(){if(super.disconnectedCallback(),t.cleanupCallback){const f=this.createRenderParams();t.cleanupCallback(f)}this.initCalled=!1}assignInputs(f){Re(f).forEach(c=>{jr()(this,c),this.instanceInputs[c]=f[c]}),this.markInputsAsHavingBeenSet()}constructor(){super(),this.initCalled=!1,this.haveInputsBeenSet=!1,this.definition={},this.asyncStateHandlerMap=Ys(t.stateInit),this.instanceInputs=Wr(this,!1),this.instanceState=Wr(this,!0);const f=t.stateInit||{};Re(f).forEach(c=>{jr()(this,c);const h=this.asyncStateHandlerMap[c];h?(this.instanceState[c]=h.getValue(),h.addSettleListener(()=>{this[c]=h.getValue()})):this.instanceState[c]=f[c]}),this.definition=l}},e.tagName=t.tagName,e.styles=o,e.isStrictInstance=()=>!1,e.events=n,e.renderCallback=u,e.hostClasses=r,e.cssVarNames=i,e.stateInit=t.stateInit,e.cssVarValues=i,e);return Object.defineProperties(l,{[Cn]:{value:!0,writable:!1},name:{value:Ds(t.tagName,{capitalizeFirstLetter:!0}),writable:!0},isStrictInstance:{value:f=>f instanceof l,writable:!1}}),window.customElements.get(t.tagName)?console.warn(`Tried to define custom element '${t.tagName}' but it is already defined.`):window.customElements.define(t.tagName,l),l}function ia(){return t=>lr({...t,options:{[sr]:!1},...t.options})}function ot(t,e){return sa(t,e)}const sa=ar(class extends or{constructor(t){super(t),this.element=yi(t,"listen",HTMLElement)}resetListener(t){this.lastListenerMetaData&&this.element.removeEventListener(this.lastListenerMetaData.eventType,this.lastListenerMetaData.listener),this.element.addEventListener(t.eventType,t.listener),this.lastListenerMetaData=t}createListenerMetaData(t,e){return{eventType:t,callback:e,listener:n=>{var r;return(r=this.lastListenerMetaData)===null||r===void 0?void 0:r.callback(n)}}}render(t,e){const n=typeof t=="string"?t:t.type;if(typeof n!="string")throw new Error(`Cannot listen to an event with a name that is not a string. Given event name: "${n}"`);return this.lastListenerMetaData&&this.lastListenerMetaData.eventType===n?this.lastListenerMetaData.callback=e:this.resetListener(this.createListenerMetaData(n,e)),be}}),zr="onDomCreated",aa=ar(class extends or{constructor(t){super(t),Tn(t,zr)}update(t,[e]){Tn(t,zr);const n=t.element;return n!==this.element&&(requestAnimationFrame(()=>e(n)),this.element=n),this.render(e)}render(t){}});function Ai(t,e,n,r){return t instanceof Error?r?r(t):ir(t):Ks(t)?e:n?n(t):t}function oa(t){var e,n;const{assertInputs:r,transformInputs:i}={assertInputs:(e=t==null?void 0:t.assertInputs)!==null&&e!==void 0?e:()=>{},transformInputs:(n=t==null?void 0:t.transformInputs)!==null&&n!==void 0?n:s=>s};return{defineElement:()=>s=>(r(s),ia()(i(s))),defineElementNoInputs:s=>(r(s),lr(i(s)))}}function ua(t,e){return t.filter((n,r)=>!e.includes(r))}function xi(t){return t.filter(e=>Ns(e,["tagName",Cn])&&!!e.tagName&&!!e[Cn])}const Si=new WeakMap;function la(t,e){var n;const r=xi(e);return(n=$i(Si,[t,...r]).value)===null||n===void 0?void 0:n.template}function ca(t,e,n){const r=xi(e);return Ti(Si,[t,...r],n)}function $i(t,e,n=0){const{currentTemplateAndNested:r,reason:i}=Ci(t,e,n);return r?n===e.length-1?{value:r,reason:"reached end of keys array"}:r.nested?$i(r.nested,e,n+1):{value:void 0,reason:`map at key index ${n} did not have nested maps`}:{value:r,reason:i}}function Ci(t,e,n){const r=e[n];if(r==null)return{currentKey:void 0,currentTemplateAndNested:void 0,reason:`key at index ${n} not found`};if(!t.has(r))return{currentKey:r,currentTemplateAndNested:void 0,reason:`key at index ${n} was not in the map`};const i=t.get(r);return i==null?{currentKey:r,currentTemplateAndNested:void 0,reason:`value at key at index ${n} was undefined`}:{currentKey:r,currentTemplateAndNested:i,reason:"key and value exists"}}function Ti(t,e,n,r=0){var i;const{currentTemplateAndNested:s,currentKey:a,reason:o}=Ci(t,e,r);if(!a)return{result:!1,reason:o};const u=s??{nested:void 0,template:void 0};if(s||t.set(a,u),r===e.length-1)return u.template=n,{result:!0,reason:"set value at end of keys array"};const l=(i=u.nested)!==null&&i!==void 0?i:new WeakMap;return u.nested||(u.nested=l),Ti(l,e,n,r+1)}function Pi(t,e,n){return{name:t,check:e,transform:n}}const fa=new WeakMap;function ki(t,e,n){const r=la(t,e),i=r??n();if(!r){const a=ca(t,e,i);if(a.result)fa.set(t,i);else throw new Error(`Failed to set template transform: ${a.reason}`)}const s=ua(e,i.valueIndexDeletions);return{strings:i.templateStrings,values:s}}function Di(t,e,n,r){const i=[],s=[],a=[];return t.forEach((u,l)=>{var f;const c=i.length-1,h=i[c],m=l-1,p=e[m];let d;r&&r(u),typeof h=="string"&&(d=(f=n.find(b=>b.check(h,u,p)))===null||f===void 0?void 0:f.transform,d&&(i[c]=h+d(p)+u,a.push(m))),d||i.push(u);const y=t.raw[l];d?s[c]=s[c]+d(p)+y:s.push(y)}),{templateStrings:Object.assign([],i,{raw:s}),valueIndexDeletions:a}}function Ri(t){return typeof t=="function"&&t.hasOwnProperty("tagName")&&typeof t.tagName=="string"&&t.tagName.includes("-")}const ha=[Pi("tag name css selector interpolation",(t,e,n)=>Ri(n),t=>t.tagName)];function da(t,e){return Di(t,e,ha)}function cr(t,...e){const n=ki(t,e,()=>da(t,e));return ci(n.strings,...n.values)}const pa=[Pi("tag name interpolation",(t,e,n)=>{const r=t.trim().endsWith("<")&&!!e.match(/^[\s\n>]/)||(t==null?void 0:t.trim().endsWith("</"))&&e.trim().startsWith(">"),i=Ri(n);if(r&&!i)throw console.error({lastNewString:t,currentLitString:e,currentValue:n}),new Error(`Got interpolated tag name but it wasn't of type VirElement: '${n.prototype.constructor.name}'`);return r&&i},t=>t.tagName)];function va(t){}function ma(t){return Di(t.strings,t.values,pa,va)}function Oe(t,...e){const n=ys(t,...e),r=ki(t,e,()=>ma(n));return{...n,strings:r.strings,values:r.values}}function Jt(t){return String(t).endsWith("px")?String(t):`${t}px`}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D=function(){return D=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},D.apply(this,arguments)};function Dn(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var K=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L=Object.keys,V=Array.isArray;typeof Promise<"u"&&!K.Promise&&(K.Promise=Promise);function z(t,e){return typeof e!="object"||L(e).forEach(function(n){t[n]=e[n]}),t}var mt=Object.getPrototypeOf,ya={}.hasOwnProperty;function q(t,e){return ya.call(t,e)}function qe(t,e){typeof e=="function"&&(e=e(mt(t))),(typeof Reflect>"u"?L:Reflect.ownKeys)(e).forEach(function(n){he(t,n,e[n])})}var Oi=Object.defineProperty;function he(t,e,n,r){Oi(t,e,z(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Qe(t){return{from:function(e){return t.prototype=Object.create(e.prototype),he(t.prototype,"constructor",t),{extend:qe.bind(null,t.prototype)}}}}var ga=Object.getOwnPropertyDescriptor;function fr(t,e){var n=ga(t,e),r;return n||(r=mt(t))&&fr(r,e)}var wa=[].slice;function un(t,e,n){return wa.call(t,e,n)}function Mi(t,e){return e(t)}function rt(t){if(!t)throw new Error("Assertion Failed")}function Bi(t){K.setImmediate?setImmediate(t):setTimeout(t,0)}function Ni(t,e){return t.reduce(function(n,r,i){var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function ba(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function fe(t,e){if(q(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=fe(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(a!==-1){var o=t[e.substr(0,a)];return o===void 0?void 0:fe(o,e.substr(a+1))}}function te(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){rt(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)te(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s),o=e.substr(s+1);if(o==="")n===void 0?V(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var u=t[a];(!u||!q(t,a))&&(u=t[a]={}),te(u,o,n)}}else n===void 0?V(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function _a(t,e){typeof e=="string"?te(t,e,void 0):"length"in e&&[].map.call(e,function(n){te(t,n,void 0)})}function Ki(t){var e={};for(var n in t)q(t,n)&&(e[n]=t[n]);return e}var Ea=[].concat;function Ii(t){return Ea.apply([],t)}var Li="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ii([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return K[t]}),Aa=Li.map(function(t){return K[t]});Ni(Li,function(t){return[t,!0]});var ye=null;function xt(t){ye=typeof WeakMap<"u"&&new WeakMap;var e=Rn(t);return ye=null,e}function Rn(t){if(!t||typeof t!="object")return t;var e=ye&&ye.get(t);if(e)return e;if(V(t)){e=[],ye&&ye.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Rn(t[n]))}else if(Aa.indexOf(t.constructor)>=0)e=t;else{var i=mt(t);e=i===Object.prototype?{}:Object.create(i),ye&&ye.set(t,e);for(var s in t)q(t,s)&&(e[s]=Rn(t[s]))}return e}var xa={}.toString;function On(t){return xa.call(t).slice(8,-1)}var Mn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Sa=typeof Mn=="symbol"?function(t){var e;return t!=null&&(e=t[Mn])&&e.apply(t)}:function(){return null},Fe={};function le(t){var e,n,r,i;if(arguments.length===1){if(V(t))return t.slice();if(this===Fe&&typeof t=="string")return[t];if(i=Sa(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var hr=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ae=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Hi(t,e){ae=t,Fi=e}var Fi=function(){return!0},$a=!new Error("").stack;function Ne(){if($a)try{throw Ne.arguments,new Error}catch(t){return t}return new Error}function Bn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Fi).map(function(r){return`
`+r}).join("")):""}var Ca=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ui=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dr=Ca.concat(Ui),Ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(t,e){this._e=Ne(),this.name=t,this.message=e}Qe(Xe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Bn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function ji(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function qt(t,e,n,r){this._e=Ne(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=ji(t,e)}Qe(qt).from(Xe);function ut(t,e){this._e=Ne(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=ji(t,e)}Qe(ut).from(Xe);var pr=dr.reduce(function(t,e){return t[e]=e+"Error",t},{}),Pa=Xe,T=dr.reduce(function(t,e){var n=e+"Error";function r(i,s){this._e=Ne(),this.name=n,i?typeof i=="string"?(this.message=""+i+(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ta[e]||n,this.inner=null)}return Qe(r).from(Pa),t[e]=r,t},{});T.Syntax=SyntaxError;T.Type=TypeError;T.Range=RangeError;var Yr=Ui.reduce(function(t,e){return t[e+"Error"]=T[e],t},{});function ka(t,e){if(!t||t instanceof Xe||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Yr[t.name])return t;var n=new Yr[t.name](e||t.message,t);return"stack"in t&&he(n,"stack",{get:function(){return this.inner.stack}}),n}var ln=dr.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=T[e]),t},{});ln.ModifyError=qt;ln.DexieError=Xe;ln.BulkError=ut;function N(){}function St(t){return t}function Da(t,e){return t==null||t===St?e:function(n){return e(t(n))}}function Me(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Ra(t,e){return t===N?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Me(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Me(i,this.onerror):i),s!==void 0?s:n}}function Oa(t,e){return t===N?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Me(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Me(r,this.onerror):r)}}function Ma(t,e){return t===N?e:function(n){var r=t.apply(this,arguments);z(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Me(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Me(s,this.onerror):s),r===void 0?a===void 0?void 0:a:z(r,a)}}function Ba(t,e){return t===N?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function vr(t,e){return t===N?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}var yt={},Na=100,Ka=20,Vi=100,mr=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,mt(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,mt(e),t]}(),Nn=mr[0],Qt=mr[1],Kn=mr[2],Wi=Qt&&Qt.then,Ht=Nn&&Nn.constructor,yr=!!Kn,In=!1,Ia=Kn?function(){Kn.then(Rt)}:K.setImmediate?setImmediate.bind(null,Rt):K.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Rt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Rt,0)},gt=function(t,e){it.push([t,e]),Xt&&(Ia(),Xt=!1)},Ln=!0,Xt=!0,ke=[],Ft=[],Hn=null,Fn=St,Ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{qr(t[0],t[1])}catch{}})}},S=Ve,it=[],De=0,Ut=[];function x(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var e=this._PSD=S;if(ae&&(this._stackHolder=Ne(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==yt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&jn(this,this._value);return}this._state=null,this._value=null,++e.ref,Yi(this,t)}var Un={get:function(){var t=S,e=Zt;function n(r,i){var s=this,a=!t.global&&(t!==S||e!==Zt),o=a&&!de(),u=new x(function(l,f){gr(s,new zi(tn(r,t,a,o),tn(i,t,a,o),l,f,t))});return ae&&qi(u,this),u}return n.prototype=yt,n},set:function(t){he(this,"then",t&&t.prototype===yt?Un:{get:function(){return t},set:Un.set})}};qe(x.prototype,{then:Un,_then:function(t,e){gr(this,new zi(null,null,t,e,S))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):jt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):jt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),jt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{In=!0;var t=Ji(this,[],Ka),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{In=!1}}},timeout:function(t,e){var n=this;return t<1/0?new x(function(r,i){var s=setTimeout(function(){return i(new T.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&he(x.prototype,Symbol.toStringTag,"Dexie.Promise");Ve.env=Qi();function zi(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}qe(x,{all:function(){var t=le.apply(null,arguments).map(en);return new x(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,s){return x.resolve(i).then(function(a){t[s]=a,--r||e(t)},n)})})},resolve:function(t){if(t instanceof x)return t;if(t&&typeof t.then=="function")return new x(function(n,r){t.then(n,r)});var e=new x(yt,!0,t);return qi(e,Hn),e},reject:jt,race:function(){var t=le.apply(null,arguments).map(en);return new x(function(e,n){t.map(function(r){return x.resolve(r).then(e,n)})})},PSD:{get:function(){return S},set:function(t){return S=t}},totalEchoes:{get:function(){return Zt}},newPSD:_e,usePSD:et,scheduler:{get:function(){return gt},set:function(t){gt=t}},rejectionMapper:{get:function(){return Fn},set:function(t){Fn=t}},follow:function(t,e){return new x(function(n,r){return _e(function(i,s){var a=S;a.unhandleds=[],a.onunhandled=s,a.finalize=Me(function(){var o=this;Ha(function(){o.unhandleds.length===0?i():s(o.unhandleds[0])})},a.finalize),t()},e,n,r)})}});Ht&&(Ht.allSettled&&he(x,"allSettled",function(){var t=le.apply(null,arguments).map(en);return new x(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,s){return x.resolve(i).then(function(a){return r[s]={status:"fulfilled",value:a}},function(a){return r[s]={status:"rejected",reason:a}}).then(function(){return--n||e(r)})})})}),Ht.any&&typeof AggregateError<"u"&&he(x,"any",function(){var t=le.apply(null,arguments).map(en);return new x(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(s,a){return x.resolve(s).then(function(o){return e(o)},function(o){i[a]=o,--r||n(new AggregateError(i))})})})}));function Yi(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&$t();n&&typeof n.then=="function"?Yi(t,function(i,s){n instanceof x?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,Gi(t)),r&&Ct()}},jn.bind(null,t))}catch(n){jn(t,n)}}function jn(t,e){if(Ft.push(e),t._state===null){var n=t._lib&&$t();e=Fn(e),t._state=!1,t._value=e,ae&&e!==null&&typeof e=="object"&&!e._promise&&ba(function(){var r=fr(e,"stack");e._promise=t,he(e,"stack",{get:function(){return In?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),Fa(t),Gi(t),n&&Ct()}}function Gi(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)gr(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),De===0&&(++De,gt(function(){--De===0&&wr()},[]))}function gr(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++De,gt(La,[n,t,e])}function La(t,e,n){try{Hn=e;var r,i=e._value;e._state?r=t(i):(Ft.length&&(Ft=[]),r=t(i),Ft.indexOf(i)===-1&&Ua(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Hn=null,--De===0&&wr(),--n.psd.ref||n.psd.finalize()}}function Ji(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,s,a;i!=null?(s=i.name||"Error",a=i.message||i,r=Bn(i,0)):(s=i,a=""),e.push(s+(a?": "+a:"")+r)}return ae&&(r=Bn(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&Ji(t._prev,e,n)),e}function qi(t,e){var n=e?e._numPrev+1:0;n<Na&&(t._prev=e,t._numPrev=n)}function Rt(){$t()&&Ct()}function $t(){var t=Ln;return Ln=!1,Xt=!1,t}function Ct(){var t,e,n;do for(;it.length>0;)for(t=it,it=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(it.length>0);Ln=!0,Xt=!0}function wr(){var t=ke;ke=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=Ut.slice(0),n=e.length;n;)e[--n]()}function Ha(t){function e(){t(),Ut.splice(Ut.indexOf(e),1)}Ut.push(e),++De,gt(function(){--De===0&&wr()},[])}function Fa(t){ke.some(function(e){return e._value===t._value})||ke.push(t)}function Ua(t){for(var e=ke.length;e;)if(ke[--e]._value===t._value){ke.splice(e,1);return}}function jt(t){return new x(yt,!1,t)}function I(t,e){var n=S;return function(){var r=$t(),i=S;try{return Ee(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Ee(i,!1),r&&Ct()}}}var j={awaits:0,echoes:0,id:0},ja=0,Vt=[],gn=0,Zt=0,Va=0;function _e(t,e,n,r){var i=S,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Va;var a=Ve.env;s.env=yr?{Promise:x,PromiseProp:{value:x,configurable:!0,writable:!0},all:x.all,race:x.race,allSettled:x.allSettled,any:x.any,resolve:x.resolve,reject:x.reject,nthen:Gr(a.nthen,s),gthen:Gr(a.gthen,s)}:{},e&&z(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=et(s,t,n,r);return s.ref===0&&s.finalize(),o}function Ze(){return j.id||(j.id=++ja),++j.awaits,j.echoes+=Vi,j.id}function de(){return j.awaits?(--j.awaits===0&&(j.id=0),j.echoes=j.awaits*Vi,!0):!1}(""+Wi).indexOf("[native code]")===-1&&(Ze=de=N);function en(t){return j.echoes&&t&&t.constructor===Ht?(Ze(),t.then(function(e){return de(),e},function(e){return de(),H(e)})):t}function Wa(t){++Zt,(!j.echoes||--j.echoes===0)&&(j.echoes=j.id=0),Vt.push(S),Ee(t,!0)}function za(){var t=Vt[Vt.length-1];Vt.pop(),Ee(t,!1)}function Ee(t,e){var n=S;if((e?j.echoes&&(!gn++||t!==S):gn&&(!--gn||t!==S))&&Xi(e?Wa.bind(null,t):za),t!==S&&(S=t,n===Ve&&(Ve.env=Qi()),yr)){var r=Ve.env.Promise,i=t.env;Qt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(K,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Qi(){var t=K.Promise;return yr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(K,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Qt.then,gthen:t.prototype.then}:{}}function et(t,e,n,r,i){var s=S;try{return Ee(t,!0),e(n,r,i)}finally{Ee(s,!1)}}function Xi(t){Wi.call(Nn,t)}function tn(t,e,n,r){return typeof t!="function"?t:function(){var i=S;n&&Ze(),Ee(e,!0);try{return t.apply(this,arguments)}finally{Ee(i,!1),r&&Xi(de)}}}function Gr(t,e){return function(n,r){return t.call(this,tn(n,e),tn(r,e))}}var Jr="unhandledrejection";function qr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(K.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Jr,!0,!0),z(r,i)):K.CustomEvent&&(r=new CustomEvent(Jr,{detail:i}),z(r,i)),r&&K.dispatchEvent&&(dispatchEvent(r),!K.PromiseRejectionEvent&&K.onunhandledrejection))try{K.onunhandledrejection(r)}catch{}ae&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var H=x.reject;function Vn(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!S.letThrough&&!t._vip){if(t._state.openComplete)return H(new T.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return H(new T.DatabaseClosed);t.open().catch(N)}return t._state.dbReadyPromise.then(function(){return Vn(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===pr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Vn(t,e,n,r)})):H(s)}return i._promise(e,function(s,a){return _e(function(){return S.trans=i,r(s,a,i)})}).then(function(s){return i._completion.then(function(){return s})})}}var Qr="3.2.3",Pe=String.fromCharCode(65535),Wn=-1/0,oe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Zi="String expected.",lt=[],cn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ya=cn,Ga=cn,es=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},fn="__dbnames",wn="readonly",bn="readwrite";function Be(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var ts={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ot(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=xt(e),delete e[t]),e}:function(e){return e}}var Ja=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||S.trans,s=this.name;function a(u,l,f){if(!f.schema[s])throw new T.NotFound("Table "+s+" not part of transaction");return n(f.idbtrans,f)}var o=$t();try{return i&&i.db===this.db?i===S.trans?i._promise(e,a,r):_e(function(){return i._promise(e,a,r)},{trans:i,transless:S.transless||S}):Vn(this.db,e,[this.name],a)}finally{o&&Ct()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(V(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=L(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){return f.compound&&n.every(function(c){return f.keyPath.indexOf(c)>=0})&&f.keyPath.every(function(c){return n.indexOf(c)>=0})})[0];if(r&&this.db._maxKey!==Pe)return this.where(r.name).equals(r.keyPath.map(function(f){return e[f]}));!r&&ae&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,s=this.db._deps.indexedDB;function a(f,c){try{return s.cmp(f,c)===0}catch{return!1}}var o=n.reduce(function(f,c){var h=f[0],m=f[1],p=i[c],d=e[c];return[h||p,h||!p?Be(m,p&&p.multi?function(y){var b=fe(y,c);return V(b)&&b.some(function(_){return a(d,_)})}:function(y){return a(d,fe(y,c))}):m]},[null,null]),u=o[0],l=o[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,V(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var s in r)if(q(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){z(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,s=i.auto,a=i.keyPath,o=e;return a&&s&&(o=Ot(a)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[o]})}).then(function(u){return u.numFailures?x.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{te(e,a,u)}catch{}return u})},t.prototype.update=function(e,n){if(typeof e=="object"&&!V(e)){var r=fe(e,this.schema.primKey.keyPath);if(r===void 0)return H(new T.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?L(n).forEach(function(i){te(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,s=i.auto,a=i.keyPath,o=e;return a&&s&&(o=Ot(a)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[o],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?x.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{te(e,a,u)}catch{}return u})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?x.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:ts})}).then(function(n){return n.numFailures?x.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(s){return n.hook.reading.fire(s)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var u=i.schema.primKey,l=u.auto,f=u.keyPath;if(f&&s)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,h=f&&l?e.map(Ot(f)):e;return i.core.mutate({trans:o,type:"add",keys:s,values:h,wantResults:a}).then(function(m){var p=m.numFailures,d=m.results,y=m.lastResult,b=m.failures,_=a?d:y;if(p===0)return _;throw new ut(i.name+".bulkAdd(): "+p+" of "+c+" operations failed",b)})})},t.prototype.bulkPut=function(e,n,r){var i=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var u=i.schema.primKey,l=u.auto,f=u.keyPath;if(f&&s)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,h=f&&l?e.map(Ot(f)):e;return i.core.mutate({trans:o,type:"put",keys:s,values:h,wantResults:a}).then(function(m){var p=m.numFailures,d=m.results,y=m.lastResult,b=m.failures,_=a?d:y;if(p===0)return _;throw new ut(i.name+".bulkPut(): "+p+" of "+c+" operations failed",b)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var s=i.numFailures,a=i.lastResult,o=i.failures;if(s===0)return a;throw new ut(n.name+".bulkDelete(): "+s+" of "+r+" operations failed",o)})},t}();function Tt(t){var e={},n=function(o,u){if(u){for(var l=arguments.length,f=new Array(l-1);--l;)f[l-1]=arguments[l];return e[o].subscribe.apply(null,f),t}else if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,u,l){if(typeof o=="object")return a(o);u||(u=Ba),l||(l=N);var f={subscribers:[],fire:l,subscribe:function(c){f.subscribers.indexOf(c)===-1&&(f.subscribers.push(c),f.fire=u(f.fire,c))},unsubscribe:function(c){f.subscribers=f.subscribers.filter(function(h){return h!==c}),f.fire=f.subscribers.reduce(u,l)}};return e[o]=n[o]=f,f}function a(o){L(o).forEach(function(u){var l=o[u];if(V(l))s(u,o[u][0],o[u][1]);else if(l==="asap")var f=s(u,St,function(){for(var h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];f.subscribers.forEach(function(p){Bi(function(){p.apply(null,m)})})});else throw new T.InvalidArgument("Invalid event config")})}}function Pt(t,e){return Qe(e).from({prototype:t}),e}function qa(t){return Pt(Ja.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:Tt(null,{creating:[Ra,N],reading:[Da,St],updating:[Ma,N],deleting:[Oa,N]})})}function Ke(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function _n(t,e){t.filter=Be(t.filter,e)}function En(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Be(r(),e())}:e,t.justLimit=n&&!r}function Qa(t,e){t.isMatch=Be(t.isMatch,e)}function Wt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new T.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Xr(t,e,n){var r=Wt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Mt(t,e,n,r){var i=t.replayFilter?Be(t.filter,t.replayFilter()):t.filter;if(t.or){var s={},a=function(o,u,l){if(!i||i(u,l,function(h){return u.stop(h)},function(h){return u.fail(h)})){var f=u.primaryKey,c=""+f;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(f)),q(s,c)||(s[c]=!0,e(o,u,l))}};return Promise.all([t.or._iterate(a,n),Zr(Xr(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}else return Zr(Xr(t,r,n),Be(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Zr(t,e,n,r){var i=r?function(a,o,u){return n(r(a),o,u)}:n,s=I(i);return t.then(function(a){if(a)return a.start(function(){var o=function(){return a.continue()};(!e||e(a,function(u){return o=u},function(u){a.stop(u),o=N},function(u){a.fail(u),o=N}))&&s(a.value,a,function(u){return o=u}),o()})})}function W(t,e){try{var n=ei(t),r=ei(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Za(ti(t),ti(e));case"Array":return Xa(t,e)}}catch{}return NaN}function Xa(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s){var a=W(t[s],e[s]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Za(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===r?0:n<r?-1:1}function ei(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=On(t);return n==="ArrayBuffer"?"binary":n}function ti(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var eo=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,H.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,H.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Be(n.algorithm,e)},t.prototype._iterate=function(e,n){return Mt(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&z(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return Mt(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,s=i.table.core;if(Ke(i,!0))return s.count({trans:r,query:{index:Wt(i,s.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var a=0;return Mt(i,function(){return++a,!1},r,s).then(function(){return a})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],s=r.length-1;function a(l,f){return f?a(l[r[f]],f-1):l[i]}var o=this._ctx.dir==="next"?1:-1;function u(l,f){var c=a(l,s),h=a(f,s);return c<h?-o:c>h?o:0}return this.toArray(function(l){return l.sort(u)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ke(i,!0)&&i.limit>0){var s=i.valueMapper,a=Wt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return s?l.map(s):l})}else{var o=[];return Mt(i,function(u){return o.push(u)},r,i.table.core).then(function(){return o})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Ke(n)?En(n,function(){var r=e;return function(i,s){return r===0?!0:r===1?(--r,!1):(s(function(){i.advance(r),r=0}),!1)}}):En(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),En(this._ctx,function(){var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this},t.prototype.until=function(e,n){return _n(this._ctx,function(r,i,s){return e(r.value)?(i(s),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return _n(this._ctx,function(n){return e(n.value)}),Qa(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Ke(n,!0)&&n.limit>0)return this._read(function(i){var s=Wt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(i){var s=i.result;return s}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return _n(this._ctx,function(i){var s=i.primaryKey.toString(),a=q(r,s);return r[s]=!0,!a}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var s;if(typeof e=="function")s=e;else{var a=L(e),o=a.length;s=function(b){for(var _=!1,g=0;g<o;++g){var w=a[g],v=e[w];fe(b,w)!==v&&(te(b,w,v),_=!0)}return _}}var u=r.table.core,l=u.schema.primaryKey,f=l.outbound,c=l.extractKey,h=n.db._options.modifyChunkSize||200,m=[],p=0,d=[],y=function(b,_){var g=_.failures,w=_.numFailures;p+=b-w;for(var v=0,E=L(g);v<E.length;v++){var $=E[v];m.push(g[$])}};return n.clone().primaryKeys().then(function(b){var _=function(g){var w=Math.min(h,b.length-g);return u.getMany({trans:i,keys:b.slice(g,g+w),cache:"immutable"}).then(function(v){for(var E=[],$=[],A=f?[]:null,C=[],P=0;P<w;++P){var M=v[P],B={value:xt(M),primKey:b[g+P]};s.call(B,B.value,B)!==!1&&(B.value==null?C.push(b[g+P]):!f&&W(c(M),c(B.value))!==0?(C.push(b[g+P]),E.push(B.value)):($.push(B.value),f&&A.push(b[g+P])))}var R=Ke(r)&&r.limit===1/0&&(typeof e!="function"||e===An)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&u.mutate({trans:i,type:"add",values:E}).then(function(U){for(var k in U.failures)C.splice(parseInt(k),1);y(E.length,U)})).then(function(){return($.length>0||R&&typeof e=="object")&&u.mutate({trans:i,type:"put",keys:A,values:$,criteria:R,changeSpec:typeof e!="function"&&e}).then(function(U){return y($.length,U)})}).then(function(){return(C.length>0||R&&e===An)&&u.mutate({trans:i,type:"delete",keys:C,criteria:R}).then(function(U){return y(C.length,U)})}).then(function(){return b.length>g+w&&_(g+h)})})};return _(0).then(function(){if(m.length>0)throw new qt("Error modifying one or more objects",m,p,d);return b.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Ke(e)&&(e.isPrimKey&&!Ga||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(function(a){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(o){var u=o.failures;o.lastResult,o.results;var l=o.numFailures;if(l)throw new qt("Could not delete some values",Object.keys(u).map(function(f){return u[f]}),a-l);return a-l})})}):this.modify(An)},t}(),An=function(t,e){return e.value=null};function to(t){return Pt(eo.prototype,function(n,r){this.db=t;var i=ts,s=null;if(r)try{i=r()}catch(l){s=l}var a=n._ctx,o=a.table,u=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:a.or,valueMapper:u!==St?u:null}})}function no(t,e){return t<e?-1:t===e?0:1}function ro(t,e){return t>e?-1:t===e?0:1}function G(t,e,n){var r=t instanceof rs?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Ie(t){return new t.Collection(t,function(){return ns("")}).limit(0)}function io(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function so(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ao(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),o=-1,u=0;u<a;++u){var l=e[u];if(l!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;i(t[u],l)<0&&(o=u)}return a<r.length&&s==="next"?t+n.substr(t.length):a<t.length&&s==="prev"?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function Bt(t,e,n,r){var i,s,a,o,u,l,f,c=n.length;if(!n.every(function(d){return typeof d=="string"}))return G(t,Zi);function h(d){i=io(d),s=so(d),a=d==="next"?no:ro;var y=n.map(function(b){return{lower:s(b),upper:i(b)}}).sort(function(b,_){return a(b.lower,_.lower)});o=y.map(function(b){return b.upper}),u=y.map(function(b){return b.lower}),l=d,f=d==="next"?"":r}h("next");var m=new t.Collection(t,function(){return me(o[0],u[c-1]+r)});m._ondirectionchange=function(d){h(d)};var p=0;return m._addAlgorithm(function(d,y,b){var _=d.key;if(typeof _!="string")return!1;var g=s(_);if(e(g,u,p))return!0;for(var w=null,v=p;v<c;++v){var E=ao(_,g,o[v],u[v],a,l);E===null&&w===null?p=v+1:(w===null||a(w,E)>0)&&(w=E)}return y(w!==null?function(){d.continue(w+f)}:b),!1}),m}function me(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function ns(t){return{type:1,lower:t,upper:t}}var rs=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Ie(this):new this.Collection(this,function(){return me(e,n,!r,!i)})}catch{return G(this,oe)}},t.prototype.equals=function(e){return e==null?G(this,oe):new this.Collection(this,function(){return ns(e)})},t.prototype.above=function(e){return e==null?G(this,oe):new this.Collection(this,function(){return me(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?G(this,oe):new this.Collection(this,function(){return me(e,void 0,!1)})},t.prototype.below=function(e){return e==null?G(this,oe):new this.Collection(this,function(){return me(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?G(this,oe):new this.Collection(this,function(){return me(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?G(this,Zi):this.between(e,e+Pe,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Bt(this,function(n,r){return n.indexOf(r[0])===0},[e],Pe)},t.prototype.equalsIgnoreCase=function(e){return Bt(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=le.apply(Fe,arguments);return e.length===0?Ie(this):Bt(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=le.apply(Fe,arguments);return e.length===0?Ie(this):Bt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Pe)},t.prototype.anyOf=function(){var e=this,n=le.apply(Fe,arguments),r=this._cmp;try{n.sort(r)}catch{return G(this,oe)}if(n.length===0)return Ie(this);var i=new this.Collection(this,function(){return me(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?e._ascending:e._descending,n.sort(r)};var s=0;return i._addAlgorithm(function(a,o,u){for(var l=a.key;r(l,n[s])>0;)if(++s,s===n.length)return o(u),!1;return r(l,n[s])===0?!0:(o(function(){a.continue(n[s])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[Wn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=le.apply(Fe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return G(this,oe)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Wn,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,s=this._ascending,a=this._descending,o=this._min,u=this._max;if(e.length===0)return Ie(this);if(!e.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&s(v[0],v[1])<=0}))return G(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var l=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function c(v,E){for(var $=0,A=v.length;$<A;++$){var C=v[$];if(i(E[0],C[1])<0&&i(E[1],C[0])>0){C[0]=o(C[0],E[0]),C[1]=u(C[1],E[1]);break}}return $===A&&v.push(E),v}var h=s;function m(v,E){return h(v[0],E[0])}var p;try{p=e.reduce(c,[]),p.sort(m)}catch{return G(this,oe)}var d=0,y=f?function(v){return s(v,p[d][1])>0}:function(v){return s(v,p[d][1])>=0},b=l?function(v){return a(v,p[d][0])>0}:function(v){return a(v,p[d][0])>=0};function _(v){return!y(v)&&!b(v)}var g=y,w=new this.Collection(this,function(){return me(p[0][0],p[p.length-1][1],!l,!f)});return w._ondirectionchange=function(v){v==="next"?(g=y,h=s):(g=b,h=a),p.sort(m)},w._addAlgorithm(function(v,E,$){for(var A=v.key;g(A);)if(++d,d===p.length)return E($),!1;return _(A)?!0:(r._cmp(A,p[d][1])===0||r._cmp(A,p[d][0])===0||E(function(){h===s?v.continue(p[d][0]):v.continue(p[d][1])}),!1)}),w},t.prototype.startsWithAnyOf=function(){var e=le.apply(Fe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Ie(this):this.inAnyRange(e.map(function(n){return[n,n+Pe]})):G(this,"startsWithAnyOf() only works with strings")},t}();function oo(t){return Pt(rs.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var s=t._deps.indexedDB;if(!s)throw new T.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=function(a,o){return s.cmp(o,a)},this._max=function(a,o){return s.cmp(a,o)>0?a:o},this._min=function(a,o){return s.cmp(a,o)<0?a:o},this._IDBKeyRange=t._deps.IDBKeyRange})}function ie(t){return I(function(e){return wt(e),t(e.target.error),!1})}function wt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var bt="storagemutated",we="x-storagemutated-1",Ae=Tt(null,bt),uo=function(){function t(){}return t.prototype._lock=function(){return rt(!S.global),++this._reculock,this._reculock===1&&!S.global&&(S.lockOwnerFor=this),this},t.prototype._unlock=function(){if(rt(!S.global),--this._reculock===0)for(S.global||(S.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{et(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&S.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(rt(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new T.DatabaseClosed(i);case"MissingAPIError":throw new T.MissingAPI(i.message,i);default:throw new T.OpenFailed(i)}if(!this.active)throw new T.TransactionInactive;return rt(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=I(function(s){wt(s),n._reject(e.error)}),e.onabort=I(function(s){wt(s),n.active&&n._reject(new T.Abort(e.error)),n.active=!1,n.on("abort").fire(s)}),e.oncomplete=I(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Ae.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return H(new T.ReadOnly("Transaction is readonly"));if(!this.active)return H(new T.TransactionInactive);if(this._locked())return new x(function(a,o){i._blockedFuncs.push([function(){i._promise(e,n,r).then(a,o)},S])});if(r)return _e(function(){var a=new x(function(o,u){i._lock();var l=n(o,u,i);l&&l.then&&l.then(o,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var s=new x(function(a,o){var u=n(a,o,i);u&&u.then&&u.then(a,o)});return s._lib=!0,s},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=x.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new x(function(a,o){r.then(function(u){return n._waitingQueue.push(I(a.bind(null,u)))},function(u){return n._waitingQueue.push(I(o.bind(null,u)))}).finally(function(){n._waitingFor===s&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(q(n,e))return n[e];var r=this.schema[e];if(!r)throw new T.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function lo(t){return Pt(uo.prototype,function(n,r,i,s,a){var o=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new x(function(u,l){o._resolve=u,o._reject=l}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(u){var l=o.active;return o.active=!1,o.on.error.fire(u),o.parent?o.parent._reject(u):l&&o.idbtrans&&o.idbtrans.abort(),H(u)})})}function zn(t,e,n,r,i,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+is(e)}}function is(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ss(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Ni(n,function(r){return[r.name,r]})}}function co(t){return t.length===1?t[0]:t}var _t=function(t){try{return t.only([[]]),_t=function(){return[[]]},[[]]}catch{return _t=function(){return Pe},Pe}};function Yn(t){return t==null?function(){}:typeof t=="string"?fo(t):function(e){return fe(e,t)}}function fo(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return fe(n,t)}}function ni(t){return[].slice.call(t)}var ho=0;function ct(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function po(t,e,n){function r(c,h){var m=ni(c.objectStoreNames);return{schema:{name:c.name,tables:m.map(function(p){return h.objectStore(p)}).map(function(p){var d=p.keyPath,y=p.autoIncrement,b=V(d),_=d==null,g={},w={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:b,keyPath:d,autoIncrement:y,unique:!0,extractKey:Yn(d)},indexes:ni(p.indexNames).map(function(v){return p.index(v)}).map(function(v){var E=v.name,$=v.unique,A=v.multiEntry,C=v.keyPath,P=V(C),M={name:E,compound:P,keyPath:C,unique:$,multiEntry:A,extractKey:Yn(C)};return g[ct(C)]=M,M}),getIndexByKeyPath:function(v){return g[ct(v)]}};return g[":id"]=w.primaryKey,d!=null&&(g[ct(d)]=w.primaryKey),w})},hasGetAll:m.length>0&&"getAll"in h.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=c.lower,m=c.upper,p=c.lowerOpen,d=c.upperOpen,y=h===void 0?m===void 0?null:e.upperBound(m,!!d):m===void 0?e.lowerBound(h,!!p):e.bound(h,m,!!p,!!d);return y}function s(c){var h=c.name;function m(y){var b=y.trans,_=y.type,g=y.keys,w=y.values,v=y.range;return new Promise(function(E,$){E=I(E);var A=b.objectStore(h),C=A.keyPath==null,P=_==="put"||_==="add";if(!P&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var M=(g||w||{length:1}).length;if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var B,R=[],U=[],k=0,Q=function(re){++k,wt(re)};if(_==="deleteRange"){if(v.type===4)return E({numFailures:k,failures:U,results:[],lastResult:void 0});v.type===3?R.push(B=A.clear()):R.push(B=A.delete(i(v)))}else{var Z=P?C?[w,g]:[w,null]:[g,null],pe=Z[0],ne=Z[1];if(P)for(var X=0;X<M;++X)R.push(B=ne&&ne[X]!==void 0?A[_](pe[X],ne[X]):A[_](pe[X])),B.onerror=Q;else for(var X=0;X<M;++X)R.push(B=A[_](pe[X])),B.onerror=Q}var ve=function(re){var tt=re.target.result;R.forEach(function(ee,kt){return ee.error!=null&&(U[kt]=ee.error)}),E({numFailures:k,failures:U,results:_==="delete"?g:R.map(function(ee){return ee.result}),lastResult:tt})};B.onerror=function(re){Q(re),ve(re)},B.onsuccess=ve})}function p(y){var b=y.trans,_=y.values,g=y.query,w=y.reverse,v=y.unique;return new Promise(function(E,$){E=I(E);var A=g.index,C=g.range,P=b.objectStore(h),M=A.isPrimaryKey?P:P.index(A.name),B=w?v?"prevunique":"prev":v?"nextunique":"next",R=_||!("openKeyCursor"in M)?M.openCursor(i(C),B):M.openKeyCursor(i(C),B);R.onerror=ie($),R.onsuccess=I(function(U){var k=R.result;if(!k){E(null);return}k.___id=++ho,k.done=!1;var Q=k.continue.bind(k),Z=k.continuePrimaryKey;Z&&(Z=Z.bind(k));var pe=k.advance.bind(k),ne=function(){throw new Error("Cursor not started")},X=function(){throw new Error("Cursor not stopped")};k.trans=b,k.stop=k.continue=k.continuePrimaryKey=k.advance=ne,k.fail=I($),k.next=function(){var ve=this,re=1;return this.start(function(){return re--?ve.continue():ve.stop()}).then(function(){return ve})},k.start=function(ve){var re=new Promise(function(ee,kt){ee=I(ee),R.onerror=ie(kt),k.fail=kt,k.stop=function(fs){k.stop=k.continue=k.continuePrimaryKey=k.advance=X,ee(fs)}}),tt=function(){if(R.result)try{ve()}catch(ee){k.fail(ee)}else k.done=!0,k.start=function(){throw new Error("Cursor behind last entry")},k.stop()};return R.onsuccess=I(function(ee){R.onsuccess=tt,tt()}),k.continue=Q,k.continuePrimaryKey=Z,k.advance=pe,tt(),re},E(k)},$)})}function d(y){return function(b){return new Promise(function(_,g){_=I(_);var w=b.trans,v=b.values,E=b.limit,$=b.query,A=E===1/0?void 0:E,C=$.index,P=$.range,M=w.objectStore(h),B=C.isPrimaryKey?M:M.index(C.name),R=i(P);if(E===0)return _({result:[]});if(y){var U=v?B.getAll(R,A):B.getAllKeys(R,A);U.onsuccess=function(pe){return _({result:pe.target.result})},U.onerror=ie(g)}else{var k=0,Q=v||!("openKeyCursor"in B)?B.openCursor(R):B.openKeyCursor(R),Z=[];Q.onsuccess=function(pe){var ne=Q.result;if(!ne)return _({result:Z});if(Z.push(v?ne.value:ne.primaryKey),++k===E)return _({result:Z});ne.continue()},Q.onerror=ie(g)}})}}return{name:h,schema:c,mutate:m,getMany:function(y){var b=y.trans,_=y.keys;return new Promise(function(g,w){g=I(g);for(var v=b.objectStore(h),E=_.length,$=new Array(E),A=0,C=0,P,M=function(k){var Q=k.target;($[Q._pos]=Q.result)!=null,++C===A&&g($)},B=ie(w),R=0;R<E;++R){var U=_[R];U!=null&&(P=v.get(_[R]),P._pos=R,P.onsuccess=M,P.onerror=B,++A)}A===0&&g($)})},get:function(y){var b=y.trans,_=y.key;return new Promise(function(g,w){g=I(g);var v=b.objectStore(h),E=v.get(_);E.onsuccess=function($){return g($.target.result)},E.onerror=ie(w)})},query:d(u),openCursor:p,count:function(y){var b=y.query,_=y.trans,g=b.index,w=b.range;return new Promise(function(v,E){var $=_.objectStore(h),A=g.isPrimaryKey?$:$.index(g.name),C=i(w),P=C?A.count(C):A.count();P.onsuccess=I(function(M){return v(M.target.result)}),P.onerror=ie(E)})}}}var a=r(t,n),o=a.schema,u=a.hasGetAll,l=o.tables.map(function(c){return s(c)}),f={};return l.forEach(function(c){return f[c.name]=c}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(c){var h=f[c];if(!h)throw new Error("Table '"+c+"' not found");return f[c]},MIN_KEY:-1/0,MAX_KEY:_t(e),schema:o}}function vo(t,e){return e.reduce(function(n,r){var i=r.create;return D(D({},n),i(n))},t)}function mo(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var s=vo(po(e,i,r),t.dbcore);return{dbcore:s}}function br(t,e){var n=t._novip,r=e.db,i=mo(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(s){var a=s.name;n.core.schema.tables.some(function(o){return o.name===a})&&(s.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=s.core))})}function nn(t,e,n,r){var i=t._novip;n.forEach(function(s){var a=r[s];e.forEach(function(o){var u=fr(o,s);(!u||"value"in u&&u.value===void 0)&&(o===i.Transaction.prototype||o instanceof i.Transaction?he(o,s,{get:function(){return this.table(s)},set:function(l){Oi(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new i.Table(s,a))})})}function Gn(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function yo(t,e){return t._cfg.version-e._cfg.version}function go(t,e,n,r){var i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);var a=s._reject.bind(s),o=S.transless||S;_e(function(){S.trans=s,S.transless=o,e===0?(L(i).forEach(function(u){_r(n,u,i[u].primKey,i[u].indexes)}),br(t,n),x.follow(function(){return t.on.populate.fire(s)}).catch(a)):wo(t,e,s,n).catch(a)})}function wo(t,e,n,r){var i=t._novip,s=[],a=i._versions,o=i._dbSchema=Er(i,i.idbdb,r),u=!1,l=a.filter(function(c){return c._cfg.version>=e});l.forEach(function(c){s.push(function(){var h=o,m=c._cfg.dbschema;qn(i,h,r),qn(i,m,r),o=i._dbSchema=m;var p=as(h,m);p.add.forEach(function(w){_r(r,w[0],w[1].primKey,w[1].indexes)}),p.change.forEach(function(w){if(w.recreate)throw new T.Upgrade("Not yet support for changing primary key");var v=r.objectStore(w.name);w.add.forEach(function(E){return Jn(v,E)}),w.change.forEach(function(E){v.deleteIndex(E.name),Jn(v,E)}),w.del.forEach(function(E){return v.deleteIndex(E)})});var d=c._cfg.contentUpgrade;if(d&&c._cfg.version>e){br(i,r),n._memoizedTables={},u=!0;var y=Ki(m);p.del.forEach(function(w){y[w]=h[w]}),Gn(i,[i.Transaction.prototype]),nn(i,[i.Transaction.prototype],L(y),y),n.schema=y;var b=hr(d);b&&Ze();var _,g=x.follow(function(){if(_=d(n),_&&b){var w=de.bind(null,null);_.then(w,w)}});return _&&typeof _.then=="function"?x.resolve(_):g.then(function(){return _})}}),s.push(function(h){if(!u||!Ya){var m=c._cfg.dbschema;_o(m,h)}Gn(i,[i.Transaction.prototype]),nn(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function f(){return s.length?x.resolve(s.shift()(n.idbtrans)).then(f):x.resolve()}return f().then(function(){bo(o,r)})}function as(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],s=e[r];if(!i)n.add.push([r,s]);else{var a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!cn)a.recreate=!0,n.change.push(a);else{var o=i.idxByName,u=s.idxByName,l=void 0;for(l in o)u[l]||a.del.push(l);for(l in u){var f=o[l],c=u[l];f?f.src!==c.src&&a.change.push(c):a.add.push(c)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function _r(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(s){return Jn(i,s)}),i}function bo(t,e){L(t).forEach(function(n){e.db.objectStoreNames.contains(n)||_r(e,n,t[n].primKey,t[n].indexes)})}function _o(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function Jn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Er(t,e,n){var r={},i=un(e.objectStoreNames,0);return i.forEach(function(s){for(var a=n.objectStore(s),o=a.keyPath,u=zn(is(o),o||"",!1,!1,!!a.autoIncrement,o&&typeof o!="string",!0),l=[],f=0;f<a.indexNames.length;++f){var c=a.index(a.indexNames[f]);o=c.keyPath;var h=zn(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);l.push(h)}r[s]=ss(s,u,l)}),r}function Eo(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=Er(r,e,n);r._storeNames=un(e.objectStoreNames,0),nn(r,[r._allTables],L(i),i)}function Ao(t,e){var n=Er(t,t.idbdb,e),r=as(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function qn(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,s=0;s<i.length;++s){var a=i[s],o=n.objectStore(a);r._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var l=o.indexNames[u],f=o.index(l).keyPath,c=typeof f=="string"?f:"["+un(f).join("+")+"]";if(e[a]){var h=e[a].idxByName[c];h&&(h.name=l,delete e[a].idxByName[c],e[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&K.WorkerGlobalScope&&K instanceof K.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function xo(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return zn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),V(i),n===0)})}var So=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){L(e).forEach(function(r){if(e[r]!==null){var i=xo(e[r]),s=i.shift();if(s.multi)throw new T.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),n[r]=ss(r,s,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?z(this._cfg.storesSource,e):e;var r=n._versions,i={},s={};return r.forEach(function(a){z(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,Gn(n,[n._allTables,n,n.Transaction.prototype]),nn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],L(s),s),n._storeNames=L(s),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=vr(this._cfg.contentUpgrade||N,e),this},t}();function $o(t){return Pt(So.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ar(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Cr(fn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function xr(t){return t&&typeof t.databases=="function"}function Co(t){var e=t.indexedDB,n=t.IDBKeyRange;return xr(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==fn})}):Ar(e,n).toCollection().primaryKeys()}function To(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!xr(n)&&e!==fn&&Ar(n,r).put({name:e}).catch(N)}function Po(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!xr(n)&&e!==fn&&Ar(n,r).delete(e).catch(N)}function Qn(t){return _e(function(){return S.letThrough=!0,t()})}function ko(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function Do(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?H(e.dbOpenError):t});ae&&(e.openCanceller._stackHolder=Ne()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}var s=e.dbReadyResolve,a=null,o=!1;return x.race([r,(typeof navigator>"u"?x.resolve():ko()).then(function(){return new x(function(u,l){if(i(),!n)throw new T.MissingAPI;var f=t.name,c=e.autoSchema?n.open(f):n.open(f,Math.round(t.verno*10));if(!c)throw new T.MissingAPI;c.onerror=ie(l),c.onblocked=I(t._fireOnBlocked),c.onupgradeneeded=I(function(h){if(a=c.transaction,e.autoSchema&&!t._options.allowEmptyDB){c.onerror=wt,a.abort(),c.result.close();var m=n.deleteDatabase(f);m.onsuccess=m.onerror=I(function(){l(new T.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{a.onerror=ie(l);var p=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;o=p<1,t._novip.idbdb=c.result,go(t,p/10,a,l)}},l),c.onsuccess=I(function(){a=null;var h=t._novip.idbdb=c.result,m=un(h.objectStoreNames);if(m.length>0)try{var p=h.transaction(co(m),"readonly");e.autoSchema?Eo(t,h,p):(qn(t,t._dbSchema,p),Ao(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),br(t,p)}catch{}lt.push(t),h.onversionchange=I(function(d){e.vcFired=!0,t.on("versionchange").fire(d)}),h.onclose=I(function(d){t.on("close").fire(d)}),o&&To(t._deps,f),u()},l)})})]).then(function(){return i(),e.onReadyBeingFired=[],x.resolve(Qn(function(){return t.on.ready.fire(t.vip)})).then(function u(){if(e.onReadyBeingFired.length>0){var l=e.onReadyBeingFired.reduce(vr,N);return e.onReadyBeingFired=[],x.resolve(Qn(function(){return l(t.vip)})).then(u)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(u){e.dbOpenError=u;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),H(u)}).finally(function(){e.openComplete=!0,s()})}function Xn(t){var e=function(a){return t.next(a)},n=function(a){return t.throw(a)},r=s(e),i=s(n);function s(a){return function(o){var u=a(o),l=u.value;return u.done?l:!l||typeof l.then!="function"?V(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return s(e)()}function Ro(t,e,n){var r=arguments.length;if(r<2)throw new T.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=Ii(i);return[t,s,n]}function os(t,e,n,r,i){return x.resolve().then(function(){var s=S.transless||S,a=t._createTransaction(e,n,t._dbSchema,r),o={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===pr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return os(t,e,n,null,i)})):H(c)}var u=hr(i);u&&Ze();var l,f=x.follow(function(){if(l=i.call(a,a),l)if(u){var c=de.bind(null,null);l.then(c,c)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Xn(l))},o);return(l&&typeof l.then=="function"?x.resolve(l).then(function(c){return a.active?c:H(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return l})).then(function(c){return r&&a._resolve(),a._completion.then(function(){return c})}).catch(function(c){return a._reject(c),H(c)})})}function Nt(t,e,n){for(var r=V(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function Oo(t){return D(D({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},s=[];function a(d,y,b){var _=ct(d),g=i[_]=i[_]||[],w=d==null?0:typeof d=="string"?1:d.length,v=y>0,E=D(D({},b),{isVirtual:v,keyTail:y,keyLength:w,extractKey:Yn(d),unique:!v&&b.unique});if(g.push(E),E.isPrimaryKey||s.push(E),w>1){var $=w===2?d[0]:d.slice(0,w-1);a($,y+1,b)}return g.sort(function(A,C){return A.keyTail-C.keyTail}),E}var o=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var u=0,l=r.indexes;u<l.length;u++){var f=l[u];a(f.keyPath,0,f)}function c(d){var y=i[ct(d)];return y&&y[0]}function h(d,y){return{type:d.type===1?2:d.type,lower:Nt(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,y),lowerOpen:!0,upper:Nt(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,y),upperOpen:!0}}function m(d){var y=d.query.index;return y.isVirtual?D(D({},d),{query:{index:y,range:h(d.query.range,y.keyTail)}}):d}var p=D(D({},n),{schema:D(D({},r),{primaryKey:o,indexes:s,getIndexByKeyPath:c}),count:function(d){return n.count(m(d))},query:function(d){return n.query(m(d))},openCursor:function(d){var y=d.query.index,b=y.keyTail,_=y.isVirtual,g=y.keyLength;if(!_)return n.openCursor(d);function w(v){function E(A){A!=null?v.continue(Nt(A,d.reverse?t.MAX_KEY:t.MIN_KEY,b)):d.unique?v.continue(v.key.slice(0,g).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,b)):v.continue()}var $=Object.create(v,{continue:{value:E},continuePrimaryKey:{value:function(A,C){v.continuePrimaryKey(Nt(A,t.MAX_KEY,b),C)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var A=v.key;return g===1?A[0]:A.slice(0,g)}},value:{get:function(){return v.value}}});return $}return n.openCursor(m(d)).then(function(v){return v&&w(v)})}});return p}})}var Mo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Oo};function Sr(t,e,n,r){return n=n||{},r=r||"",L(t).forEach(function(i){if(!q(e,i))n[r+i]=void 0;else{var s=t[i],a=e[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){var o=On(s),u=On(a);o!==u?n[r+i]=e[i]:o==="Object"?Sr(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else s!==a&&(n[r+i]=e[i])}}),L(e).forEach(function(i){q(t,i)||(n[r+i]=e[i])}),n}function Bo(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var No={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return D(D({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=D(D({},n),{mutate:function(s){var a=S.trans,o=a.table(e).hook,u=o.deleting,l=o.creating,f=o.updating;switch(s.type){case"add":if(l.fire===N)break;return a._promise("readwrite",function(){return c(s)},!0);case"put":if(l.fire===N&&f.fire===N)break;return a._promise("readwrite",function(){return c(s)},!0);case"delete":if(u.fire===N)break;return a._promise("readwrite",function(){return c(s)},!0);case"deleteRange":if(u.fire===N)break;return a._promise("readwrite",function(){return h(s)},!0)}return n.mutate(s);function c(p){var d=S.trans,y=p.keys||Bo(r,p);if(!y)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?D(D({},p),{keys:y}):D({},p),p.type!=="delete"&&(p.values=Dn([],p.values,!0)),p.keys&&(p.keys=Dn([],p.keys,!0)),Ko(n,p,y).then(function(b){var _=y.map(function(g,w){var v=b[w],E={onerror:null,onsuccess:null};if(p.type==="delete")u.fire.call(E,g,v,d);else if(p.type==="add"||v===void 0){var $=l.fire.call(E,g,p.values[w],d);g==null&&$!=null&&(g=$,p.keys[w]=g,r.outbound||te(p.values[w],r.keyPath,g))}else{var A=Sr(v,p.values[w]),C=f.fire.call(E,A,g,v,d);if(C){var P=p.values[w];Object.keys(C).forEach(function(M){q(P,M)?P[M]=C[M]:te(P,M,C[M])})}}return E});return n.mutate(p).then(function(g){for(var w=g.failures,v=g.results,E=g.numFailures,$=g.lastResult,A=0;A<y.length;++A){var C=v?v[A]:y[A],P=_[A];C==null?P.onerror&&P.onerror(w[A]):P.onsuccess&&P.onsuccess(p.type==="put"&&b[A]?p.values[A]:C)}return{failures:w,results:v,numFailures:E,lastResult:$}}).catch(function(g){return _.forEach(function(w){return w.onerror&&w.onerror(g)}),Promise.reject(g)})})}function h(p){return m(p.trans,p.range,1e4)}function m(p,d,y){return n.query({trans:p,values:!1,query:{index:r,range:d},limit:y}).then(function(b){var _=b.result;return c({type:"delete",keys:_,trans:p}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):_.length<y?{failures:[],numFailures:0,lastResult:void 0}:m(p,D(D({},d),{lower:_[_.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Ko(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function us(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,s=0;i<e.keys.length&&s<t.length;++i)W(e.keys[i],t[s])===0&&(r.push(n?xt(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}var Io={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return D(D({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=us(r.keys,r.trans._cache,r.cache==="clone");return i?x.resolve(i):n.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?xt(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},xn;function $r(t){return!("from"in t)}var ue=function(t,e){if(this)z(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new ue;return t&&"d"in t&&z(n,t),n}};qe(ue.prototype,(xn={add:function(t){return rn(this,t),this},addKey:function(t){return Et(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return Et(e,n,n)}),this}},xn[Mn]=function(){return Zn(this)},xn));function Et(t,e,n){var r=W(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if($r(t))return z(t,{from:e,to:n,d:1});var i=t.l,s=t.r;if(W(n,t.from)<0)return i?Et(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},ri(t);if(W(e,t.to)>0)return s?Et(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},ri(t);W(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),W(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var a=!t.r;i&&!t.l&&rn(t,i),s&&a&&rn(t,s)}}function rn(t,e){function n(r,i){var s=i.from,a=i.to,o=i.l,u=i.r;Et(r,s,a),o&&n(r,o),u&&n(r,u)}$r(e)||n(t,e)}function Lo(t,e){var n=Zn(e),r=n.next();if(r.done)return!1;for(var i=r.value,s=Zn(t),a=s.next(i.from),o=a.value;!r.done&&!a.done;){if(W(o.from,i.to)<=0&&W(o.to,i.from)>=0)return!0;W(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function Zn(t){var e=$r(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&W(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||W(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function ri(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var s=i==="r"?"l":"r",a=D({},t),o=t[i];t.from=o.from,t.to=o.to,t[i]=o[i],a[i]=o[s],t[s]=a,a.d=ii(a)}t.d=ii(t)}function ii(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var Ho={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new ue(t.MIN_KEY,t.MAX_KEY);return D(D({},t),{table:function(r){var i=t.table(r),s=i.schema,a=s.primaryKey,o=a.extractKey,u=a.outbound,l=D(D({},i),{mutate:function(h){var m=h.trans,p=m.mutatedParts||(m.mutatedParts={}),d=function($){var A="idb://"+e+"/"+r+"/"+$;return p[A]||(p[A]=new ue)},y=d(""),b=d(":dels"),_=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],w=g[0],v=g[1],E=h.trans._cache;return i.mutate(h).then(function($){if(V(w)){_!=="delete"&&(w=$.results),y.addKeys(w);var A=us(w,E);!A&&_!=="add"&&b.addKeys(w),(A||v)&&Fo(d,s,A,v)}else if(w){var C={from:w.lower,to:w.upper};b.add(C),y.add(C)}else y.add(n),b.add(n),s.indexes.forEach(function(P){return d(P.name).add(n)});return $})}}),f=function(h){var m,p,d=h.query,y=d.index,b=d.range;return[y,new ue((m=b.lower)!==null&&m!==void 0?m:t.MIN_KEY,(p=b.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},c={get:function(h){return[a,new ue(h.key)]},getMany:function(h){return[a,new ue().addKeys(h.keys)]},count:f,query:f,openCursor:f};return L(c).forEach(function(h){l[h]=function(m){var p=S.subscr;if(p){var d=function(E){var $="idb://"+e+"/"+r+"/"+E;return p[$]||(p[$]=new ue)},y=d(""),b=d(":dels"),_=c[h](m),g=_[0],w=_[1];if(d(g.name||"").add(w),!g.isPrimaryKey)if(h==="count")b.add(n);else{var v=h==="query"&&u&&m.values&&i.query(D(D({},m),{values:!1}));return i[h].apply(this,arguments).then(function(E){if(h==="query"){if(u&&m.values)return v.then(function(P){var M=P.result;return y.addKeys(M),E});var $=m.values?E.result.map(o):E.result;m.values?y.addKeys($):b.addKeys($)}else if(h==="openCursor"){var A=E,C=m.values;return A&&Object.create(A,{key:{get:function(){return b.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var P=A.primaryKey;return b.addKey(P),P}},value:{get:function(){return C&&y.addKey(A.primaryKey),A.value}}})}return E})}}return i[h].apply(this,arguments)}}),l}})}};function Fo(t,e,n,r){function i(s){var a=t(s.name||"");function o(l){return l!=null?s.extractKey(l):null}var u=function(l){return s.multiEntry&&V(l)?l.forEach(function(f){return a.addKey(f)}):a.addKey(l)};(n||r).forEach(function(l,f){var c=n&&o(n[f]),h=r&&o(r[f]);W(c,h)!==0&&(c!=null&&u(c),h!=null&&u(h))})}e.indexes.forEach(i)}var Cr=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=D({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var s=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:N,dbReadyPromise:null,cancelOpen:N,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new x(function(o){a.dbReadyResolve=o}),a.openCanceller=new x(function(o,u){a.cancelOpen=u}),this._state=a,this.name=e,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[vr,N]}),this.on.ready.subscribe=Mi(this.on.ready.subscribe,function(o){return function(u,l){t.vip(function(){var f=r._state;if(f.openComplete)f.dbOpenError||x.resolve().then(u),l&&o(u);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(u),l&&o(u);else{o(u);var c=r;l||o(function h(){c.on.ready.unsubscribe(u),c.on.ready.unsubscribe(h)})}})}}),this.Collection=to(this),this.Table=qa(this),this.Transaction=lo(this),this.Version=$o(this),this.WhereClause=oo(this),this.on("versionchange",function(o){o.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(o){!o.newVersion||o.newVersion<o.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+o.oldVersion/10)}),this._maxKey=_t(n.IDBKeyRange),this._createTransaction=function(o,u,l,f){return new r.Transaction(o,u,l,r._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(o){r.on("blocked").fire(o),lt.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(o)})},this.use(Mo),this.use(No),this.use(Ho),this.use(Io),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(function(o){return o(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new T.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(yo),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||S.letThrough||this._vip)?e():new x(function(r,i){if(n._state.openComplete)return i(new T.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new T.DatabaseClosed);return}n.open().catch(N)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,s=e.name;s&&this.unuse({stack:n,name:s});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:s}),a.sort(function(o,u){return o.level-u.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return i?s.create!==i:r?s.name!==r:!1})),this},t.prototype.open=function(){return Do(this)},t.prototype._close=function(){var e=this._state,n=lt.indexOf(this);if(n>=0&&lt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new x(function(r){e.dbReadyResolve=r}),e.openCanceller=new x(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new T.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new x(function(i,s){var a=function(){e.close();var o=e._deps.indexedDB.deleteDatabase(e.name);o.onsuccess=I(function(){Po(e._deps,e.name),i()}),o.onerror=ie(s),o.onblocked=e._fireOnBlocked};if(n)throw new T.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return L(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=Ro.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,s=S.trans;(!s||s.db!==this||e.indexOf("!")!==-1)&&(s=null);var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var o,u;try{if(u=n.map(function(f){var c=f instanceof i.Table?f.name:f;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===wn)o=wn;else if(e=="rw"||e==bn)o=bn;else throw new T.InvalidArgument("Invalid transaction mode: "+e);if(s){if(s.mode===wn&&o===bn)if(a)s=null;else throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&u.forEach(function(f){if(s&&s.storeNames.indexOf(f)===-1)if(a)s=null;else throw new T.SubTransaction("Table "+f+" not included in parent transaction.")}),a&&s&&!s.active&&(s=null)}}catch(f){return s?s._promise(null,function(c,h){h(f)}):H(f)}var l=os.bind(null,this,o,u,s,r);return s?s._promise(o,l,"lock"):S.trans?et(S.transless,function(){return i._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(e){if(!q(this._allTables,e))throw new T.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),Uo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jo=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[Uo]=function(){return this},t}();function ls(t,e){return L(e).forEach(function(n){var r=t[n]||(t[n]=new ue);rn(r,e[n])}),t}function Vo(t){return new jo(function(e){var n=hr(t);function r(m){n&&Ze();var p=function(){return _e(t,{subscr:m,trans:null})},d=S.trans?et(S.transless,p):p();return n&&d.then(de,de),d}var i=!1,s={},a={},o={get closed(){return i},unsubscribe:function(){i=!0,Ae.storagemutated.unsubscribe(c)}};e.start&&e.start(o);var u=!1,l=!1;function f(){return L(a).some(function(m){return s[m]&&Lo(s[m],a[m])})}var c=function(m){ls(s,m),f()&&h()},h=function(){if(!(u||i)){s={};var m={},p=r(m);l||(Ae(bt,c),l=!0),u=!0,Promise.resolve(p).then(function(d){u=!1,!i&&(f()?h():(s={},a=m,e.next&&e.next(d)))},function(d){u=!1,e.error&&e.error(d),o.unsubscribe()})}};return h(),o})}var er;try{er={indexedDB:K.indexedDB||K.mozIndexedDB||K.webkitIndexedDB||K.msIndexedDB,IDBKeyRange:K.IDBKeyRange||K.webkitIDBKeyRange}}catch{er={indexedDB:null,IDBKeyRange:null}}var $e=Cr;qe($e,D(D({},ln),{delete:function(t){var e=new $e(t,{addons:[]});return e.delete()},exists:function(t){return new $e(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Co($e.dependencies).then(t)}catch{return H(new T.MissingAPI)}},defineClass:function(){function t(e){z(this,e)}return t},ignoreTransaction:function(t){return S.trans?et(S.transless,t):t()},vip:Qn,async:function(t){return function(){try{var e=Xn(t.apply(this,arguments));return!e||typeof e.then!="function"?x.resolve(e):e}catch(n){return H(n)}}},spawn:function(t,e,n){try{var r=Xn(t.apply(n,e||[]));return!r||typeof r.then!="function"?x.resolve(r):r}catch(i){return H(i)}},currentTransaction:{get:function(){return S.trans||null}},waitFor:function(t,e){var n=x.resolve(typeof t=="function"?$e.ignoreTransaction(t):t).timeout(e||6e4);return S.trans?S.trans.waitFor(n):n},Promise:x,debug:{get:function(){return ae},set:function(t){Hi(t,t==="dexie"?function(){return!0}:es)}},derive:Qe,extend:z,props:qe,override:Mi,Events:Tt,on:Ae,liveQuery:Vo,extendObservabilitySet:ls,getByKeyPath:fe,setByKeyPath:te,delByKeyPath:_a,shallowClone:Ki,deepClone:xt,getObjectDiff:Sr,cmp:W,asap:Bi,minKey:Wn,addons:[],connections:lt,errnames:pr,dependencies:er,semVer:Qr,version:Qr.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));$e.maxKey=_t($e.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ae(bt,function(t){if(!ce){var e;cn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(we,!0,!0,t)):e=new CustomEvent(we,{detail:t}),ce=!0,dispatchEvent(e),ce=!1}}),addEventListener(we,function(t){var e=t.detail;ce||sn(e)}));function sn(t){var e=ce;try{ce=!0,Ae.storagemutated.fire(t)}finally{ce=e}}var ce=!1;if(typeof BroadcastChannel<"u"){var Kt=new BroadcastChannel(we);typeof Kt.unref=="function"&&Kt.unref(),Ae(bt,function(t){ce||Kt.postMessage(t)}),Kt.onmessage=function(t){t.data&&sn(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ae(bt,function(t){try{ce||(typeof localStorage<"u"&&localStorage.setItem(we,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&Dn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:we,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===we){var e=JSON.parse(t.newValue);e&&sn(e.changedParts)}});var si=self.document&&navigator.serviceWorker;si&&si.addEventListener("message",Wo)}function Wo(t){var e=t.data;e&&e.type===we&&sn(e.changedParts)}x.rejectionMapper=ka;Hi(ae,es);const zo=["https://files.porsche.com/filestore/image/multimedia/none/992-gt3-modelimage-sideshot/model/765dfc51-51bc-11eb-80d1-005056bbdc38/porsche-model.png"],Yo="image-resizing-example-storage";class Go extends Cr{constructor(){super(Yo),this.version(1).stores({storedUrls:"&index"})}}const Sn=new Go,ai={async set(t){const e=tr(t).map((n,r)=>({index:r,url:n}));await Sn.storedUrls.clear(),await Sn.storedUrls.bulkPut(e)},async get(){const e=(await Sn.storedUrls.toArray()).map(r=>r.url),n=tr(e);return n.length?n:zo}};function tr(t){return t.map(e=>e.replace(/^"/,"").replace(/"$/,"").trim()).filter(Ms)}const{defineElement:cs,defineElementNoInputs:Jo}=oa();async function qo(t){const e=Ge(),n=new Image;return n.onload=()=>{e.resolve(n)},n.onerror=r=>{e.reject(new Error(`Failed to load '${t}'`))},n.src=t,e.promise}function an(t){if("templateString"in t)return t.templateString;const{strings:e,values:n}=t;if((!e||!(e!=null&&e.length))&&(!n||!n.length))return"";const r=[...n||[],""],s=(e??[""]).map((a,o)=>{const u=Qo(a,r[o]);return`${a}${u}`});return vi(s.join(""))}function Qo(t,e){return e._$litType$!=null||e._$litDirective$!=null?an(e):Array.isArray(e)?e.map(r=>an(r)).join(""):t.endsWith("=")?`"${e}"`:e}function Xo(t){return{height:t.maxHeight,width:t.maxWidth}}function Zo({constraintBox:t,sizableBox:e}){return e.width/e.height>t.width/t.height?"width":"height"}var oi=Object.freeze,eu=Object.defineProperty,tu=(t,e)=>oi(eu(t,"raw",{value:oi(e||t.slice())})),ui;const zt=cs()({tagName:"vir-resizable-image",stateInit:{imageData:bi(),imageDimensions:void 0},styles:cr`
        :host {
            display: block;
            position: relative;
            overflow: hidden;
        }

        .frame-constraint {
            position: relative;
            transition: 200ms;
        }

        iframe {
            display: block;
            border: none;
            max-width: calc(100% + 1px);
            max-height: calc(100% + 1px);
            width: calc(100% + 1px);
            height: calc(100% + 1px);
        }
    `,renderCallback:({state:t,inputs:e,updateState:n,host:r})=>{n({imageData:{createPromise:async()=>nu(e.imageUrl),trigger:e.imageUrl}});const i=Ai(t.imageData,"Loading...",s=>{const a=r.shadowRoot.querySelector(".frame-constraint");if(!(a instanceof HTMLElement))throw new Error("Could not find frame constraint div.");const o=t.imageDimensions??s.dimensions,u=Xo(e.maxDimensions),l=Zo({sizableBox:o,constraintBox:u}),f=u[l]/o[l],c=f>1?1:f;return a.style.width=Jt(Math.floor(o.width*c)),a.style.height=Jt(Math.floor(o.height*c)),Oe`
                    <iframe
                        ${aa(h=>{h.contentWindow.addEventListener("message",m=>{const p=JSON.parse(m.data),d=Number(p.width),y=Number(p.height);!isNaN(d)&&!isNaN(y)?n({imageDimensions:{width:d,height:y}}):console.warn(`Got bad data: ${JSON.stringify(p)}`)})})}
                        scrolling="no"
                        srcdoc=${iu(s)}
                    ></iframe>
                `});return Oe`
            <div class="frame-constraint">${i}</div>
        `}});async function nu(t){var o;const e=await fetch(t),n=await e.text(),r=((o=e.headers.get("Content-Type"))==null?void 0:o.includes("svg"))||n.includes("<svg"),i=Oe`
        <img src=${t} />
    `,s=r?n:an(i),a=await ru(t);return{templateString:s,dimensions:a,imageUrl:t}}async function ru(t){const e=await qo(t);return{width:e.naturalWidth,height:e.naturalHeight}}function iu(t){const e=Oe(ui||(ui=tu([`
        <!DOCTYPE html>
        <html>
            <head>
                <style>
                    body,
                    html {
                        height: 100vh;
                        width: 100vw;
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                    }

                    img,
                    svg {
                        max-height: 100vh;
                        max-width: 100vw;
                    }
                </style>
            </head>
            <body>
                `,`

                <script>
                    const svgElement = document.body.querySelector('svg');

                    if (svgElement) {
                        const viewBox = svgElement.getAttribute('viewBox');
                        const viewBoxDimensions = viewBox?.match(
                            /s*\\d+\\s+\\d+\\s+(\\d+)\\s+(\\d+)\\s*/,
                        );
                        const viewBoxWidth = viewBoxDimensions?.[1];
                        const viewBoxHeight = viewBoxDimensions?.[2];
                        const width = Number(
                            svgElement.getAttribute('width')?.replace(/px$/, '') ?? viewBoxWidth,
                        );
                        const height = Number(
                            svgElement.getAttribute('height')?.replace(/px$/, '') ?? viewBoxHeight,
                        );

                        if (!isNaN(width) && !isNaN(height) && !viewBox) {
                            svgElement.setAttribute('viewBox', \`0 0 \${width} \${height}\`);
                        } else if (isNaN(width) || isNaN(height)) {
                            console.warn(
                                \`Failed to retrieve dimensions: \${JSON.stringify({
                                    width,
                                    height,
                                    viewBoxWidth,
                                    viewBoxHeight,
                                    imageUrl: '`,`',
                                })}\`,
                            );
                        }
                        svgElement.removeAttribute('width');
                        svgElement.removeAttribute('height');
                        svgElement.style.removeProperty('width');
                        svgElement.style.removeProperty('height');

                        globalThis.postMessage(JSON.stringify({width, height}));
                    }
                <\/script>
            </body>
        </html>
    `],[`
        <!DOCTYPE html>
        <html>
            <head>
                <style>
                    body,
                    html {
                        height: 100vh;
                        width: 100vw;
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                    }

                    img,
                    svg {
                        max-height: 100vh;
                        max-width: 100vw;
                    }
                </style>
            </head>
            <body>
                `,`

                <script>
                    const svgElement = document.body.querySelector('svg');

                    if (svgElement) {
                        const viewBox = svgElement.getAttribute('viewBox');
                        const viewBoxDimensions = viewBox?.match(
                            /s*\\\\d+\\\\s+\\\\d+\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s*/,
                        );
                        const viewBoxWidth = viewBoxDimensions?.[1];
                        const viewBoxHeight = viewBoxDimensions?.[2];
                        const width = Number(
                            svgElement.getAttribute('width')?.replace(/px$/, '') ?? viewBoxWidth,
                        );
                        const height = Number(
                            svgElement.getAttribute('height')?.replace(/px$/, '') ?? viewBoxHeight,
                        );

                        if (!isNaN(width) && !isNaN(height) && !viewBox) {
                            svgElement.setAttribute('viewBox', \\\`0 0 \\\${width} \\\${height}\\\`);
                        } else if (isNaN(width) || isNaN(height)) {
                            console.warn(
                                \\\`Failed to retrieve dimensions: \\\${JSON.stringify({
                                    width,
                                    height,
                                    viewBoxWidth,
                                    viewBoxHeight,
                                    imageUrl: '`,`',
                                })}\\\`,
                            );
                        }
                        svgElement.removeAttribute('width');
                        svgElement.removeAttribute('height');
                        svgElement.style.removeProperty('width');
                        svgElement.style.removeProperty('height');

                        globalThis.postMessage(JSON.stringify({width, height}));
                    }
                <\/script>
            </body>
        </html>
    `])),t.templateString,t.imageUrl);return vi(an(e))}const It=cs()({tagName:"vir-url-input",events:{urlsChange:Xs()},styles:cr`
        :host {
            display: block;
        }

        textarea {
            box-sizing: border-box;
            width: 100%;
            height: 100%;
            max-height: 100%;
            height: 150px;
            font: inherit;
            outline: none;
            border: 2px solid #ccc;
            border-radius: 4px;

            white-space: pre;
            overflow-wrap: normal;
            overflow-x: scroll;
            padding: 8px;
        }

        textarea:focus {
            border-color: blue;
        }
    `,renderCallback:({inputs:t,dispatch:e,events:n,host:r})=>{const i=r.shadowRoot.querySelector("textarea"),s=t.urls.join(`
`),a=s+`
`;return i&&(i==null?void 0:i.value)!==s&&(i.value=s),Oe`
            <textarea
                ${ot("input",o=>{const l=o.currentTarget.value.split(`
`).map(f=>f.trim().replace(/,+$/,""));e(new n.urlsChange(l))})}
                ${ot("blur",()=>{i&&(i.value=a)})}
                .value=${i&&i.matches(":focus")?s:a}
            ></textarea>
        `}});Jo({tagName:"vir-app",stateInit:{imageUrls:bi(ai.get()),constraints:{maxHeight:200,maxWidth:100}},styles:cr`
        :host {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            box-sizing: border-box;
            padding: 16px;
        }

        .all-image-containers {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        ${zt} {
            border: 5px solid red;
            background-color: rgb(241, 241, 241);
            border-radius: 8px;
        }

        .images-container {
            align-items: center;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .images-container > * {
            flex-shrink: 0;
        }

        label {
            display: flex;
            align-items: flex-start;
            flex-direction: column;
            font: inherit;
            font-size: 1.4em;
        }

        p {
            display: flex;
            gap: 8px;
        }

        input {
            font: inherit;
        }
    `,renderCallback:({state:t,updateState:e})=>Oe`
            <${It}
                ${ur(It,{urls:Array.isArray(t.imageUrls)?t.imageUrls:[]})}
                ${ot(It.events.urlsChange,n=>{const r=n.detail;ai.set(r),e({imageUrls:{resolvedValue:n.detail}})})}
            ></${It}>
            <p>
                <label>
                    Max Width
                    <br>
                    ${Jt(t.constraints.maxWidth)}
                    <br>
                    <input type="range" max="1000" min="20" .value=${t.constraints.maxWidth} ${ot("input",n=>{const r=n.currentTarget;e({constraints:{...t.constraints,maxWidth:Number(r.value)||0}})})}/>
                </label>
                <label>
                    Max Height
                    <br>
                    ${Jt(t.constraints.maxHeight)}
                    <br>
                    <input type="range" max="1000" min="20" .value=${t.constraints.maxHeight} ${ot("input",n=>{const r=n.currentTarget;e({constraints:{...t.constraints,maxHeight:Number(r.value)||0}})})}/>
                </label>
            </p>
            <div class="images-container">
                ${su(t.constraints,t.imageUrls)}
            </div>
        `});function su(t,e){return Ai(e,"Loading...",n=>tr(n).map(r=>Oe`
                <${zt}
                    ${ur(zt,{imageUrl:r,maxDimensions:t})}
                ></${zt}>
            `))}
